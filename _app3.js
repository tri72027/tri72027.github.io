(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{41396:function(e,t){!function(e){"use strict";var t,n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function i(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function o(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}e.OPERATION=void 0,(t=e.OPERATION||(e.OPERATION={}))[t.ADD=128]="ADD",t[t.REPLACE=0]="REPLACE",t[t.DELETE=64]="DELETE",t[t.DELETE_AND_ADD=192]="DELETE_AND_ADD",t[t.TOUCH=1]="TOUCH",t[t.CLEAR=10]="CLEAR";var a=function(){function t(e,t,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=e,this.setParent(t,n)}return t.prototype.setParent=function(e,t,n){var r=this;if(this.indexes||(this.indexes=this.ref instanceof ie?this.ref._definition.indexes:{}),this.parent=e,this.parentIndex=n,t)if(this.root=t,this.ref instanceof ie){var i=this.ref._definition;for(var o in i.schema){var a=this.ref[o];if(a&&a.$changes){var s=i.indexes[o];a.$changes.setParent(this.ref,t,s)}}}else"object"==typeof this.ref&&this.ref.forEach((function(e,t){if(e instanceof ie){var n=e.$changes,i=r.ref.$changes.indexes[t];n.setParent(r.ref,r.root,i)}}))},t.prototype.operation=function(e){this.changes.set(--this.currentCustomOperation,e)},t.prototype.change=function(t,n){void 0===n&&(n=e.OPERATION.ADD);var r="number"==typeof t?t:this.indexes[t];this.assertValidIndex(r,t);var i=this.changes.get(r);i&&i.op!==e.OPERATION.DELETE&&i.op!==e.OPERATION.TOUCH||this.changes.set(r,{op:i&&i.op===e.OPERATION.DELETE?e.OPERATION.DELETE_AND_ADD:n,index:r}),this.allChanges.add(r),this.changed=!0,this.touchParents()},t.prototype.touch=function(t){var n="number"==typeof t?t:this.indexes[t];this.assertValidIndex(n,t),this.changes.has(n)||this.changes.set(n,{op:e.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},t.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},t.prototype.getType=function(e){if(this.ref._definition)return(t=this.ref._definition).schema[t.fieldsByIndex[e]];var t=this.parent._definition;return Object.values(t.schema[t.fieldsByIndex[this.parentIndex]])[0]},t.prototype.getChildrenFilter=function(){var e=this.parent._definition.childFilters;return e&&e[this.parentIndex]},t.prototype.getValue=function(e){return this.ref.getByIndex(e)},t.prototype.delete=function(t){var n="number"==typeof t?t:this.indexes[t];if(void 0!==n){var r=this.getValue(n);this.changes.set(n,{op:e.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],r&&r.$changes&&(r.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(t," (").concat(n,")"))},t.prototype.discard=function(t,n){var r=this;void 0===t&&(t=!1),void 0===n&&(n=!1),this.ref instanceof ie||this.changes.forEach((function(t){if(t.op===e.OPERATION.DELETE){var n=r.ref.getIndex(t.index);delete r.indexes[n]}})),this.changes.clear(),this.changed=t,n&&this.allChanges.clear(),this.currentCustomOperation=0},t.prototype.discardAll=function(){var e=this;this.changes.forEach((function(t){var n=e.getValue(t.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},t.prototype.cache=function(e,t){this.caches[e]=t},t.prototype.clone=function(){return new t(this.ref,this.parent,this.root)},t.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},t.prototype.assertValidIndex=function(e,t){if(void 0===e)throw Error('ChangeTree: missing index for field "'.concat(t,'"'))},t}();function s(e,t,n,r){return e[t]||(e[t]=[]),e[t].push(n),null==r||r.forEach((function(e,t){return n(e,t)})),function(){return l(e[t],e[t].indexOf(n))}}function u(t){var n=this,r="string"!=typeof this.$changes.getType();this.$items.forEach((function(i,o){t.push({refId:n.$changes.refId,op:e.OPERATION.DELETE,field:o,value:void 0,previousValue:i}),r&&n.$changes.root.removeRef(i.$changes.refId)}))}function l(e,t){if(-1===t||t>=e.length)return!1;for(var n=e.length-1,r=t;r<n;r++)e[r]=e[r+1];return e.length=n,!0}var c=function(e,t){var n=e.toString(),r=t.toString();return n<r?-1:n>r?1:0},f=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$changes=new a(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,e)}return t.prototype.onAdd=function(t,n){return void 0===n&&(n=!0),s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.ADD,t,n?this.$items:void 0)},t.prototype.onRemove=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.DELETE,t)},t.prototype.onChange=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.REPLACE,t)},t.is=function(e){return Array.isArray(e)||void 0!==e.array},Object.defineProperty(t.prototype,"length",{get:function(){return this.$items.size},set:function(e){0===e?this.clear():this.splice(e,this.length-e)},enumerable:!1,configurable:!0}),t.prototype.push=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){e=t.$refId++,t.setAt(e,n)})),e},t.prototype.pop=function(){var e=Array.from(this.$indexes.values()).pop();if(void 0!==e){this.$changes.delete(e),this.$indexes.delete(e);var t=this.$items.get(e);return this.$items.delete(e),t}},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.setAt=function(t,n){void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,t);var r,i,o=null!==(i=null===(r=this.$changes.indexes[t])||void 0===r?void 0:r.op)&&void 0!==i?i:e.OPERATION.ADD;this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,n),this.$changes.change(t,o)},t.prototype.deleteAt=function(e){var t=Array.from(this.$items.keys())[e];return void 0!==t&&this.$deleteAt(t)},t.prototype.$deleteAt=function(e){return this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&u.call(this,t),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.concat=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new(t.bind.apply(t,o([void 0],(e=Array.from(this.$items.values())).concat.apply(e,n),!1)))},t.prototype.join=function(e){return Array.from(this.$items.values()).join(e)},t.prototype.reverse=function(){var e=this,t=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,r){e.setAt(t[r],n)})),this},t.prototype.shift=function(){var e=Array.from(this.$items.keys()).shift();if(void 0!==e){var t=this.$items.get(e);return this.$deleteAt(e),t}},t.prototype.slice=function(e,n){var r=new t;return r.push.apply(r,Array.from(this.$items.values()).slice(e,n)),r},t.prototype.sort=function(e){var t=this;void 0===e&&(e=c);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(e).forEach((function(e,r){t.setAt(n[r],e)})),this},t.prototype.splice=function(e,t){void 0===t&&(t=this.length-e);for(var n=Array.from(this.$items.keys()),r=[],i=e;i<e+t;i++)r.push(this.$items.get(n[i])),this.$deleteAt(n[i]);return r},t.prototype.unshift=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.length,i=t.length,o=Array.from(this.$items.values());return t.forEach((function(t,n){e.setAt(n,t)})),o.forEach((function(t,n){e.setAt(i+n,t)})),r+i},t.prototype.indexOf=function(e,t){return Array.from(this.$items.values()).indexOf(e,t)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),Array.from(this.$items.values()).lastIndexOf(e,t)},t.prototype.every=function(e,t){return Array.from(this.$items.values()).every(e,t)},t.prototype.some=function(e,t){return Array.from(this.$items.values()).some(e,t)},t.prototype.forEach=function(e,t){Array.from(this.$items.values()).forEach(e,t)},t.prototype.map=function(e,t){return Array.from(this.$items.values()).map(e,t)},t.prototype.filter=function(e,t){return Array.from(this.$items.values()).filter(e,t)},t.prototype.reduce=function(e,t){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},t.prototype.reduceRight=function(e,t){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},t.prototype.find=function(e,t){return Array.from(this.$items.values()).find(e,t)},t.prototype.findIndex=function(e,t){return Array.from(this.$items.values()).findIndex(e,t)},t.prototype.fill=function(e,t,n){throw Error("ArraySchema#fill() not implemented")},t.prototype.copyWithin=function(e,t,n){throw Error("ArraySchema#copyWithin() not implemented")},t.prototype.toString=function(){return this.$items.toString()},t.prototype.toLocaleString=function(){return this.$items.toLocaleString()},t.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},t.prototype.includes=function(e,t){return Array.from(this.$items.values()).includes(e,t)},t.prototype.flatMap=function(e,t){throw Error("ArraySchema#flatMap() is not supported.")},t.prototype.flat=function(e){throw Error("ArraySchema#flat() is not supported.")},t.prototype.findLast=function(){var e=Array.from(this.$items.values());return e.findLast.apply(e,arguments)},t.prototype.findLastIndex=function(){var e=Array.from(this.$items.values());return e.findLastIndex.apply(e,arguments)},t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){return this.toArray().map((function(e){return"function"==typeof e.toJSON?e.toJSON():e}))},t.prototype.clone=function(e){return e?new(t.bind.apply(t,o([void 0],Array.from(this.$items.values()),!1))):new(t.bind.apply(t,o([void 0],this.map((function(e){return e.$changes?e.clone():e})),!1)))},t}(),d=function(){function t(e){var n=this;if(this.$changes=new a(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e)if(e instanceof Map||e instanceof t)e.forEach((function(e,t){return n.set(t,e)}));else for(var r in e)this.set(r,e[r])}return t.prototype.onAdd=function(t,n){return void 0===n&&(n=!0),s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.ADD,t,n?this.$items:void 0)},t.prototype.onRemove=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.DELETE,t)},t.prototype.onChange=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.REPLACE,t)},t.is=function(e){return void 0!==e.map},t.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),t.prototype.set=function(t,n){if(null==n)throw Error("MapSchema#set('".concat(t,"', ").concat(n,"): trying to set ").concat(n," value on '").concat(t,"'."));var r=void 0!==this.$changes.indexes[t],i=r?this.$changes.indexes[t]:this.$refId++,o=r?e.OPERATION.REPLACE:e.OPERATION.ADD,a=void 0!==n.$changes;return a&&n.$changes.setParent(this,this.$changes.root,i),r?a&&this.$items.get(t)!==n&&(o=e.OPERATION.ADD):(this.$changes.indexes[t]=i,this.$indexes.set(i,t)),this.$items.set(t,n),this.$changes.change(t,o),this},t.prototype.get=function(e){return this.$items.get(e)},t.prototype.delete=function(e){return this.$changes.delete(e),this.$items.delete(e)},t.prototype.clear=function(t){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&u.call(this,t),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return this.$items.has(e)},t.prototype.forEach=function(e){this.$items.forEach(e)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.keys=function(){return this.$items.keys()},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toJSON=function(){var e={};return this.forEach((function(t,n){e[n]="function"==typeof t.toJSON?t.toJSON():t})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e,t){e.$changes?n.set(t,e.clone()):n.set(t,e)}))),n},t}(),p={},h=function(){function e(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return e.create=function(t){var n=new e;return n.schema=Object.assign({},t&&t.schema||{}),n.indexes=Object.assign({},t&&t.indexes||{}),n.fieldsByIndex=Object.assign({},t&&t.fieldsByIndex||{}),n.descriptors=Object.assign({},t&&t.descriptors||{}),n.deprecated=Object.assign({},t&&t.deprecated||{}),n},e.prototype.addField=function(e,t){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=e,this.indexes[e]=n,this.schema[e]=Array.isArray(t)?{array:t[0]}:t},e.prototype.hasField=function(e){return void 0!==this.indexes[e]},e.prototype.addFilter=function(e,t){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[e]]=t,this.indexesWithFilters.push(this.indexes[e]),!0},e.prototype.addChildrenFilter=function(e,t){var n=this.indexes[e];if(p[Object.keys(this.schema[e])[0]])return this.childFilters||(this.childFilters={}),this.childFilters[n]=t,!0;console.warn("@filterChildren: field '".concat(e,"' can't have children. Ignoring filter."))},e.prototype.getChildrenFilter=function(e){return this.childFilters&&this.childFilters[this.indexes[e]]},e.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},e}(),g=function(){function e(){this.types={},this.schemas=new Map,this.useFilters=!1}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e,t){void 0===t&&(t=this.schemas.size),e._definition=h.create(e._definition),e._typeid=t,this.types[t]=e,this.schemas.set(e,t)},e.create=function(t){return void 0===t&&(t={}),function(n){return t.context||(t.context=new e),m(n,t)}},e}(),v=new g;function m(e,t){return void 0===t&&(t={}),function(n,r){var i=t.context||v,a=n.constructor;if(a._context=i,!e)throw Error("".concat(a.name,': @type() reference provided for "').concat(r,"\" is undefined. Make sure you don't have any circular dependencies."));i.has(a)||i.add(a);var s=a._definition;if(s.addField(r,e),s.descriptors[r]){if(s.deprecated[r])return;try{throw Error("@colyseus/schema: Duplicate '".concat(r,"' definition on '").concat(a.name,"'.\nCheck @type() annotation"))}catch(e){var u=e.stack.split("\n")[4].trim();throw Error("".concat(e.message," ").concat(u))}}var l=f.is(e),c=!l&&d.is(e);if("string"!=typeof e&&!ie.is(e)){var p=Object.values(e)[0];"string"==typeof p||i.has(p)||i.add(p)}if(t.manual)s.descriptors[r]={enumerable:!0,configurable:!0,writable:!0};else{var h="_".concat(r);s.descriptors[h]={enumerable:!1,configurable:!1,writable:!0},s.descriptors[r]={get:function(){return this[h]},set:function(e){if(e!==this[h]){if(null!=e){var t,n;if(!l||e instanceof f||(e=new(f.bind.apply(f,o([void 0],e,!1)))),!c||e instanceof d||(e=new d(e)),void 0===e.$proxy)c?((t=e).$proxy=!0,e=t=new Proxy(t,{get:function(e,t){return"symbol"!=typeof t&&void 0===e[t]?e.get(t):e[t]},set:function(e,t,n){return"symbol"!=typeof t&&-1===t.indexOf("$")&&"onAdd"!==t&&"onRemove"!==t&&"onChange"!==t?e.set(t,n):e[t]=n,!0},deleteProperty:function(e,t){return e.delete(t),!0}})):l&&((n=e).$proxy=!0,e=n=new Proxy(n,{get:function(e,t){return"symbol"==typeof t||isNaN(t)?e[t]:e.at(t)},set:function(e,t,n){if("symbol"==typeof t||isNaN(t))e[t]=n;else{var r=parseInt(Array.from(e.$items.keys())[t]||t);null==n?e.deleteAt(r):e.setAt(r,n)}return!0},deleteProperty:function(e,t){return"number"==typeof t?e.deleteAt(t):delete e[t],!0}}));this.$changes.change(r),e.$changes&&e.$changes.setParent(this,this.$changes.root,this._definition.indexes[r])}else this[h]&&this.$changes.delete(r);this[h]=e}},enumerable:!0,configurable:!0}}}}function y(e,t,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?e[t++]=r:(r<2048?e[t++]=192|r>>6:(r<55296||r>=57344?e[t++]=224|r>>12:(i++,r=65536+((1023&r)<<10|1023&n.charCodeAt(i)),e[t++]=240|r>>18,e[t++]=128|r>>12&63),e[t++]=128|r>>6&63),e[t++]=128|63&r)}function b(e,t){e.push(255&t)}function E(e,t){e.push(255&t)}function _(e,t){e.push(255&t),e.push(t>>8&255)}function w(e,t){e.push(255&t),e.push(t>>8&255)}function O(e,t){e.push(255&t),e.push(t>>8&255),e.push(t>>16&255),e.push(t>>24&255)}function A(e,t){var n=t>>24,r=t>>16,i=t>>8;e.push(255&t),e.push(255&i),e.push(255&r),e.push(255&n)}function S(e,t){A(e,t>>>0),A(e,Math.floor(t/4294967296))}function I(e,t){A(e,t>>>0),A(e,t/4294967296|0)}var P=new Int32Array(2),R=new Float32Array(P.buffer),k=new Float64Array(P.buffer);function T(e,t){R[0]=t,O(e,P[0])}function N(e,t){k[0]=t,O(e,P[0]),O(e,P[1])}function x(e,t){t||(t="");var n=function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t),r=0;if(n<32)e.push(160|n),r=1;else if(n<256)e.push(217),E(e,n),r=2;else if(n<65536)e.push(218),w(e,n),r=3;else{if(!(n<4294967296))throw Error("String too long");e.push(219),A(e,n),r=5}return y(e,e.length,t),r+n}function C(e,t){return isNaN(t)?C(e,0):isFinite(t)?t!==(0|t)?(e.push(203),N(e,t),9):t>=0?t<128?(E(e,t),1):t<256?(e.push(204),E(e,t),2):t<65536?(e.push(205),w(e,t),3):t<4294967296?(e.push(206),A(e,t),5):(e.push(207),I(e,t),9):t>=-32?(e.push(224|t+32),1):t>=-128?(e.push(208),b(e,t),2):t>=-32768?(e.push(209),_(e,t),3):t>=-2147483648?(e.push(210),O(e,t),5):(e.push(211),S(e,t),9):C(e,t>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var L=Object.freeze({__proto__:null,utf8Write:y,int8:b,uint8:E,int16:_,uint16:w,int32:O,uint32:A,int64:S,uint64:I,float32:function(e,t){T(e,t)},float64:function(e,t){N(e,t)},writeFloat32:T,writeFloat64:N,boolean:function(e,t){return E(e,t?1:0)},string:x,number:C});function M(e,t){return j(e,t)<<24>>24}function j(e,t){return e[t.offset++]}function D(e,t){return U(e,t)<<16>>16}function U(e,t){return e[t.offset++]|e[t.offset++]<<8}function $(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function V(e,t){return $(e,t)>>>0}function B(e,t){var n=V(e,t);return 4294967296*$(e,t)+n}function F(e,t){var n=V(e,t);return 4294967296*V(e,t)+n}var Z=new Int32Array(2),G=new Float32Array(Z.buffer),q=new Float64Array(Z.buffer);function H(e,t){return Z[0]=$(e,t),G[0]}function z(e,t){return Z[0]=$(e,t),Z[1]=$(e,t),q[0]}function W(e,t){var n,r=e[t.offset++];r<192?n=31&r:217===r?n=j(e,t):218===r?n=U(e,t):219===r&&(n=V(e,t));var i=function(e,t,n){for(var r="",i=0,o=t,a=t+n;o<a;o++){var s=e[o];128&s?192!=(224&s)?224!=(240&s)?240!=(248&s)?console.error("Invalid byte "+s.toString(16)):(i=(7&s)<<18|(63&e[++o])<<12|(63&e[++o])<<6|63&e[++o])>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i):r+=String.fromCharCode((15&s)<<12|(63&e[++o])<<6|63&e[++o]):r+=String.fromCharCode((31&s)<<6|63&e[++o]):r+=String.fromCharCode(s)}return r}(e,t.offset,n);return t.offset+=n,i}function Y(e,t){var n=e[t.offset++];return n<128?n:202===n?H(e,t):203===n?z(e,t):204===n?j(e,t):205===n?U(e,t):206===n?V(e,t):207===n?F(e,t):208===n?M(e,t):209===n?D(e,t):210===n?$(e,t):211===n?B(e,t):n>223?-1*(255-n+1):void 0}function J(e,t){return 255===e[t.offset-1]&&(e[t.offset]<128||e[t.offset]>=202&&e[t.offset]<=211)}var K=Object.freeze({__proto__:null,int8:M,uint8:j,int16:D,uint16:U,int32:$,uint32:V,float32:function(e,t){return H(e,t)},float64:function(e,t){return z(e,t)},int64:B,uint64:F,readFloat32:H,readFloat64:z,boolean:function(e,t){return j(e,t)>0},string:W,stringCheck:function(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n},number:Y,numberCheck:function(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211},arrayCheck:function(e,t){return e[t.offset]<160},switchStructureCheck:J}),X=function(){function t(e){var t=this;this.$changes=new a(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach((function(e){return t.add(e)}))}return t.prototype.onAdd=function(t,n){return void 0===n&&(n=!0),s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.ADD,t,n?this.$items:void 0)},t.prototype.onRemove=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.DELETE,t)},t.prototype.onChange=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.REPLACE,t)},t.is=function(e){return void 0!==e.collection},t.prototype.add=function(e){var t=this.$refId++;return void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,t),this.$changes.indexes[t]=t,this.$indexes.set(t,t),this.$items.set(t,e),this.$changes.change(t),t},t.prototype.at=function(e){var t=Array.from(this.$items.keys())[e];return this.$items.get(t)},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,r=this.$items.entries();(n=r.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&u.call(this,t),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){return Array.from(this.$items.values()).some((function(t){return t===e}))},t.prototype.forEach=function(e){var t=this;this.$items.forEach((function(n,r,i){return e(n,r,t)}))},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach((function(t,n){e.push("function"==typeof t.toJSON?t.toJSON():t)})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e){e.$changes?n.add(e.clone()):n.add(e)}))),n},t}(),Q=function(){function t(e){var t=this;this.$changes=new a(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,e&&e.forEach((function(e){return t.add(e)}))}return t.prototype.onAdd=function(t,n){return void 0===n&&(n=!0),s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.ADD,t,n?this.$items:void 0)},t.prototype.onRemove=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.DELETE,t)},t.prototype.onChange=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.REPLACE,t)},t.is=function(e){return void 0!==e.set},t.prototype.add=function(t){if(this.has(t))return!1;var n,r,i=this.$refId++;void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,i);var o=null!==(r=null===(n=this.$changes.indexes[i])||void 0===n?void 0:n.op)&&void 0!==r?r:e.OPERATION.ADD;return this.$changes.indexes[i]=i,this.$indexes.set(i,i),this.$items.set(i,t),this.$changes.change(i,o),i},t.prototype.entries=function(){return this.$items.entries()},t.prototype.delete=function(e){for(var t,n,r=this.$items.entries();(n=r.next())&&!n.done;)if(e===n.value[1]){t=n.value[0];break}return void 0!==t&&(this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t))},t.prototype.clear=function(t){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),t&&u.call(this,t),this.$items.clear(),this.$changes.operation({index:0,op:e.OPERATION.CLEAR}),this.$changes.touchParents()},t.prototype.has=function(e){for(var t,n=this.$items.values(),r=!1;(t=n.next())&&!t.done;)if(e===t.value){r=!0;break}return r},t.prototype.forEach=function(e){var t=this;this.$items.forEach((function(n,r,i){return e(n,r,t)}))},t.prototype.values=function(){return this.$items.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e,t){this.$indexes.set(e,t)},t.prototype.getIndex=function(e){return this.$indexes.get(e)},t.prototype.getByIndex=function(e){return this.$items.get(this.$indexes.get(e))},t.prototype.deleteByIndex=function(e){var t=this.$indexes.get(e);this.$items.delete(t),this.$indexes.delete(e)},t.prototype.toArray=function(){return Array.from(this.$items.values())},t.prototype.toJSON=function(){var e=[];return this.forEach((function(t,n){e.push("function"==typeof t.toJSON?t.toJSON():t)})),e},t.prototype.clone=function(e){var n;return e?n=Object.assign(new t,this):(n=new t,this.forEach((function(e){e.$changes?n.add(e.clone()):n.add(e)}))),n},t}(),ee=function(){function e(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return e.prototype.addRefId=function(e){this.refIds.has(e)||(this.refIds.add(e),this.containerIndexes.set(e,new Set))},e.get=function(t){return void 0===t.$filterState&&(t.$filterState=new e),t.$filterState},e}(),te=function(){function e(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return e.prototype.getNextUniqueId=function(){return this.nextUniqueId++},e.prototype.addRef=function(e,t,n){void 0===n&&(n=!0),this.refs.set(e,t),n&&(this.refCounts[e]=(this.refCounts[e]||0)+1)},e.prototype.removeRef=function(e){this.refCounts[e]=this.refCounts[e]-1,this.deletedRefs.add(e)},e.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},e.prototype.garbageCollectDeletedRefs=function(){var e=this;this.deletedRefs.forEach((function(t){if(!(e.refCounts[t]>0)){var n=e.refs.get(t);if(n instanceof ie)for(var r in n._definition.schema)"string"!=typeof n._definition.schema[r]&&n[r]&&n[r].$changes&&e.removeRef(n[r].$changes.refId);else{var i=n.$changes.parent._definition;"function"==typeof Object.values(i.schema[i.fieldsByIndex[n.$changes.parentIndex]])[0]&&Array.from(n.values()).forEach((function(t){return e.removeRef(t.$changes.refId)}))}e.refs.delete(t),delete e.refCounts[t]}})),this.deletedRefs.clear()},e}(),ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(Error);function re(e,t,n,r){if(!(e instanceof t))throw new ne("a '".concat(t.name,"' was expected, but '").concat(e.constructor.name,"' was provided in ").concat(n.constructor.name,"#").concat(r))}var ie=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new a(this,void 0,new te),enumerable:!1,writable:!0},$callbacks:{value:void 0,enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),e[0]&&this.assign(e[0])}return t.onError=function(e){console.error(e)},t.is=function(e){return e._definition&&void 0!==e._definition.schema},t.prototype.onChange=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.REPLACE,t)},t.prototype.onRemove=function(t){return s(this.$callbacks||(this.$callbacks=[]),e.OPERATION.DELETE,t)},t.prototype.assign=function(e){return Object.assign(this,e),this},Object.defineProperty(t.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),t.prototype.setDirty=function(e,t){this.$changes.change(e,t)},t.prototype.listen=function(e,t,n){var r=this;return void 0===n&&(n=!0),this.$callbacks||(this.$callbacks={}),this.$callbacks[e]||(this.$callbacks[e]=[]),this.$callbacks[e].push(t),n&&void 0!==this[e]&&t(this[e],void 0),function(){return l(r.$callbacks[e],r.$callbacks[e].indexOf(t))}},t.prototype.decode=function(n,r,i){void 0===r&&(r={offset:0}),void 0===i&&(i=this);var o,a=[],s=this.$changes.root,u=n.length,l=0;for(s.refs.set(l,this);r.offset<u;){var c,h=n[r.offset++];if(255!=h){var g=i.$changes,v=void 0!==i._definition,m=v?h>>6<<6:h;if(m!==e.OPERATION.CLEAR){var y=v?h%(m||255):Y(n,r),b=v?i._definition.fieldsByIndex[y]:"",E=g.getType(y),_=void 0,w=void 0,O=void 0;if(v?w=i["_".concat(b)]:(w=i.getByIndex(y),(m&e.OPERATION.ADD)===e.OPERATION.ADD?(O=i instanceof d?W(n,r):y,i.setIndex(y,O)):O=i.getIndex(y)),(m&e.OPERATION.DELETE)===e.OPERATION.DELETE&&(m!==e.OPERATION.DELETE_AND_ADD&&i.deleteByIndex(y),w&&w.$changes&&s.removeRef(w.$changes.refId),_=null),void 0!==b){if(m===e.OPERATION.DELETE);else if(t.is(E)){var A=Y(n,r);if(_=s.refs.get(A),m!==e.OPERATION.REPLACE){var S=this.getSchemaType(n,r,E);!_&&((_=this.createTypeInstance(S)).$changes.refId=A,w&&(_.$callbacks=w.$callbacks,w.$changes.refId&&A!==w.$changes.refId&&s.removeRef(w.$changes.refId))),s.addRef(A,_,_!==w)}}else if("string"==typeof E)c=r,_=K[E](n,c);else{var I=p[Object.keys(E)[0]],P=Y(n,r),R=s.refs.has(P)?w||s.refs.get(P):new I.constructor;if((_=R.clone(!0)).$changes.refId=P,w&&(_.$callbacks=w.$callbacks,w.$changes.refId&&P!==w.$changes.refId)){s.removeRef(w.$changes.refId);for(var k=w.entries(),T=void 0;(T=k.next())&&!T.done;){var N=(o=T.value)[0],x=o[1];a.push({refId:P,op:e.OPERATION.DELETE,field:N,value:void 0,previousValue:x})}}s.addRef(P,_,R!==w)}if(null!=_)if(_.$changes&&_.$changes.setParent(g.ref,g.root,y),i instanceof t)i[b]=_;else if(i instanceof d){N=O;i.$items.set(N,_),i.$changes.allChanges.add(y)}else if(i instanceof f)i.setAt(y,_);else if(i instanceof X){var C=i.add(_);i.setIndex(y,C)}else if(i instanceof Q){!1!==(C=i.add(_))&&i.setIndex(y,C)}w!==_&&a.push({refId:l,op:m,field:b,dynamicIndex:O,value:_,previousValue:w})}else{console.warn("@colyseus/schema: definition mismatch");for(var L={offset:r.offset};r.offset<u&&(!J(n,r)||(L.offset=r.offset+1,!s.refs.has(Y(n,L))));)r.offset++}}else i.clear(a)}else{l=Y(n,r);var M=s.refs.get(l);if(!M)throw Error('"refId" not found: '.concat(l));i=M}}return this._triggerChanges(a),s.garbageCollectDeletedRefs(),a},t.prototype.encode=function(n,r,i){void 0===n&&(n=!1),void 0===r&&(r=[]),void 0===i&&(i=!1);for(var o=this.$changes,a=new WeakSet,s=[o],u=1,l=0;l<u;l++){var c=s[l],f=c.ref,h=f instanceof t;c.ensureRefId(),a.add(c),c!==o&&(c.changed||n)&&(E(r,255),C(r,c.refId));for(var g=n?Array.from(c.allChanges):Array.from(c.changes.values()),v=0,m=g.length;v<m;v++){var y=n?{op:e.OPERATION.ADD,index:g[v]}:g[v],b=y.index,_=h?f._definition.fieldsByIndex&&f._definition.fieldsByIndex[b]:b,w=r.length;if(y.op!==e.OPERATION.TOUCH)if(h)E(r,b|y.op);else{if(E(r,y.op),y.op===e.OPERATION.CLEAR)continue;C(r,b)}if(!h&&(y.op&e.OPERATION.ADD)==e.OPERATION.ADD&&f instanceof d&&x(r,c.ref.$indexes.get(b)),y.op!==e.OPERATION.DELETE){var O=c.getType(b),A=c.getValue(b);if(A&&A.$changes&&!a.has(A.$changes)&&(s.push(A.$changes),A.$changes.ensureRefId(),u++),y.op!==e.OPERATION.TOUCH){if(t.is(O))re(A,O,f,_),C(r,A.$changes.refId),(y.op&e.OPERATION.ADD)===e.OPERATION.ADD&&this.tryEncodeTypeId(r,O,A.constructor);else if("string"==typeof O)!function(e,t,n,r,i){!function(e,t,n,r){var i,o=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":i="number",isNaN(e)&&console.log('trying to encode "NaN" in '.concat(n.constructor.name,"#").concat(r));break;case"string":i="string",o=!0;break;case"boolean":return}if(typeof e!==i&&(!o||o&&null!==e)){var a="'".concat(JSON.stringify(e),"'").concat(e&&e.constructor&&" (".concat(e.constructor.name,")")||"");throw new ne("a '".concat(i,"' was expected, but ").concat(a," was provided in ").concat(n.constructor.name,"#").concat(r))}}(n,e,r,i);var o=L[e];if(!o)throw new ne("a '".concat(e,"' was expected, but ").concat(n," was provided in ").concat(r.constructor.name,"#").concat(i));o(t,n)}(O,r,A,f,_);else{var S=p[Object.keys(O)[0]];re(f["_".concat(_)],S.constructor,f,_),C(r,A.$changes.refId)}i&&c.cache(b,r.slice(w))}}}n||i||c.discard()}return r},t.prototype.encodeAll=function(e){return this.encode(!0,[],e)},t.prototype.applyFilters=function(n,r){void 0===r&&(r=!1);for(var i,o,a=this,s=new Set,u=ee.get(n),l=[this.$changes],c=1,f=[],p=0;p<c;p++)!function(p){var h=l[p];if(!s.has(h.refId)){var g=h.ref,v=g instanceof t;E(f,255),C(f,h.refId);var m=u.refIds.has(h),y=r||!m;u.addRefId(h);var b=u.containerIndexes.get(h),_=y?Array.from(h.allChanges):Array.from(h.changes.values());!r&&v&&g._definition.indexesWithFilters&&g._definition.indexesWithFilters.forEach((function(t){!b.has(t)&&h.allChanges.has(t)&&(y?_.push(t):_.push({op:e.OPERATION.ADD,index:t}))}));for(var w=0,O=_.length;w<O;w++){var A=y?{op:e.OPERATION.ADD,index:_[w]}:_[w];if(A.op!==e.OPERATION.CLEAR){var S=A.index;if(A.op!==e.OPERATION.DELETE){var I=h.getValue(S),P=h.getType(S);if(v){if((R=g._definition.filters&&g._definition.filters[S])&&!R.call(g,n,I,a)){I&&I.$changes&&s.add(I.$changes.refId);continue}}else{var R,k=h.parent;if((R=h.getChildrenFilter())&&!R.call(k,n,g.$indexes.get(S),I,a)){I&&I.$changes&&s.add(I.$changes.refId);continue}}if(I.$changes&&(l.push(I.$changes),c++),A.op!==e.OPERATION.TOUCH)if(A.op===e.OPERATION.ADD||v)f.push.apply(f,null!==(i=h.caches[S])&&void 0!==i?i:[]),b.add(S);else if(b.has(S))f.push.apply(f,null!==(o=h.caches[S])&&void 0!==o?o:[]);else{if(b.add(S),E(f,e.OPERATION.ADD),C(f,S),g instanceof d){var T=h.ref.$indexes.get(S);x(f,T)}I.$changes?C(f,I.$changes.refId):L[P](f,I)}else if(I.$changes&&!v){if(E(f,e.OPERATION.ADD),C(f,S),g instanceof d){T=h.ref.$indexes.get(S);x(f,T)}C(f,I.$changes.refId)}}else v?E(f,A.op|S):(E(f,A.op),C(f,S))}else E(f,A.op)}}}(p);return f},t.prototype.clone=function(){var e,t=new this.constructor,n=this._definition.schema;for(var r in n)"object"==typeof this[r]&&"function"==typeof(null===(e=this[r])||void 0===e?void 0:e.clone)?t[r]=this[r].clone():t[r]=this[r];return t},t.prototype.toJSON=function(){var e=this._definition.schema,t=this._definition.deprecated,n={};for(var r in e)t[r]||null===this[r]||void 0===this[r]||(n[r]="function"==typeof this[r].toJSON?this[r].toJSON():this["_".concat(r)]);return n},t.prototype.discardAllChanges=function(){this.$changes.discardAll()},t.prototype.getByIndex=function(e){return this[this._definition.fieldsByIndex[e]]},t.prototype.deleteByIndex=function(e){this[this._definition.fieldsByIndex[e]]=void 0},t.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(E(e,213),C(e,n._typeid))},t.prototype.getSchemaType=function(e,t,n){var r;return 213===e[t.offset]&&(t.offset++,r=this.constructor._context.get(Y(e,t))),r||n},t.prototype.createTypeInstance=function(e){var t=new e;return t.$changes.root=this.$changes.root,t},t.prototype._triggerChanges=function(n){for(var r,i,o,a,s,u,l,c,f,d=new Set,p=this.$changes.root.refs,h=0;h<n.length;h++)!function(h){var g=n[h],v=g.refId,m=p.get(v),y=m.$callbacks;if((g.op&e.OPERATION.DELETE)===e.OPERATION.DELETE&&g.previousValue instanceof t&&(null===(i=null===(r=g.previousValue.$callbacks)||void 0===r?void 0:r[e.OPERATION.DELETE])||void 0===i||i.forEach((function(e){return e()}))),y){if(m instanceof t){if(!d.has(v))try{null===(o=null==y?void 0:y[e.OPERATION.REPLACE])||void 0===o||o.forEach((function(e){return e(n)}))}catch(e){t.onError(e)}try{y.hasOwnProperty(g.field)&&(null===(a=y[g.field])||void 0===a||a.forEach((function(e){return e(g.value,g.previousValue)})))}catch(e){t.onError(e)}}else g.op===e.OPERATION.ADD&&void 0===g.previousValue?null===(s=y[e.OPERATION.ADD])||void 0===s||s.forEach((function(e){var t;return e(g.value,null!==(t=g.dynamicIndex)&&void 0!==t?t:g.field)})):g.op===e.OPERATION.DELETE?void 0!==g.previousValue&&(null===(u=y[e.OPERATION.DELETE])||void 0===u||u.forEach((function(e){var t;return e(g.previousValue,null!==(t=g.dynamicIndex)&&void 0!==t?t:g.field)}))):g.op===e.OPERATION.DELETE_AND_ADD&&(void 0!==g.previousValue&&(null===(l=y[e.OPERATION.DELETE])||void 0===l||l.forEach((function(e){var t;return e(g.previousValue,null!==(t=g.dynamicIndex)&&void 0!==t?t:g.field)}))),null===(c=y[e.OPERATION.ADD])||void 0===c||c.forEach((function(e){var t;return e(g.value,null!==(t=g.dynamicIndex)&&void 0!==t?t:g.field)}))),g.value!==g.previousValue&&(null===(f=y[e.OPERATION.REPLACE])||void 0===f||f.forEach((function(e){var t;return e(g.value,null!==(t=g.dynamicIndex)&&void 0!==t?t:g.field)})));d.add(v)}}(h)},t._definition=h.create(),t}(),oe={context:new g},ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([m("string",oe)],t.prototype,"name",void 0),i([m("string",oe)],t.prototype,"type",void 0),i([m("number",oe)],t.prototype,"referencedType",void 0),t}(ie),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new f,t}return r(t,e),i([m("number",oe)],t.prototype,"id",void 0),i([m([ae],oe)],t.prototype,"fields",void 0),t}(ie),ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new f,t}return r(t,e),t.encode=function(e){var n=e.constructor,r=new t;r.rootType=n._typeid;var i=n._context.types;for(var o in i){var a=new se;a.id=Number(o),function(e,t){for(var n in t){var i=new ae;i.name=n;var o=void 0;if("string"==typeof t[n])o=t[n];else{var a=t[n],s=void 0;ie.is(a)?(o="ref",s=t[n]):"string"==typeof a[o=Object.keys(a)[0]]?o+=":"+a[o]:s=a[o],i.referencedType=s?s._typeid:-1}i.type=o,e.fields.push(i)}r.types.push(e)}(a,i[o]._definition.schema)}return r.encodeAll()},t.decode=function(e,n){var i=new g,o=new t;o.decode(e,n);var a=o.types.reduce((function(e,t){var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(ie),o=t.id;return e[o]=n,i.add(n,o),e}),{});o.types.forEach((function(e){var t=a[e.id];e.fields.forEach((function(e){var n;if(void 0!==e.referencedType){var r=e.type,o=a[e.referencedType];if(!o){var s=e.type.split(":");r=s[0],o=s[1]}"ref"===r?m(o,{context:i})(t.prototype,e.name):m(((n={})[r]=o,n),{context:i})(t.prototype,e.name)}else m(e.type,{context:i})(t.prototype,e.name)}))}));var s=a[o.rootType],u=new s;for(var l in s._definition.schema){var c=s._definition.schema[l];"string"!=typeof c&&(u[l]="function"==typeof c?new c:new(p[Object.keys(c)[0]].constructor))}return u},i([m([se],oe)],t.prototype,"types",void 0),i([m("number",oe)],t.prototype,"rootType",void 0),t}(ie);p.map={constructor:d},p.array={constructor:f},p.set={constructor:Q},p.collection={constructor:X},e.ArraySchema=f,e.CollectionSchema=X,e.Context=g,e.MapSchema=d,e.Reflection=ue,e.ReflectionField=ae,e.ReflectionType=se,e.Schema=ie,e.SchemaDefinition=h,e.SetSchema=Q,e.decode=K,e.defineTypes=function(e,t,n){for(var r in void 0===n&&(n={}),n.context||(n.context=e._context||n.context||v),t)m(t[r],n)(e.prototype,r);return e},e.deprecated=function(e){return void 0===e&&(e=!0),function(t,n){var r=t.constructor._definition;r.deprecated[n]=!0,e&&(r.descriptors[n]={get:function(){throw Error("".concat(n," is deprecated."))},set:function(e){},enumerable:!1,configurable:!0})}},e.dumpChanges=function(e){for(var t=[e.$changes],n={},r=0;r<1;r++)!function(e){var r=t[e];r.changes.forEach((function(e){var t=r.ref,i=e.index;n[t._definition?t._definition.fieldsByIndex[i]:t.$indexes.get(i)]=r.getValue(i)}))}(r);return n},e.encode=L,e.filter=function(e){return function(t,n){var r=t.constructor;r._definition.addFilter(n,e)&&(r._context.useFilters=!0)}},e.filterChildren=function(e){return function(t,n){var r=t.constructor;r._definition.addChildrenFilter(n,e)&&(r._context.useFilters=!0)}},e.hasFilter=function(e){return e._context&&e._context.useFilters},e.registerType=function(e,t){p[e]=t},e.type=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},7406:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[Z]}function o(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===G}(e)||Array.isArray(e)||!!e[F]||!!(null===(t=e.constructor)||void 0===t?void 0:t[F])||f(e)||d(e))}function a(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:q)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[Z];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f(e)?2:d(e)?3:0}function u(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){return U&&e instanceof Map}function d(e){return $&&e instanceof Set}function p(e){return e.o||e.t}function h(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H(e);delete t[Z];for(var n=q(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),m(e)||i(e)||!o(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&a(e,(function(e,t){return g(t,!0)}),!0)),e}function v(){r(2)}function m(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=z[e];return t||r(18,e),t}function b(e,t){t&&(y("Patches"),e.u=[],e.s=[],e.v=t)}function E(e){_(e),e.p.forEach(O),e.p=null}function _(e){e===j&&(j=e.l)}function w(e){return j={p:[],l:j,h:e,m:!0,_:0}}function O(e){var t=e[Z];0===t.i||1===t.i?t.j():t.g=!0}function A(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||y("ES5").S(t,e,i),i?(n[Z].P&&(E(t),r(4)),o(e)&&(e=S(t,e),t.l||P(t,e)),t.u&&y("Patches").M(n[Z].t,e,t.u,t.s)):e=S(t,n,[]),E(t),t.u&&t.v(t.u,t.s),e!==B?e:void 0}function S(e,t,n){if(m(t))return t;var r=t[Z];if(!r)return a(t,(function(i,o){return I(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return P(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=h(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),a(o,(function(t,o){return I(e,r,i,t,o,n,s)})),P(e,i,!1),n&&e.u&&y("Patches").N(r,n,e.u,e.s)}return r.o}function I(e,t,n,r,a,s,c){if(i(a)){var f=S(e,a,s&&t&&3!==t.i&&!u(t.R,r)?s.concat(r):void 0);if(l(n,r,f),!i(f))return;e.m=!1}else c&&n.add(a);if(o(a)&&!m(a)){if(!e.h.D&&e._<1)return;S(e,a),t&&t.A.l||P(e,a)}}function P(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&g(t,n)}function R(e,t){var n=e[Z];return(n?p(n):e)[t]}function k(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function T(e){e.P||(e.P=!0,e.l&&T(e.l))}function N(e){e.o||(e.o=h(e.t))}function x(e,t,n){var r,i,o,a,s,u,l,c=f(t)?y("MapSet").F(t,n):d(t)?y("MapSet").T(t,n):e.O?(o=i={i:(r=Array.isArray(t))?1:0,A:n?n.A:j,P:!1,I:!1,R:{},l:n,t:t,k:null,o:null,j:null,C:!1},a=W,r&&(o=[i],a=Y),u=(s=Proxy.revocable(o,a)).revoke,l=s.proxy,i.k=l,i.j=u,l):y("ES5").J(t,n);return(n?n.A:j).p.push(c),c}function C(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return h(e)}n.d(t,{xC:function(){return Ae},hg:function(){return xe},oM:function(){return Pe}});var L,M,j,D="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),U="undefined"!=typeof Map,$="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,B=D?Symbol.for("immer-nothing"):((M={})["immer-nothing"]=!0,M),F=D?Symbol.for("immer-draftable"):"__$immer_draftable",Z=D?Symbol.for("immer-state"):"__$immer_state",G=""+Object.prototype.constructor,q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(e){var t={};return q(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},z={},W={get:function(e,t){if(t===Z)return e;var n,r,i=p(e);if(!u(i,t))return(r=k(i,t))?"value"in r?r.value:null===(n=r.get)||void 0===n?void 0:n.call(e.k):void 0;var a=i[t];return e.I||!o(a)?a:a===R(e.t,t)?(N(e),e.o[t]=x(e.A.h,a,e)):a},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=k(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=R(p(e),t),o=null==i?void 0:i[Z];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(c(n,i)&&(void 0!==n||u(e.t,t)))return!0;N(e),T(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==R(e.t,t)||t in e.t?(e.R[t]=!1,N(e),T(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Y={};a(W,(function(e,t){Y[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Y.deleteProperty=function(e,t){return Y.set.call(this,e,t,void 0)},Y.set=function(e,t,n){return W.set.call(this,e[0],t,n,e[0])};var J=new(function(){function e(e){var t=this;this.O=V,this.D=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var a,s=n;return n=e,function(e){var r=this;void 0===e&&(e=s);for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return t.produce(e,(function(e){var t;return(t=n).call.apply(t,[r,e].concat(o))}))}}if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var u=w(t),l=x(t,e,void 0),c=!0;try{a=n(l),c=!1}finally{c?E(u):_(u)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return b(u,i),A(e,u)}),(function(e){throw E(u),e})):(b(u,i),A(a,u))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===B&&(a=void 0),t.D&&g(a,!0),i){var f=[],d=[];y("Patches").M(e,a,f,d),i(f,d)}return a}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(i(t=e)||r(22,t),e=function e(t){if(!o(t))return t;var n,r=t[Z],i=s(t);if(r){if(!r.P&&(r.i<4||!y("ES5").K(r)))return r.t;r.I=!0,n=C(t,i),r.I=!1}else n=C(t,i);return a(n,(function(t,i){var o;r&&(2===s(o=r.t)?o.get(t):o[t])===i||l(n,t,e(i))})),3===i?new Set(n):n}(t));var t,n=w(this),u=x(this,e,void 0);return u[Z].C=!0,_(n),u},t.finishDraft=function(e,t){var n=(e&&e[Z]).A;return b(n,t),A(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!V&&r(20),this.O=e},t.applyPatches=function(e,t){for(n=t.length-1;n>=0;n--){var n,r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=y("Patches").$;return i(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}()),K=J.produce;J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseProxies.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J);var X=n(4942);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,X.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ne="function"==typeof Symbol&&Symbol.observable||"@@observable",re=function(){return Math.random().toString(36).substring(7).split("").join(".")},ie={INIT:"@@redux/INIT"+re(),REPLACE:"@@redux/REPLACE"+re(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+re()}};function oe(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function ae(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw Error(te(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=oe.apply(void 0,o)(n.dispatch),ee(ee({},n),{},{dispatch:r})}}}function se(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var ue=se();ue.withExtraArgument=se,n(83454);var le=(L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ce=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},fe=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,me=function(e,t,n){return t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ye=function(e,t){for(var n in t||(t={}))ge.call(t,n)&&me(e,n,t[n]);if(he)for(var r=0,i=he(t);r<i.length;r++){n=i[r];ve.call(t,n)&&me(e,n,t[n])}return e},be=function(e,t){return de(e,pe(t))},Ee="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?oe:oe.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var _e=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return le(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ce([void 0],e[0].concat(this)))):new(t.bind.apply(t,ce([void 0],e.concat(this))))},t}(Array),we=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return le(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ce([void 0],e[0].concat(this)))):new(t.bind.apply(t,ce([void 0],e.concat(this))))},t}(Array);function Oe(e){return o(e)?K(e,(function(){})):e}function Ae(e){var t,n=function(e){var t,n,r,i;return void 0===(t=e)&&(t={}),r=void 0===(n=t.thunk)||n,t.immutableCheck,t.serializableCheck,i=new _e,r&&("boolean"==typeof r?i.push(ue):i.push(ue.withExtraArgument(r.extraArgument))),i},r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,u=r.devTools,l=void 0===u||u,c=r.preloadedState,f=void 0===c?void 0:c,d=r.enhancers,p=void 0===d?void 0:d;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(o))throw Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=function(e){for(var t,n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i];"function"==typeof e[o]&&(r[o]=e[o])}var a=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:ie.INIT}))throw Error(te(12));if(void 0===n(void 0,{type:ie.PROBE_UNKNOWN_ACTION()}))throw Error(te(13))}))}(r)}catch(e){t=e}return function(e,n){if(void 0===e&&(e={}),t)throw t;for(var i=!1,o={},s=0;s<a.length;s++){var u=a[s],l=r[u],c=e[u],f=l(c,n);if(void 0===f)throw n&&n.type,Error(te(14));o[u]=f,i=i||f!==c}return(i=i||a.length!==Object.keys(e).length)?o:e}}(o)}var h=s;"function"==typeof h&&(h=h(n));var g=ae.apply(void 0,h),v=oe;l&&(v=Ee(ye({trace:!1},"object"==typeof l&&l)));var m=new we(g),y=m;return Array.isArray(p)?y=ce([g],p):"function"==typeof p&&(y=p(m)),function e(t,n,r){if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(te(0));if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw Error(te(1));return r(e)(t,n)}if("function"!=typeof t)throw Error(te(2));var i,o=t,a=n,s=[],u=s,l=!1;function c(){u===s&&(u=s.slice())}function f(){if(l)throw Error(te(3));return a}function d(e){if("function"!=typeof e)throw Error(te(4));if(l)throw Error(te(5));var t=!0;return c(),u.push(e),function(){if(t){if(l)throw Error(te(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),s=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(te(7));if(void 0===e.type)throw Error(te(8));if(l)throw Error(te(9));try{l=!0,a=o(a,e)}finally{l=!1}for(var t=s=u,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:ie.INIT}),(i={dispatch:p,subscribe:d,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw Error(te(10));o=e,p({type:ie.REPLACE})}})[ne]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(te(11));function t(){e.next&&e.next(f())}return t(),{unsubscribe:d(t)}}})[ne]=function(){return this},e},i}(t,f,v.apply(void 0,y))}function Se(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw Error("prepareAction did not return an object");return ye(ye({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Ie(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Pe(e){var t,n=e.name;if(!n)throw Error("`name` is a required option for createSlice");var r="function"==typeof e.initialState?e.initialState:Oe(e.initialState),a=e.reducers||{},s=Object.keys(a),u={},l={},c={};function f(){var t="function"==typeof e.extraReducers?Ie(e.extraReducers):[e.extraReducers],n=t[0],a=t[1],s=void 0===a?[]:a,u=t[2],c=void 0===u?void 0:u,f=ye(ye({},void 0===n?{}:n),l);return function(e,t,n,r){void 0===n&&(n=[]);var a,s=Ie(t),u=s[0],l=s[1],c=s[2];if("function"==typeof e)a=function(){return Oe(e())};else{var f=Oe(e);a=function(){return f}}function d(e,t){void 0===e&&(e=a());var n=ce([u[t.type]],l.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(i(e))return void 0===(r=n(e,t))?e:r;if(o(e))return K(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return d.getInitialState=a,d}(r,(function(e){for(var t in f)e.addCase(t,f[t]);for(var n=0;n<s.length;n++){var r=s[n];e.addMatcher(r.matcher,r.reducer)}c&&e.addDefaultCase(c)}))}return s.forEach((function(e){var t,r,i=a[e],o=n+"/"+e;"reducer"in i?(t=i.reducer,r=i.prepare):t=i,u[e]=t,l[o]=t,c[e]=r?Se(o,r):Se(o)})),{name:n,reducer:function(e,n){return t||(t=f()),t(e,n)},actions:c,caseReducers:u,getInitialState:function(){return t||(t=f()),t.getInitialState()}}}var Re=["name","message","stack","code"],ke=function(e,t){this.payload=e,this.meta=t},Te=function(e,t){this.payload=e,this.meta=t},Ne=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0;n<Re.length;n++){var r=Re[n];"string"==typeof e[r]&&(t[r]=e[r])}return t}return{message:String(e)}},xe=function(){function e(e,t,n){var r=Se(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:be(ye({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=Se(e+"/pending",(function(e,t,n){return{payload:void 0,meta:be(ye({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),o=Se(e+"/rejected",(function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||Ne)(e||"Rejected"),meta:be(ye({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),a="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,u,l){var c,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),d=new a;function p(e){c=e,d.abort()}var h=function(){var a,h;return a=this,h=function(){var a,h,g,v,m,y;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(b){switch(b.label){case 0:var E;return b.trys.push([0,4,,5]),null===(E=v=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:u,extra:l}))||"object"!=typeof E||"function"!=typeof E.then?[3,2]:[4,v];case 1:v=b.sent(),b.label=2;case 2:if(!1===v||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return m=new Promise((function(e,t){return d.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(i(f,e,null==(h=null==n?void 0:n.getPendingMeta)?void 0:h.call(n,{requestId:f,arg:e},{getState:u,extra:l}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:u,extra:l,requestId:f,signal:d.signal,abort:p,rejectWithValue:function(e,t){return new ke(e,t)},fulfillWithValue:function(e,t){return new Te(e,t)}})).then((function(t){if(t instanceof ke)throw t;return t instanceof Te?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return g=b.sent(),[3,5];case 4:return g=(y=b.sent())instanceof ke?o(null,f,e,y.payload,y.meta):o(y,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(g)&&g.meta.condition||s(g),[2,g]}}))},new Promise((function(e,t){var n=function(e){try{i(h.next(e))}catch(e){t(e)}},r=function(e){try{i(h.throw(e))}catch(e){t(e)}},i=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(n,r)};i((h=h.apply(a,null)).next())}))}();return Object.assign(h,{abort:p,requestId:f,arg:e,unwrap:function(){return h.then(Ce)}})}}),{pending:i,rejected:o,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function Ce(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Le="listenerMiddleware";Se(Le+"/add"),Se(Le+"/removeAll"),Se(Le+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis),"undefined"!=typeof window&&window.requestAnimationFrame&&window.requestAnimationFrame,function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Z];return W.get(t,e)},set:function(t){var n=this[Z];W.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Z];if(!i.P)switch(i.i){case 5:r(i)&&T(i);break;case 4:n(i)&&T(i)}}}function n(e){for(var t=e.t,n=e.k,r=q(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==Z){var a=t[o];if(void 0===a&&!u(t,o))return!0;var s=n[o],l=s&&s[Z];if(l?l.t!==a:!c(s,a))return!0}}var f=!!t[Z];return r.length!==q(t).length+(f?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};z.ES5||(z.ES5={J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=H(n);delete o[Z];for(var a=q(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:j,P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Z,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[Z].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Z];if(n){var i=n.t,o=n.k,s=n.R,l=n.i;if(4===l)a(o,(function(t){t!==Z&&(void 0!==i[t]||u(i,t)?s[t]||e(o[t]):(s[t]=!0,T(n)))})),a(i,(function(e){void 0!==o[e]||u(o,e)||(s[e]=!1,T(n))}));else if(5===l){if(r(n)&&(T(n),s.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)s[c]=!1;else for(var f=i.length;f<o.length;f++)s[f]=!0;for(var d=Math.min(o.length,i.length),p=0;p<d;p++)o.hasOwnProperty(p)||(s[p]=!0),void 0===s[p]&&e(o[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}()},84063:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=t.Platform=void 0;let u=a(n(76629)),l=n(47723),c="colyseus-auth-token";(r=t.Platform||(t.Platform={})).ios="ios",r.android="android",t.Auth=class{constructor(e){this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=e.replace("ws","http"),(0,l.getItem)(c,(e=>this.token=e))}get hasToken(){return!!this.token}login(e={}){return s(this,void 0,void 0,(function*(){let t=Object.assign({},e);this.hasToken&&(t.token=this.token);let n=yield this.request("post","/auth",t);for(let e in this.token=n.token,(0,l.setItem)(c,this.token),n)this.hasOwnProperty(e)&&(this[e]=n[e]);return this.registerPingService(),this}))}save(){return s(this,void 0,void 0,(function*(){return yield this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone}),this}))}getFriends(){return s(this,void 0,void 0,(function*(){return yield this.request("get","/friends/all")}))}getOnlineFriends(){return s(this,void 0,void 0,(function*(){return yield this.request("get","/friends/online")}))}getFriendRequests(){return s(this,void 0,void 0,(function*(){return yield this.request("get","/friends/requests")}))}sendFriendRequest(e){return s(this,void 0,void 0,(function*(){return yield this.request("post","/friends/requests",{userId:e})}))}acceptFriendRequest(e){return s(this,void 0,void 0,(function*(){return yield this.request("put","/friends/requests",{userId:e})}))}declineFriendRequest(e){return s(this,void 0,void 0,(function*(){return yield this.request("del","/friends/requests",{userId:e})}))}blockUser(e){return s(this,void 0,void 0,(function*(){return yield this.request("post","/friends/block",{userId:e})}))}unblockUser(e){return s(this,void 0,void 0,(function*(){return yield this.request("put","/friends/block",{userId:e})}))}request(e,t,n={},r,i={}){return s(this,void 0,void 0,(function*(){i.Accept="application/json",this.hasToken&&(i.Authorization="Bearer "+this.token);let o=[];for(let e in n)o.push(`${e}=${n[e]}`);let a=o.length>0?`?${o.join("&")}`:"",s={headers:i};return r&&(s.body=r),(yield u[e](`${this.endpoint}${t}${a}`,s)).data}))}logout(){this.token=void 0,(0,l.removeItem)(c),this.unregisterPingService()}registerPingService(e=15e3){this.unregisterPingService(),this.keepOnlineInterval=setInterval((()=>this.request("get","/auth")),e)}unregisterPingService(){clearInterval(this.keepOnlineInterval)}}},4705:function(e,t,n){"use strict";var r,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.MatchMakeError=void 0;let o=n(76629),a=n(65199),s=n(68270),u=class e extends Error{constructor(t,n){super(t),this.code=n,Object.setPrototypeOf(this,e.prototype)}};t.MatchMakeError=u;let l="undefined"!=typeof window&&void 0!==(null===(r=null==window?void 0:window.location)||void 0===r?void 0:r.hostname)?`${window.location.protocol.replace("http","ws")}//${window.location.hostname}${window.location.port&&`:${window.location.port}`}`:"ws://127.0.0.1:2567";t.Client=class{constructor(e=l){if("string"==typeof e){let t=new URL(e),n="https:"===t.protocol||"wss:"===t.protocol,r=Number(t.port||(n?443:80));this.settings={hostname:t.hostname,pathname:"/"!==t.pathname?t.pathname:"",port:r,secure:n}}else void 0===e.port&&(e.port=e.secure?443:80),void 0===e.pathname&&(e.pathname=""),this.settings=e}joinOrCreate(e,t={},n){return i(this,void 0,void 0,(function*(){return yield this.createMatchMakeRequest("joinOrCreate",e,t,n)}))}create(e,t={},n){return i(this,void 0,void 0,(function*(){return yield this.createMatchMakeRequest("create",e,t,n)}))}join(e,t={},n){return i(this,void 0,void 0,(function*(){return yield this.createMatchMakeRequest("join",e,t,n)}))}joinById(e,t={},n){return i(this,void 0,void 0,(function*(){return yield this.createMatchMakeRequest("joinById",e,t,n)}))}reconnect(e,t){return i(this,void 0,void 0,(function*(){if("string"==typeof e&&"string"==typeof t)throw Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");let[n,r]=e.split(":");return yield this.createMatchMakeRequest("reconnect",n,{reconnectionToken:r},t)}))}getAvailableRooms(e=""){return i(this,void 0,void 0,(function*(){return(yield(0,o.get)(this.getHttpEndpoint(`${e}`),{headers:{Accept:"application/json"}})).data}))}consumeSeatReservation(e,t,n){return i(this,void 0,void 0,(function*(){let r=this.createRoom(e.room.name,t);r.roomId=e.room.roomId,r.sessionId=e.sessionId;let o={sessionId:r.sessionId};e.reconnectionToken&&(o.reconnectionToken=e.reconnectionToken);let s=n||r;return r.connect(this.buildEndpoint(e.room,o),e.devMode&&(()=>i(this,void 0,void 0,(function*(){console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} Re-establishing connection with room id '${r.roomId}'...`);let n=0,o=()=>i(this,void 0,void 0,(function*(){n++;try{yield this.consumeSeatReservation(e,t,s),console.info(`[Colyseus devMode]: ${String.fromCodePoint(9989)} Successfully re-established connection with room '${r.roomId}'`)}catch(e){n<8?(console.info(`[Colyseus devMode]: ${String.fromCodePoint(128260)} retrying... (${n} out of 8)`),setTimeout(o,2e3)):console.info(`[Colyseus devMode]: ${String.fromCodePoint(10060)} Failed to reconnect. Is your server running? Please check server logs.`)}}));setTimeout(o,2e3)}))),s),new Promise(((e,t)=>{let n=(e,n)=>t(new a.ServerError(e,n));s.onError.once(n),s.onJoin.once((()=>{s.onError.remove(n),e(s)}))}))}))}createMatchMakeRequest(e,t,n={},r,a){return i(this,void 0,void 0,(function*(){let i=(yield(0,o.post)(this.getHttpEndpoint(`${e}/${t}`),{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).data;if(i.error)throw new u(i.error,i.code);return"reconnect"===e&&(i.reconnectionToken=n.reconnectionToken),yield this.consumeSeatReservation(i,r,a)}))}createRoom(e,t){return new s.Room(e,t)}buildEndpoint(e,t={}){let n=[];for(let e in t)t.hasOwnProperty(e)&&n.push(`${e}=${t[e]}`);let r=this.settings.secure?"wss://":"ws://";return e.publicAddress?r+=`${e.publicAddress}`:r+=`${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}`,`${r}/${e.processId}/${e.roomId}?${n.join("&")}`}getHttpEndpoint(e=""){return`${this.settings.secure?"https":"http"}://${this.settings.hostname}${this.getEndpointPort()}${this.settings.pathname}/matchmake/${e}`}getEndpointPort(){return 80!==this.settings.port&&443!==this.settings.port?`:${this.settings.port}`:""}}},22826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;let r=n(14956);t.Connection=class{constructor(){this.events={},this.transport=new r.WebSocketTransport(this.events)}send(e){this.transport.send(e)}connect(e){this.transport.connect(e)}close(e,t){this.transport.close(e,t)}get isOpen(){return this.transport.isOpen}}},60845:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.utf8Length=t.utf8Read=t.ErrorCode=t.Protocol=void 0,(n=t.Protocol||(t.Protocol={}))[n.HANDSHAKE=9]="HANDSHAKE",n[n.JOIN_ROOM=10]="JOIN_ROOM",n[n.ERROR=11]="ERROR",n[n.LEAVE_ROOM=12]="LEAVE_ROOM",n[n.ROOM_DATA=13]="ROOM_DATA",n[n.ROOM_STATE=14]="ROOM_STATE",n[n.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",n[n.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",n[n.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES",(r=t.ErrorCode||(t.ErrorCode={}))[r.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",r[r.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",r[r.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",r[r.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",r[r.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",r[r.AUTH_FAILED=4215]="AUTH_FAILED",r[r.APPLICATION_ERROR=4216]="APPLICATION_ERROR",t.utf8Read=function(e,t){let n=e[t++];for(var r="",i=0,o=t,a=t+n;o<a;o++){var s=e[o];if(128&s)if(192!=(224&s))if(224!=(240&s)){if(240!=(248&s))throw Error("Invalid byte "+s.toString(16));(i=(7&s)<<18|(63&e[++o])<<12|(63&e[++o])<<6|63&e[++o])>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&s)<<12|(63&e[++o])<<6|63&e[++o]);else r+=String.fromCharCode((31&s)<<6|63&e[++o]);else r+=String.fromCharCode(s)}return r},t.utf8Length=function(e=""){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n+1}},68270:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Room=void 0;let a=o(n(59572)),s=n(22826),u=n(60845),l=n(70944),c=n(58295),f=n(16976),d=n(41396),p=n(65199);t.Room=class e{constructor(e,t){this.onStateChange=(0,f.createSignal)(),this.onError=(0,f.createSignal)(),this.onLeave=(0,f.createSignal)(),this.onJoin=(0,f.createSignal)(),this.hasJoined=!1,this.onMessageHandlers=(0,c.createNanoEvents)(),this.roomId=null,this.name=e,t&&(this.serializer=new((0,l.getSerializer)("schema")),this.rootSchema=t,this.serializer.state=new t),this.onError(((e,t)=>{var n;return null===(n=console.warn)||void 0===n?void 0:n.call(console,`colyseus.js - onError => (${e}) ${t}`)})),this.onLeave((()=>this.removeAllListeners()))}get id(){return this.roomId}connect(t,n,r=this){let i=new s.Connection;r.connection=i,i.events.onmessage=e.prototype.onMessageCallback.bind(r),i.events.onclose=function(e){var t;if(!r.hasJoined)return null===(t=console.warn)||void 0===t||t.call(console,`Room connection was closed unexpectedly (${e.code}): ${e.reason}`),void r.onError.invoke(e.code,e.reason);e.code===p.CloseCode.DEVMODE_RESTART&&n?n():(r.onLeave.invoke(e.code),r.destroy())},i.events.onerror=function(e){var t;null===(t=console.warn)||void 0===t||t.call(console,`Room, onError (${e.code}): ${e.reason}`),r.onError.invoke(e.code,e.reason)},i.connect(t)}leave(e=!0){return new Promise((t=>{this.onLeave((e=>t(e))),this.connection?e?this.connection.send([u.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.invoke(p.CloseCode.CONSENTED)}))}onMessage(e,t){return this.onMessageHandlers.on(this.getMessageHandlerKey(e),t)}send(e,t){let n,r=[u.Protocol.ROOM_DATA];if("string"==typeof e?d.encode.string(r,e):d.encode.number(r,e),void 0!==t){let e=a.encode(t);(n=new Uint8Array(r.length+e.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(e),r.length)}else n=new Uint8Array(r);this.connection.send(n.buffer)}sendBytes(e,t){let n,r=[u.Protocol.ROOM_DATA_BYTES];"string"==typeof e?d.encode.string(r,e):d.encode.number(r,e),(n=new Uint8Array(r.length+(t.byteLength||t.length))).set(new Uint8Array(r),0),n.set(new Uint8Array(t),r.length),this.connection.send(n.buffer)}get state(){return this.serializer.getState()}removeAllListeners(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}}onMessageCallback(e){let t=Array.from(new Uint8Array(e.data)),n=t[0];if(n===u.Protocol.JOIN_ROOM){let e=1,n=(0,u.utf8Read)(t,e);if(e+=(0,u.utf8Length)(n),this.serializerId=(0,u.utf8Read)(t,e),e+=(0,u.utf8Length)(this.serializerId),!this.serializer){let e=(0,l.getSerializer)(this.serializerId);this.serializer=new e}t.length>e&&this.serializer.handshake&&this.serializer.handshake(t,{offset:e}),this.reconnectionToken=`${this.roomId}:${n}`,this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([u.Protocol.JOIN_ROOM])}else if(n===u.Protocol.ERROR){let e={offset:1},n=d.decode.number(t,e),r=d.decode.string(t,e);this.onError.invoke(n,r)}else if(n===u.Protocol.LEAVE_ROOM)this.leave();else if(n===u.Protocol.ROOM_DATA_SCHEMA){let e={offset:1},n=this.serializer.getState().constructor._context.get(d.decode.number(t,e)),r=new n;r.decode(t,e),this.dispatchMessage(n,r)}else if(n===u.Protocol.ROOM_STATE)t.shift(),this.setState(t);else if(n===u.Protocol.ROOM_STATE_PATCH)t.shift(),this.patch(t);else if(n===u.Protocol.ROOM_DATA){let n={offset:1},r=d.decode.stringCheck(t,n)?d.decode.string(t,n):d.decode.number(t,n),i=t.length>n.offset?a.decode(e.data,n.offset):void 0;this.dispatchMessage(r,i)}else if(n===u.Protocol.ROOM_DATA_BYTES){let e={offset:1},n=d.decode.stringCheck(t,e)?d.decode.string(t,e):d.decode.number(t,e);this.dispatchMessage(n,new Uint8Array(t.slice(e.offset)))}}setState(e){this.serializer.setState(e),this.onStateChange.invoke(this.serializer.getState())}patch(e){this.serializer.patch(e),this.onStateChange.invoke(this.serializer.getState())}dispatchMessage(e,t){var n;let r=this.getMessageHandlerKey(e);this.onMessageHandlers.events[r]?this.onMessageHandlers.emit(r,t):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",e,t):null===(n=console.warn)||void 0===n||n.call(console,`colyseus.js: onMessage() not registered for type '${e}'.`)}destroy(){this.serializer&&this.serializer.teardown()}getMessageHandlerKey(e){switch(typeof e){case"function":return`$${e._typeid}`;case"string":return e;case"number":return`i${e}`;default:throw Error("invalid message type.")}}}},47723:function(e,t){"use strict";let n;function r(){return n||(n="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]},removeItem:function(e){delete this.cache[e]}}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getItem=t.removeItem=t.setItem=void 0,t.setItem=function(e,t){r().setItem(e,t)},t.removeItem=function(e){r().removeItem(e)},t.getItem=function(e,t){let n=r().getItem(e);"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>t(e))):t(n)}},58295:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNanoEvents=void 0,t.createNanoEvents=()=>({emit(e,...t){let n=this.events[e]||[];for(let e=0,r=n.length;e<r;e++)n[e](...t)},events:{},on(e,t){var n;return(null===(n=this.events[e])||void 0===n?void 0:n.push(t))||(this.events[e]=[t]),()=>{var n;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter((e=>t!==e))}}})},16976:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSignal=t.EventEmitter=void 0;let n=class{constructor(){this.handlers=[]}register(e,t=!1){return this.handlers.push(e),this}invoke(...e){this.handlers.forEach((t=>t.apply(this,e)))}invokeAsync(...e){return Promise.all(this.handlers.map((t=>t.apply(this,e))))}remove(e){let t=this.handlers.indexOf(e);this.handlers[t]=this.handlers[this.handlers.length-1],this.handlers.pop()}clear(){this.handlers=[]}};t.EventEmitter=n,t.createSignal=function(){let e=new n;function t(t){return e.register(t,null===this)}return t.once=t=>{let n=function(...r){t.apply(this,r),e.remove(n)};e.register(n)},t.remove=t=>e.remove(t),t.invoke=(...t)=>e.invoke(...t),t.invokeAsync=(...t)=>e.invokeAsync(...t),t.clear=()=>e.clear(),t}},65199:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ServerError=t.CloseCode=void 0,(n=t.CloseCode||(t.CloseCode={}))[n.CONSENTED=4e3]="CONSENTED",n[n.DEVMODE_RESTART=4010]="DEVMODE_RESTART",t.ServerError=class extends Error{constructor(e,t){super(t),this.name="ServerError",this.code=e}}},7767:function(e,t,n){"use strict";t.mV=t.KU=void 0,n(21331);var r=n(4705);Object.defineProperty(t,"KU",{enumerable:!0,get:function(){return r.Client}}),n(60845),n(68270),n(84063);let i=n(44066);Object.defineProperty(t,"mV",{enumerable:!0,get:function(){return i.SchemaSerializer}});let o=n(34197),a=n(70944);(0,a.registerSerializer)("schema",i.SchemaSerializer),(0,a.registerSerializer)("none",o.NoneSerializer)},21331:function(){ArrayBuffer.isView||(ArrayBuffer.isView=e=>null!==e&&"object"==typeof e&&e.buffer instanceof ArrayBuffer),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window)},59572:function(e,t){"use strict";function n(e,t){if(this._offset=t,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0,n.prototype._array=function(e){for(var t=Array(e),n=0;n<e;n++)t[n]=this._parse();return t},n.prototype._map=function(e){for(var t={},n=0;n<e;n++)t[this._parse()]=this._parse();return t},n.prototype._str=function(e){var t=function(e,t,n){for(var r="",i=0,o=t,a=t+n;o<a;o++){var s=e.getUint8(o);if(128&s)if(192!=(224&s))if(224!=(240&s)){if(240!=(248&s))throw Error("Invalid byte "+s.toString(16));(i=(7&s)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|63&e.getUint8(++o))>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&s)<<12|(63&e.getUint8(++o))<<6|63&e.getUint8(++o));else r+=String.fromCharCode((31&s)<<6|63&e.getUint8(++o));else r+=String.fromCharCode(s)}return r}(this._view,this._offset,e);return this._offset+=e,t},n.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},n.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),n=0,r=0,i=0,o=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:if(n=this._view.getUint8(this._offset),r=this._view.getInt8(this._offset+1),this._offset+=2,-1===r){var a=this._view.getUint32(this._offset);return i=this._view.getInt32(this._offset+4),o=this._view.getUint32(this._offset+8),this._offset+=12,new Date(1e3*(4294967296*i+o)+a/1e6)}return[r,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),r=this._view.getInt8(this._offset+2),this._offset+=3,[r,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),r=this._view.getInt8(this._offset+4),this._offset+=5,[r,this._bin(n)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return i=4294967296*this._view.getUint32(this._offset),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return i=4294967296*this._view.getInt32(this._offset),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 212:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?void(this._offset+=1):[r,this._bin(1)];case 213:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(2)];case 214:return r=this._view.getInt8(this._offset),this._offset+=1,-1===r?(e=this._view.getUint32(this._offset),this._offset+=4,new Date(1e3*e)):[r,this._bin(4)];case 215:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?(i=4294967296*this._view.getInt32(this._offset),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(i+o)):-1===r?(i=this._view.getUint32(this._offset),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(1e3*(4294967296*(3&i)+o)+(i>>>2)/1e6)):[r,this._bin(8)];case 216:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw Error("Could not parse")},t.decode=function(e,t=0){var r=new n(e,t),i=r._parse();if(r._offset!==e.byteLength)throw Error(e.byteLength-r._offset+" trailing bytes");return i},t.encode=function(e){var t=[],n=[],r=function e(t,n,r){var i=typeof r,o=0,a=0,s=0,u=0,l=0,c=0;if("string"===i){if((l=function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(r))<32)t.push(160|l),c=1;else if(l<256)t.push(217,l),c=2;else if(l<65536)t.push(218,l>>8,l),c=3;else{if(!(l<4294967296))throw Error("String too long");t.push(219,l>>24,l>>16,l>>8,l),c=5}return n.push({_str:r,_length:l,_offset:t.length}),c+l}if("number"===i)return Math.floor(r)===r&&isFinite(r)?r>=0?r<128?(t.push(r),1):r<256?(t.push(204,r),2):r<65536?(t.push(205,r>>8,r),3):r<4294967296?(t.push(206,r>>24,r>>16,r>>8,r),5):(s=r/4294967296|0,u=r>>>0,t.push(207,s>>24,s>>16,s>>8,s,u>>24,u>>16,u>>8,u),9):r>=-32?(t.push(r),1):r>=-128?(t.push(208,r),2):r>=-32768?(t.push(209,r>>8,r),3):r>=-2147483648?(t.push(210,r>>24,r>>16,r>>8,r),5):(s=Math.floor(r/4294967296),u=r>>>0,t.push(211,s>>24,s>>16,s>>8,s,u>>24,u>>16,u>>8,u),9):(t.push(203),n.push({_float:r,_length:8,_offset:t.length}),9);if("object"===i){if(null===r)return t.push(192),1;if(Array.isArray(r)){if((l=r.length)<16)t.push(144|l),c=1;else if(l<65536)t.push(220,l>>8,l),c=3;else{if(!(l<4294967296))throw Error("Array too large");t.push(221,l>>24,l>>16,l>>8,l),c=5}for(o=0;o<l;o++)c+=e(t,n,r[o]);return c}if(r instanceof Date){var f=r.getTime(),d=Math.floor(f/1e3),p=1e6*(f-1e3*d);return d>=0&&p>=0&&d<=17179869183?0===p&&d<=4294967295?(t.push(214,255,d>>24,d>>16,d>>8,d),6):(s=d/4294967296,u=4294967295&d,t.push(215,255,p>>22,p>>14,p>>6,s,u>>24,u>>16,u>>8,u),10):(s=Math.floor(d/4294967296),u=d>>>0,t.push(199,12,255,p>>24,p>>16,p>>8,p,s>>24,s>>16,s>>8,s,u>>24,u>>16,u>>8,u),15)}if(r instanceof ArrayBuffer){if((l=r.byteLength)<256)t.push(196,l),c=2;else if(l<65536)t.push(197,l>>8,l),c=3;else{if(!(l<4294967296))throw Error("Buffer too large");t.push(198,l>>24,l>>16,l>>8,l),c=5}return n.push({_bin:r,_length:l,_offset:t.length}),c+l}if("function"==typeof r.toJSON)return e(t,n,r.toJSON());var h=[],g="",v=Object.keys(r);for(o=0,a=v.length;o<a;o++)void 0!==r[g=v[o]]&&"function"!=typeof r[g]&&h.push(g);if((l=h.length)<16)t.push(128|l),c=1;else if(l<65536)t.push(222,l>>8,l),c=3;else{if(!(l<4294967296))throw Error("Object too large");t.push(223,l>>24,l>>16,l>>8,l),c=5}for(o=0;o<l;o++)c+=e(t,n,g=h[o])+e(t,n,r[g]);return c}if("boolean"===i)return t.push(r?195:194),1;if("undefined"===i)return t.push(192),1;if("function"==typeof r.toJSON)return e(t,n,r.toJSON());throw Error("Could not encode")}(t,n,e),i=new ArrayBuffer(r),o=new DataView(i),a=0,s=0,u=-1;n.length>0&&(u=n[0]._offset);for(var l,c=0,f=0,d=0,p=t.length;d<p;d++)if(o.setUint8(s+d,t[d]),d+1===u){if(c=(l=n[a])._length,f=s+u,l._bin)for(var h=new Uint8Array(l._bin),g=0;g<c;g++)o.setUint8(f+g,h[g]);else l._str?function(e,t,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?e.setUint8(t++,r):(r<2048?e.setUint8(t++,192|r>>6):(r<55296||r>=57344?e.setUint8(t++,224|r>>12):(i++,r=65536+((1023&r)<<10|1023&n.charCodeAt(i)),e.setUint8(t++,240|r>>18),e.setUint8(t++,128|r>>12&63)),e.setUint8(t++,128|r>>6&63)),e.setUint8(t++,128|63&r))}(o,f,l._str):void 0!==l._float&&o.setFloat64(f,l._float);s+=c,n[++a]&&(u=n[a]._offset)}return i}},34197:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoneSerializer=void 0,t.NoneSerializer=class{setState(e){}getState(){return null}patch(e){}teardown(){}handshake(e){}}},44066:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaSerializer=void 0;let r=n(41396);t.SchemaSerializer=class{setState(e){return this.state.decode(e)}getState(){return this.state}patch(e){return this.state.decode(e)}teardown(){var e,t;null===(t=null===(e=this.state)||void 0===e?void 0:e.$changes)||void 0===t||t.root.clearRefs()}handshake(e,t){if(this.state){(new r.Reflection).decode(e,t)}else this.state=r.Reflection.decode(e,t)}}},70944:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSerializer=t.registerSerializer=void 0;let n={};t.registerSerializer=function(e,t){n[e]=t},t.getSerializer=function(e){let t=n[e];if(!t)throw Error("missing serializer: "+e);return t}},14956:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketTransport=void 0;let i=r(n(46579)),o=globalThis.WebSocket||i.default;t.WebSocketTransport=class{constructor(e){this.events=e}send(e){e instanceof ArrayBuffer?this.ws.send(e):Array.isArray(e)&&this.ws.send(new Uint8Array(e).buffer)}connect(e){this.ws=new o(e,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror}close(e,t){this.ws.close(e,t)}get isOpen(){return this.ws.readyState===o.OPEN}}},46579:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},8679:function(e,t,n){"use strict";var r=n(21296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=c(n);f&&(a=a.concat(f(n)));for(var s=u(t),g=u(n),v=0;v<a.length;++v){var m=a[v];if(!(o[m]||r&&r[m]||g&&g[m]||s&&s[m])){var y=d(n,m);try{l(t,m,y)}catch(t){}}}}return t}},96103:function(e,t){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,E=n?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case v:case g:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=v,t.Memo=g,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||_(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===s||e===a||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===E||e.$$typeof===m)},t.typeOf=_},21296:function(e,t,n){"use strict";e.exports=n(96103)},68203:function(e,t){var n="undefined"!=typeof self?self:this,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();(function(e){var t="URLSearchParams"in r,n="Symbol"in r&&"iterator"in Symbol,i="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in r,a="ArrayBuffer"in r;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(i&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var n;a&&i&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=h(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},o&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=c(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=c(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var n,r,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new d(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function E(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];_.redirect=function(e,t){if(-1===w.indexOf(t))throw RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=r.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function O(t,n){return new Promise((function(r,o){var a=new b(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new _(i,n))},s.onerror=function(){o(TypeError("Network request failed"))},s.ontimeout=function(){o(TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}O.polyfill=!0,r.fetch||(r.fetch=O,r.Headers=d,r.Request=b,r.Response=_),e.Headers=d,e.Request=b,e.Response=_,e.fetch=O,Object.defineProperty(e,"__esModule",{value:!0})})({}),r.fetch.ponyfill=!0,delete r.fetch.polyfill,(t=r.fetch).default=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,e.exports=t},18552:function(e,t,n){var r=n(10852)(n(55639),"DataView");e.exports=r},1989:function(e,t,n){var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},38407:function(e,t,n){var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},57071:function(e,t,n){var r=n(10852)(n(55639),"Map");e.exports=r},83369:function(e,t,n){var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},53818:function(e,t,n){var r=n(10852)(n(55639),"Promise");e.exports=r},58525:function(e,t,n){var r=n(10852)(n(55639),"Set");e.exports=r},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},70577:function(e,t,n){var r=n(10852)(n(55639),"WeakMap");e.exports=r},29932:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},34865:function(e,t,n){var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:function(e,t,n){var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},89465:function(e,t,n){var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},97786:function(e,t,n){var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},44239:function(e,t,n){var r=n(62705),i=n(89607),o=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},9454:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},28458:function(e,t,n){var r=n(23560),i=n(15346),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,c=u.hasOwnProperty,f=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:s).test(a(e))}},38749:function(e,t,n){var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},280:function(e,t,n){var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10611:function(e,t,n){var r=n(34865),i=n(71811),o=n(65776),a=n(13218),s=n(40327);e.exports=function(e,t,n,u){if(!a(e))return e;for(var l=-1,c=(t=i(t,e)).length,f=c-1,d=e;null!=d&&++l<c;){var p=s(t[l]),h=n;if("__proto__"===p||"constructor"===p||"prototype"===p)break;if(l!=f){var g=d[p];void 0===(h=u?u(g,p,d):void 0)&&(h=a(g)?g:o(t[l+1])?[]:{})}r(d,p,h),d=d[p]}return e}},80531:function(e,t,n){var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=1/0,u=r?r.prototype:void 0,l=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},27561:function(e,t,n){var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:function(e){e.exports=function(e){return function(t){return e(t)}}},71811:function(e,t,n){var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},14429:function(e,t,n){var r=n(55639)["__core-js_shared__"];e.exports=r},38777:function(e,t,n){var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},45050:function(e,t,n){var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},10852:function(e,t,n){var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},89607:function(e,t,n){var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},64160:function(e,t,n){var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),u=n(44239),l=n(80346),c="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",g=l(r),v=l(i),m=l(o),y=l(a),b=l(s),E=u;(r&&E(new r(new ArrayBuffer(1)))!=h||i&&E(new i)!=c||o&&E(o.resolve())!=f||a&&E(new a)!=d||s&&E(new s)!=p)&&(E=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return h;case v:return c;case m:return f;case y:return d;case b:return p}return t}),e.exports=E},47801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},51789:function(e,t,n){var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:function(e,t,n){var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},21327:function(e,t,n){var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:function(e,t,n){var r=n(94536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},65776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},15403:function(e,t,n){var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},37019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15346:function(e,t,n){var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},27040:function(e){e.exports=function(){this.__data__=[],this.size=0}},14125:function(e,t,n){var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},82117:function(e,t,n){var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:function(e,t,n){var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:function(e,t,n){var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:function(e,t,n){var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:function(e,t,n){var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:function(e,t,n){var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:function(e,t,n){var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:function(e,t,n){var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},24523:function(e,t,n){var r=n(88306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},94536:function(e,t,n){var r=n(10852)(Object,"create");e.exports=r},86916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},31167:function(e,t,n){e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},55639:function(e,t,n){var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},55514:function(e,t,n){var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:function(e,t,n){var r=n(33448),i=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},80346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),i=n(7771),o=n(14841),a=Math.max,s=Math.min;e.exports=function(e,t,n){var u,l,c,f,d,p,h=0,g=!1,v=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=u,r=l;return u=l=void 0,h=t,f=e.apply(r,n)}function b(e){var n=e-p;return void 0===p||n>=t||n<0||v&&e-h>=c}function E(){var e,n=i();if(b(n))return _(n);d=setTimeout(E,(e=t-(n-p),v?s(e,c-(n-h)):e))}function _(e){return d=void 0,m&&u?y(e):(u=l=void 0,f)}function w(){var e,n=i(),r=b(n);if(u=arguments,l=this,p=n,r){if(void 0===d)return h=e=p,d=setTimeout(E,t),g?y(e):f;if(v)return clearTimeout(d),d=setTimeout(E,t),y(p)}return void 0===d&&(d=setTimeout(E,t)),f}return t=o(t)||0,r(n)&&(g=!!n.leading,c=(v="maxWait"in n)?a(o(n.maxWait)||0,t):c,m="trailing"in n?!!n.trailing:m),w.cancel=function(){void 0!==d&&clearTimeout(d),h=0,u=p=l=d=void 0},w.flush=function(){return void 0===d?f:_(i())},w}},77813:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},27361:function(e,t,n){var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},35694:function(e,t,n){var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},1469:function(e){var t=Array.isArray;e.exports=t},98612:function(e,t,n){var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},44144:function(e,t,n){e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,u=s?s.isBuffer:void 0;e.exports=u||i},41609:function(e,t,n){var r=n(280),i=n(64160),o=n(35694),a=n(1469),s=n(98612),u=n(44144),l=n(25726),c=n(36719),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||c(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},23560:function(e,t,n){var r=n(44239),i=n(13218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),i=n(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},36719:function(e,t,n){var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},96486:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=1/0,l=NaN,c=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],f="[object Arguments]",d="[object Array]",p="[object Boolean]",h="[object Date]",g="[object Error]",v="[object Function]",m="[object GeneratorFunction]",y="[object Map]",b="[object Number]",E="[object Object]",_="[object Promise]",w="[object RegExp]",O="[object Set]",A="[object String]",S="[object Symbol]",I="[object WeakMap]",P="[object ArrayBuffer]",R="[object DataView]",k="[object Float32Array]",T="[object Float64Array]",N="[object Int8Array]",x="[object Int16Array]",C="[object Int32Array]",L="[object Uint8Array]",M="[object Uint8ClampedArray]",j="[object Uint16Array]",D="[object Uint32Array]",U=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,Z=RegExp(B.source),G=RegExp(F.source),q=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,z=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,X=RegExp(K.source),Q=/^\s+/,ee=/\s/,te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ne=/\{\n\/\* \[wrapped with (.+)\] \*/,re=/,? & /,ie=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oe=/[()=,{}\[\]\/\s]/,ae=/\\(\\)?/g,se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ue=/\w*$/,le=/^[-+]0x[0-9a-f]+$/i,ce=/^0b[01]+$/i,fe=/^\[object .+?Constructor\]$/,de=/^0o[0-7]+$/i,pe=/^(?:0|[1-9]\d*)$/,he=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ge=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,me="\ud800-\udfff",ye="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",be="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",we="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="[']",Se="["+Oe+"]",Ie="["+ye+"]",Pe="["+Ee+"]",Re="[^"+me+Oe+"\\d+"+be+Ee+_e+"]",ke="\ud83c[\udffb-\udfff]",Te="[^\ud800-\udfff]",Ne="(?:\ud83c[\udde6-\uddff]){2}",xe="[\ud800-\udbff][\udc00-\udfff]",Ce="["+_e+"]",Le="\\u200d",Me="(?:"+Pe+"|"+Re+")",je="(?:['](?:d|ll|m|re|s|t|ve))?",De="(?:['](?:D|LL|M|RE|S|T|VE))?",Ue="(?:"+Ie+"|"+ke+")?",$e="["+we+"]?",Ve=$e+Ue+("(?:"+Le+"(?:"+[Te,Ne,xe].join("|")+")"+$e+Ue+")*"),Be="(?:"+["["+be+"]",Ne,xe].join("|")+")"+Ve,Fe="(?:"+[Te+Ie+"?",Ie,Ne,xe,"[\ud800-\udfff]"].join("|")+")",Ze=RegExp(Ae,"g"),Ge=RegExp(Ie,"g"),qe=RegExp(ke+"(?="+ke+")|"+Fe+Ve,"g"),He=RegExp([Ce+"?"+Pe+"+"+je+"(?="+[Se,Ce,"$"].join("|")+")","(?:"+Ce+"|"+Re+")+"+De+"(?="+[Se,Ce+Me,"$"].join("|")+")",Ce+"?"+Me+"+"+je,Ce+"+"+De,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Be].join("|"),"g"),ze=RegExp("["+Le+me+ye+we+"]"),We=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Je=-1,Ke={};Ke[k]=Ke[T]=Ke[N]=Ke[x]=Ke[C]=Ke[L]=Ke[M]=Ke[j]=Ke[D]=!0,Ke[f]=Ke[d]=Ke[P]=Ke[p]=Ke[R]=Ke[h]=Ke[g]=Ke[v]=Ke[y]=Ke[b]=Ke[E]=Ke[w]=Ke[O]=Ke[A]=Ke[I]=!1;var Xe={};Xe[f]=Xe[d]=Xe[P]=Xe[R]=Xe[p]=Xe[h]=Xe[k]=Xe[T]=Xe[N]=Xe[x]=Xe[C]=Xe[y]=Xe[b]=Xe[E]=Xe[w]=Xe[O]=Xe[A]=Xe[S]=Xe[L]=Xe[M]=Xe[j]=Xe[D]=!0,Xe[g]=Xe[v]=Xe[I]=!1;var Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},et=parseFloat,tt=parseInt,nt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,rt="object"==typeof self&&self&&self.Object===Object&&self,it=nt||rt||Function("return this")(),ot=t&&!t.nodeType&&t,at=ot&&e&&!e.nodeType&&e,st=at&&at.exports===ot,ut=st&&nt.process,lt=function(){try{var e=at&&at.require&&at.require("util").types;return e||ut&&ut.binding&&ut.binding("util")}catch(e){}}(),ct=lt&&lt.isArrayBuffer,ft=lt&&lt.isDate,dt=lt&&lt.isMap,pt=lt&&lt.isRegExp,ht=lt&&lt.isSet,gt=lt&&lt.isTypedArray;function vt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function mt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function yt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Et(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function _t(e,t){return!(null==e||!e.length)&&Nt(e,t,0)>-1}function wt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function At(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function St(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function It(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Rt=Mt("length");function kt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Tt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Nt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Tt(e,Ct,n)}function xt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Ct(e){return e!=e}function Lt(e,t){var n=null==e?0:e.length;return n?Ut(e,t)/n:l}function Mt(e){return function(t){return null==t?i:t[e]}}function jt(e){return function(t){return null==e?i:e[t]}}function Dt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Ut(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);i!==a&&(n=i===n?a:n+a)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Vt(e){return e?e.slice(0,nn(e)+1).replace(Q,""):e}function Bt(e){return function(t){return e(t)}}function Ft(e,t){return Ot(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function Gt(e,t){for(var n=-1,r=e.length;++n<r&&Nt(t,e[n],0)>-1;);return n}function qt(e,t){for(var n=e.length;n--&&Nt(t,e[n],0)>-1;);return n}var Ht=jt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),zt=jt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Wt(e){return"\\"+Qe[e]}function Yt(e){return ze.test(e)}function Jt(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Kt(e,t){return function(n){return e(t(n))}}function Xt(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];(a===t||a===s)&&(e[n]=s,o[i++]=n)}return o}function Qt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function en(e){return Yt(e)?function(e){for(var t=qe.lastIndex=0;qe.test(e);)++t;return t}(e):Rt(e)}function tn(e){return Yt(e)?e.match(qe)||[]:e.split("")}function nn(e){for(var t=e.length;t--&&ee.test(e.charAt(t)););return t}var rn=jt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),on=function e(t){var n,r,ee,me,ye=(t=null==t?it:on.defaults(it.Object(),t,on.pick(it,Ye))).Array,be=t.Date,Ee=t.Error,_e=t.Function,we=t.Math,Oe=t.Object,Ae=t.RegExp,Se=t.String,Ie=t.TypeError,Pe=ye.prototype,Re=_e.prototype,ke=Oe.prototype,Te=t["__core-js_shared__"],Ne=Re.toString,xe=ke.hasOwnProperty,Ce=0,Le=(n=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Me=ke.toString,je=Ne.call(Oe),De=it._,Ue=Ae("^"+Ne.call(xe).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=st?t.Buffer:i,Ve=t.Symbol,Be=t.Uint8Array,Fe=$e?$e.allocUnsafe:i,qe=Kt(Oe.getPrototypeOf,Oe),ze=Oe.create,Qe=ke.propertyIsEnumerable,nt=Pe.splice,rt=Ve?Ve.isConcatSpreadable:i,ot=Ve?Ve.iterator:i,at=Ve?Ve.toStringTag:i,ut=function(){try{var e=Qi(Oe,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=t.clearTimeout!==it.clearTimeout&&t.clearTimeout,Rt=be&&be.now!==it.Date.now&&be.now,jt=t.setTimeout!==it.setTimeout&&t.setTimeout,an=we.ceil,sn=we.floor,un=Oe.getOwnPropertySymbols,ln=$e?$e.isBuffer:i,cn=t.isFinite,fn=Pe.join,dn=Kt(Oe.keys,Oe),pn=we.max,hn=we.min,gn=be.now,vn=t.parseInt,mn=we.random,yn=Pe.reverse,bn=Qi(t,"DataView"),En=Qi(t,"Map"),_n=Qi(t,"Promise"),wn=Qi(t,"Set"),On=Qi(t,"WeakMap"),An=Qi(Oe,"create"),Sn=On&&new On,In={},Pn=So(bn),Rn=So(En),kn=So(_n),Tn=So(wn),Nn=So(On),xn=Ve?Ve.prototype:i,Cn=xn?xn.valueOf:i,Ln=xn?xn.toString:i;function Mn(e){if(Fa(e)&&!Na(e)&&!(e instanceof $n)){if(e instanceof Un)return e;if(xe.call(e,"__wrapped__"))return Io(e)}return new Un(e)}var jn=function(){function e(){}return function(t){if(!Ba(t))return{};if(ze)return ze(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Dn(){}function Un(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function $n(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Fn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new Bn(e);this.size=t.size}function qn(e,t){var n=Na(e),r=!n&&Ta(e),i=!n&&!r&&Ma(e),o=!n&&!r&&!i&&Ja(e),a=n||r||i||o,s=a?$t(e.length,Se):[],u=s.length;for(var l in e)(t||xe.call(e,l))&&(!a||!("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ao(l,u)))&&s.push(l);return s}function Hn(e){var t=e.length;return t?e[Vr(0,t-1)]:i}function zn(e,t,n){(i===n||Pa(e[t],n))&&(i!==n||t in e)||Xn(e,t,n)}function Wn(e,t,n){var r=e[t];xe.call(e,t)&&Pa(r,n)&&(i!==n||t in e)||Xn(e,t,n)}function Yn(e,t){for(var n=e.length;n--;)if(Pa(e[n][0],t))return n;return-1}function Jn(e,t,n,r){return or(e,(function(e,i,o){t(r,e,n(e),o)})),r}function Kn(e,t){return e&&yi(t,ys(t),e)}function Xn(e,t,n){"__proto__"==t&&ut?ut(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Qn(e,t){for(var n=-1,r=t.length,o=ye(r),a=null==e;++n<r;)o[n]=a?i:ps(e,t[n]);return o}function er(e,t,n){return e==e&&(i!==n&&(e=e<=n?e:n),i!==t&&(e=e>=t?e:t)),e}function tr(e,t,n,r,o,a){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),i!==s)return s;if(!Ba(e))return e;var d=Na(e);if(d){if(g=e.length,_=new e.constructor(g),g&&"string"==typeof e[0]&&xe.call(e,"index")&&(_.index=e.index,_.input=e.input),s=_,!u)return mi(e,s)}else{var g,_,I,U,$,V=no(e),B=V==v||V==m;if(Ma(e))return fi(e,u);if(V==E||V==f||B&&!o){if(s=l||B?{}:io(e),!u)return l?(I=($=s)&&yi(e,bs(e),$),yi(e,to(e),I)):(U=Kn(s,e),yi(e,eo(e),U))}else{if(!Xe[V])return o?e:{};s=function(e,t,n){var r,i,o=e.constructor;switch(t){case P:return di(e);case p:case h:return new o(+e);case R:return r=n?di(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.byteLength);case k:case T:case N:case x:case C:case L:case M:case j:case D:return pi(e,n);case y:return new o;case b:case A:return new o(e);case w:return(i=new e.constructor(e.source,ue.exec(e))).lastIndex=e.lastIndex,i;case O:return new o;case S:return Cn?Oe(Cn.call(e)):{}}}(e,V,u)}}a||(a=new Gn);var F=a.get(e);if(F)return F;a.set(e,s),za(e)?e.forEach((function(r){s.add(tr(r,t,n,r,e,a))})):Za(e)&&e.forEach((function(r,i){s.set(i,tr(r,t,n,i,e,a))}));var Z=d?i:(c?l?Hi:qi:l?bs:ys)(e);return yt(Z||e,(function(r,i){Z&&(r=e[i=r]),Wn(s,i,tr(r,t,n,i,e,a))})),s}function nr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Oe(e);r--;){var o=n[r],a=t[o],s=e[o];if(i===s&&!(o in e)||!a(s))return!1}return!0}function rr(e,t,n){if("function"!=typeof e)throw new Ie(o);return yo((function(){e.apply(i,n)}),t)}function ir(e,t,n,r){var i=-1,o=_t,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Ot(t,Bt(n))),r?(o=wt,a=!1):t.length>=200&&(o=Zt,a=!1,t=new Zn(t));e:for(;++i<s;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=l;d--;)if(t[d]===f)continue e;u.push(c)}else o(t,f,r)||u.push(c)}return u}Mn.templateSettings={escape:q,evaluate:H,interpolate:z,variable:"",imports:{_:Mn}},Mn.prototype=Dn.prototype,Mn.prototype.constructor=Mn,Un.prototype=jn(Dn.prototype),Un.prototype.constructor=Un,$n.prototype=jn(Dn.prototype),$n.prototype.constructor=$n,Vn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Vn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===a?i:n}return xe.call(t,e)?t[e]:i},Vn.prototype.has=function(e){var t=this.__data__;return An?i!==t[e]:xe.call(t,e)},Vn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&i===t?a:t,this},Bn.prototype.clear=function(){this.__data__=[],this.size=0},Bn.prototype.delete=function(e){var t=this.__data__,n=Yn(t,e);return!(n<0||(n==t.length-1?t.pop():nt.call(t,n,1),--this.size,0))},Bn.prototype.get=function(e){var t=this.__data__,n=Yn(t,e);return n<0?i:t[n][1]},Bn.prototype.has=function(e){return Yn(this.__data__,e)>-1},Bn.prototype.set=function(e,t){var n=this.__data__,r=Yn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(En||Bn),string:new Vn}},Fn.prototype.delete=function(e){var t=Ki(this,e).delete(e);return this.size-=t?1:0,t},Fn.prototype.get=function(e){return Ki(this,e).get(e)},Fn.prototype.has=function(e){return Ki(this,e).has(e)},Fn.prototype.set=function(e,t){var n=Ki(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,a),this},Zn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new Bn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Bn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fn(r)}return n.set(e,t),this.size=n.size,this};var or=_i(pr),ar=_i(hr,!0);function sr(e,t){var n=!0;return or(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function ur(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(i===u?s==s&&!Ya(s):n(s,u)))var u=s,l=a}return l}function lr(e,t){var n=[];return or(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function cr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=oo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?cr(s,t-1,n,r,i):At(i,s):r||(i[i.length]=s)}return i}var fr=wi(),dr=wi(!0);function pr(e,t){return e&&fr(e,t,ys)}function hr(e,t){return e&&dr(e,t,ys)}function gr(e,t){return Et(t,(function(t){return Ua(e[t])}))}function vr(e,t){for(var n=0,r=(t=ui(t,e)).length;null!=e&&n<r;)e=e[Ao(t[n++])];return n&&n==r?e:i}function mr(e,t,n){var r=t(e);return Na(e)?r:At(r,n(e))}function yr(e){return null==e?i===e?"[object Undefined]":"[object Null]":at&&at in Oe(e)?function(e){var t=xe.call(e,at),n=e[at];try{e[at]=i;var r=!0}catch(e){}var o=Me.call(e);return r&&(t?e[at]=n:delete e[at]),o}(e):Me.call(e)}function br(e,t){return e>t}function Er(e,t){return null!=e&&xe.call(e,t)}function _r(e,t){return null!=e&&t in Oe(e)}function wr(e,t,n){for(var r=n?wt:_t,o=e[0].length,a=e.length,s=a,u=ye(a),l=1/0,c=[];s--;){var f=e[s];s&&t&&(f=Ot(f,Bt(t))),l=hn(f.length,l),u[s]=!n&&(t||o>=120&&f.length>=120)?new Zn(s&&f):i}f=e[0];var d=-1,p=u[0];e:for(;++d<o&&c.length<l;){var h=f[d],g=t?t(h):h;if(h=n||0!==h?h:0,!(p?Zt(p,g):r(c,g,n))){for(s=a;--s;){var v=u[s];if(!(v?Zt(v,g):r(e[s],g,n)))continue e}p&&p.push(g),c.push(h)}}return c}function Or(e,t,n){var r=null==(e=go(e,t=ui(t,e)))?e:e[Ao(Do(t))];return null==r?i:vt(r,e,n)}function Ar(e){return Fa(e)&&yr(e)==f}function Sr(e,t,n,r,o){return e===t||(null!=e&&null!=t&&(Fa(e)||Fa(t))?function(e,t,n,r,o,a){var s=Na(e),u=Na(t),l=s?d:no(e),c=u?d:no(t),v=(l=l==f?E:l)==E,m=(c=c==f?E:c)==E,_=l==c;if(_&&Ma(e)){if(!Ma(t))return!1;s=!0,v=!1}if(_&&!v)return a||(a=new Gn),s||Ja(e)?Zi(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case P:if(e.byteLength!=t.byteLength||!o(new Be(e),new Be(t)))break;return!0;case p:case h:case b:return Pa(+e,+t);case g:return e.name==t.name&&e.message==t.message;case w:case A:return e==t+"";case y:var s=Jt;case O:var u=1&r;if(s||(s=Qt),e.size!=t.size&&!u)break;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var c=Zi(s(e),s(t),r,i,o,a);return a.delete(e),c;case S:if(Cn)return Cn.call(e)==Cn.call(t)}return!1}(e,t,l,n,r,o,a);if(!(1&n)){var I=v&&xe.call(e,"__wrapped__"),k=m&&xe.call(t,"__wrapped__");if(I||k){var T=I?e.value():e,N=k?t.value():t;return a||(a=new Gn),o(T,N,n,r,a)}}return!!_&&(a||(a=new Gn),function(e,t,n,r,o,a){var s=1&n,u=qi(e),l=u.length;if(l!=qi(t).length&&!s)return!1;for(var c=l;c--;){var f=u[c];if(!(s?f in t:xe.call(t,f)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var h=!0;a.set(e,t),a.set(t,e);for(var g=s;++c<l;){var v=e[f=u[c]],m=t[f];if(r)var y=s?r(m,v,f,t,e,a):r(v,m,f,e,t,a);if(!(i===y?v===m||o(v,m,n,r,a):y)){h=!1;break}g||(g="constructor"==f)}if(h&&!g){var b=e.constructor,E=t.constructor;b!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,r,o,a))}(e,t,n,r,Sr,o):e!=e&&t!=t)}function Ir(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Oe(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=n[o])[0],c=e[l],f=u[1];if(s&&u[2]){if(i===c&&!(l in e))return!1}else{var d=new Gn;if(r)var p=r(c,f,l,e,t,d);if(!(i===p?Sr(f,c,3,r,d):p))return!1}}return!0}function Pr(e){return!(!Ba(e)||Le&&Le in e)&&(Ua(e)?Ue:fe).test(So(e))}function Rr(e){return"function"==typeof e?e:null==e?Gs:"object"==typeof e?Na(e)?Cr(e[0],e[1]):xr(e):Qs(e)}function kr(e){if(!fo(e))return dn(e);var t=[];for(var n in Oe(e))xe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Tr(e,t){return e<t}function Nr(e,t){var n=-1,r=Ca(e)?ye(e.length):[];return or(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function xr(e){var t=Xi(e);return 1==t.length&&t[0][2]?po(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Cr(e,t){var n;return uo(e)&&(n=t)==n&&!Ba(n)?po(Ao(e),t):function(n){var r=ps(n,e);return i===r&&r===t?hs(n,e):Sr(t,r,3)}}function Lr(e,t,n,r,o){e!==t&&fr(t,(function(a,s){if(o||(o=new Gn),Ba(a))!function(e,t,n,r,o,a,s){var u=vo(e,n),l=vo(t,n),c=s.get(l);if(c)zn(e,n,c);else{var f=a?a(u,l,n+"",e,t,s):i,d=i===f;if(d){var p=Na(l),h=!p&&Ma(l),g=!p&&!h&&Ja(l);f=l,p||h||g?Na(u)?f=u:La(u)?f=mi(u):h?(d=!1,f=fi(l,!0)):g?(d=!1,f=pi(l,!0)):f=[]:qa(l)||Ta(l)?(f=u,Ta(u)?f=is(u):(!Ba(u)||Ua(u))&&(f=io(l))):d=!1}d&&(s.set(l,f),o(f,l,r,a,s),s.delete(l)),zn(e,n,f)}}(e,t,s,n,Lr,r,o);else{var u=r?r(vo(e,s),a,s+"",e,t,o):i;i===u&&(u=a),zn(e,s,u)}}),bs)}function Mr(e,t){var n=e.length;if(n)return ao(t+=t<0?n:0,n)?e[t]:i}function jr(e,t,n){t=t.length?Ot(t,(function(e){return Na(e)?function(t){return vr(t,1===e.length?e[0]:e)}:e})):[Gs];var r=-1;return t=Ot(t,Bt(Ji())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Nr(e,(function(e,n,i){return{criteria:Ot(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=hi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Dr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=vr(e,a);n(s,a)&&Zr(o,ui(a,e),s)}return o}function Ur(e,t,n,r){var i=r?xt:Nt,o=-1,a=t.length,s=e;for(e===t&&(t=mi(t)),n&&(s=Ot(e,Bt(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&nt.call(s,u,1),nt.call(e,u,1);return e}function $r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;ao(i)?nt.call(e,i,1):ei(e,i)}}return e}function Vr(e,t){return e+sn(mn()*(t-e+1))}function Br(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=sn(t/2))&&(e+=e)}while(t);return n}function Fr(e,t){return bo(ho(e,t,Gs),e+"")}function Zr(e,t,n,r){if(!Ba(e))return e;for(var o=-1,a=(t=ui(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var l=Ao(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)break;if(o!=s){var f=u[l];c=r?r(f,l,u):i,i===c&&(c=Ba(f)?f:ao(t[o+1])?[]:{})}Wn(u,l,c),u=u[l]}return e}var Gr=Sn?function(e,t){return Sn.set(e,t),e}:Gs,qr=ut?function(e,t){return ut(e,"toString",{configurable:!0,enumerable:!1,value:Bs(t),writable:!0})}:Gs;function Hr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ye(i);++r<i;)o[r]=e[r+t];return o}function zr(e,t){var n;return or(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Wr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!Ya(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return Yr(e,t,Gs,n)}function Yr(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,l=Ya(t),c=i===t;o<a;){var f=sn((o+a)/2),d=n(e[f]),p=i!==d,h=null===d,g=d==d,v=Ya(d);if(s)var m=r||g;else m=c?g&&(r||p):u?g&&p&&(r||!h):l?g&&p&&!h&&(r||!v):!h&&!v&&(r?d<=t:d<t);m?o=f+1:a=f}return hn(a,4294967294)}function Jr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Pa(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function Kr(e){return"number"==typeof e?e:Ya(e)?l:+e}function Xr(e){if("string"==typeof e)return e;if(Na(e))return Ot(e,Xr)+"";if(Ya(e))return Ln?Ln.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}function Qr(e,t,n){var r=-1,i=_t,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=wt;else if(o>=200){var l=t?null:Di(e);if(l)return Qt(l);a=!1,i=Zt,u=new Zn}else u=t?[]:s;e:for(;++r<o;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function ei(e,t){return null==(e=go(e,t=ui(t,e)))||delete e[Ao(Do(t))]}function ti(e,t,n,r){return Zr(e,t,n(vr(e,t)),r)}function ni(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Hr(e,r?0:o,r?o+1:i):Hr(e,r?o+1:0,r?i:o)}function ri(e,t){var n=e;return n instanceof $n&&(n=n.value()),St(t,(function(e,t){return t.func.apply(t.thisArg,At([e],t.args))}),n)}function ii(e,t,n){var r=e.length;if(r<2)return r?Qr(e[0]):[];for(var i=-1,o=ye(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=ir(o[i]||a,e[s],t,n));return Qr(cr(o,1),t,n)}function oi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var u=r<a?t[r]:i;n(s,e[r],u)}return s}function ai(e){return La(e)?e:[]}function si(e){return"function"==typeof e?e:Gs}function ui(e,t){return Na(e)?e:uo(e,t)?[e]:Oo(os(e))}function li(e,t,n){var r=e.length;return n=i===n?r:n,!t&&n>=r?e:Hr(e,t,n)}var ci=lt||function(e){return it.clearTimeout(e)};function fi(e,t){if(t)return e.slice();var n=e.length,r=Fe?Fe(n):new e.constructor(n);return e.copy(r),r}function di(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function pi(e,t){var n=t?di(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function hi(e,t){if(e!==t){var n=i!==e,r=null===e,o=e==e,a=Ya(e),s=i!==t,u=null===t,l=t==t,c=Ya(t);if(!u&&!c&&!a&&e>t||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&e<t||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function gi(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,l=pn(o-a,0),c=ye(u+l),f=!r;++s<u;)c[s]=t[s];for(;++i<a;)(f||i<o)&&(c[n[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}function vi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,l=t.length,c=pn(o-s,0),f=ye(c+l),d=!r;++i<c;)f[i]=e[i];for(var p=i;++u<l;)f[p+u]=t[u];for(;++a<s;)(d||i<o)&&(f[p+n[a]]=e[i++]);return f}function mi(e,t){var n=-1,r=e.length;for(t||(t=ye(r));++n<r;)t[n]=e[n];return t}function yi(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],l=r?r(n[u],e[u],u,n,e):i;i===l&&(l=e[u]),o?Xn(n,u,l):Wn(n,u,l)}return n}function bi(e,t){return function(n,r){var i=Na(n)?mt:Jn,o=t?t():{};return i(n,e,Ji(r,2),o)}}function Ei(e){return Fr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&so(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Oe(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t}))}function _i(e,t){return function(n,r){if(null==n)return n;if(!Ca(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Oe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function wi(e){return function(t,n,r){for(var i=-1,o=Oe(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Oi(e){return function(t){var n=Yt(t=os(t))?tn(t):i,r=n?n[0]:t.charAt(0),o=n?li(n,1).join(""):t.slice(1);return r[e]()+o}}function Ai(e){return function(t){return St(Us(Ts(t).replace(Ze,"")),e,"")}}function Si(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jn(e.prototype),r=e.apply(n,t);return Ba(r)?r:n}}function Ii(e){return function(t,n,r){var o=Oe(t);if(!Ca(t)){var a=Ji(n,3);t=ys(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Pi(e){return Gi((function(t){var n=t.length,r=n,a=Un.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ie(o);if(a&&!u&&"wrapper"==Wi(s))var u=new Un([],!0)}for(r=u?r:n;++r<n;){var l=Wi(s=t[r]),c="wrapper"==l?zi(s):i;u=c&&lo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[Wi(c[0])].apply(u,c[3]):1==s.length&&lo(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Na(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Ri(e,t,n,r,o,a,s,u,l,c){var f=128&t,d=1&t,p=2&t,h=24&t,g=512&t,v=p?i:Si(e);return function m(){for(var y=arguments.length,b=ye(y),E=y;E--;)b[E]=arguments[E];if(h)var _=Yi(m),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,_);if(r&&(b=gi(b,r,o,h)),a&&(b=vi(b,a,s,h)),y-=w,h&&y<c){var O=Xt(b,_);return Mi(e,t,Ri,m.placeholder,n,b,O,u,l,c-y)}var A=d?n:this,S=p?A[e]:e;return y=b.length,u?b=function(e,t){for(var n=e.length,r=hn(t.length,n),o=mi(e);r--;){var a=t[r];e[r]=ao(a,n)?o[a]:i}return e}(b,u):g&&y>1&&b.reverse(),f&&l<y&&(b.length=l),this&&this!==it&&this instanceof m&&(S=v||Si(S)),S.apply(A,b)}}function ki(e,t){return function(n,r){var i,o;return i=t(r),o={},pr(n,(function(t,n,r){e(o,i(t),n,r)})),o}}function Ti(e,t){return function(n,r){var o;if(i===n&&i===r)return t;if(i!==n&&(o=n),i!==r){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Kr(n),r=Kr(r)),o=e(n,r)}return o}}function Ni(e){return Gi((function(t){return t=Ot(t,Bt(Ji())),Fr((function(n){var r=this;return e(t,(function(e){return vt(e,r,n)}))}))}))}function xi(e,t){var n=(t=i===t?" ":Xr(t)).length;if(n<2)return n?Br(t,e):t;var r=Br(t,an(e/en(t)));return Yt(t)?li(tn(r),0,e).join(""):r.slice(0,e)}function Ci(e){return function(t,n,r){return r&&"number"!=typeof r&&so(t,n,r)&&(n=r=i),t=es(t),i===n?(n=t,t=0):n=es(n),function(e,t,n,r){for(var i=-1,o=pn(an((t-e)/(n||1)),0),a=ye(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,r=i===r?t<n?1:-1:es(r),e)}}function Li(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=rs(t),n=rs(n)),e(t,n)}}function Mi(e,t,n,r,o,a,s,u,l,c){var f=8&t;t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4);var d=[e,t,o,f?a:i,f?s:i,f?i:a,f?i:s,u,l,c],p=n.apply(i,d);return lo(e)&&mo(p,d),p.placeholder=r,Eo(p,e,t)}function ji(e){var t=we[e];return function(e,n){if(e=rs(e),(n=null==n?0:hn(ts(n),292))&&cn(e)){var r=(os(e)+"e").split("e");return+((r=(os(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Di=wn&&1/Qt(new wn([,-0]))[1]==u?function(e){return new wn(e)}:Ys;function Ui(e){return function(t){var n,r,i=no(t);return i==y?Jt(t):i==O?(n=-1,r=Array(t.size),t.forEach((function(e){r[++n]=[e,e]})),r):Ot(e(t),(function(e){return[e,t[e]]}))}}function $i(e,t,n,r,a,u,l,c){var f=2&t;if(!f&&"function"!=typeof e)throw new Ie(o);var d=r?r.length:0;if(d||(t&=-97,r=a=i),l=i===l?l:pn(ts(l),0),c=i===c?c:ts(c),d-=a?a.length:0,64&t){var p=r,h=a;r=a=i}var g=f?i:zi(e),v=[e,t,n,r,a,p,h,u,l,c];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(o||a){1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?gi(l,u,t[4]):u,e[4]=l?Xt(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?vi(l,u,t[6]):u,e[6]=l?Xt(e[5],s):t[6]),(u=t[7])&&(e[7]=u),128&r&&(e[8]=null==e[8]?t[8]:hn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}}(v,g),e=v[0],t=v[1],n=v[2],r=v[3],a=v[4],(c=v[9]=i===v[9]?f?0:e.length:pn(v[9]-d,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?(y=t,b=c,E=Si(m=e),T=function e(){for(var t=arguments.length,n=ye(t),r=t,o=Yi(e);r--;)n[r]=arguments[r];var a=t<3&&n[0]!==o&&n[t-1]!==o?[]:Xt(n,o);return(t-=a.length)<b?Mi(m,y,Ri,e.placeholder,i,n,a,i,i,b-t):vt(this&&this!==it&&this instanceof e?E:m,this,n)}):32!=t&&33!=t||a.length?T=Ri.apply(i,v):(w=n,O=r,A=1&t,S=Si(_=e),T=function e(){for(var t=-1,n=arguments.length,r=-1,i=O.length,o=ye(i+n),a=this&&this!==it&&this instanceof e?S:_;++r<i;)o[r]=O[r];for(;n--;)o[r++]=arguments[++t];return vt(a,A?w:this,o)});else var m,y,b,E,_,w,O,A,S,I,P,R,k,T=(P=n,R=1&t,k=Si(I=e),function e(){return(this&&this!==it&&this instanceof e?k:I).apply(R?P:this,arguments)});return Eo((g?Gr:mo)(T,v),e,t)}function Vi(e,t,n,r){return i===e||Pa(e,ke[n])&&!xe.call(r,n)?t:e}function Bi(e,t,n,r,o,a){return Ba(e)&&Ba(t)&&(a.set(t,e),Lr(e,t,i,Bi,a),a.delete(t)),e}function Fi(e){return qa(e)?i:e}function Zi(e,t,n,r,o,a){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e),f=a.get(t);if(c&&f)return c==t&&f==e;var d=-1,p=!0,h=2&n?new Zn:i;for(a.set(e,t),a.set(t,e);++d<u;){var g=e[d],v=t[d];if(r)var m=s?r(v,g,d,t,e,a):r(g,v,d,e,t,a);if(i!==m){if(m)continue;p=!1;break}if(h){if(!Pt(t,(function(e,t){if(!Zt(h,t)&&(g===e||o(g,e,n,r,a)))return h.push(t)}))){p=!1;break}}else if(g!==v&&!o(g,v,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function Gi(e){return bo(ho(e,i,xo),e+"")}function qi(e){return mr(e,ys,eo)}function Hi(e){return mr(e,bs,to)}var zi=Sn?function(e){return Sn.get(e)}:Ys;function Wi(e){for(var t=e.name+"",n=In[t],r=xe.call(In,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Yi(e){return(xe.call(Mn,"placeholder")?Mn:e).placeholder}function Ji(){var e=Mn.iteratee||qs;return e=e===qs?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function Ki(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function Xi(e){for(var t=ys(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!Ba(i)]}return t}function Qi(e,t){var n=null==e?i:e[t];return Pr(n)?n:i}var eo=un?function(e){return null==e?[]:Et(un(e=Oe(e)),(function(t){return Qe.call(e,t)}))}:nu,to=un?function(e){for(var t=[];e;)At(t,eo(e)),e=qe(e);return t}:nu,no=yr;function ro(e,t,n){for(var r=-1,i=(t=ui(t,e)).length,o=!1;++r<i;){var a=Ao(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Va(i)&&ao(a,i)&&(Na(e)||Ta(e))}function io(e){return"function"!=typeof e.constructor||fo(e)?{}:jn(qe(e))}function oo(e){return Na(e)||Ta(e)||!!(rt&&e&&e[rt])}function ao(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&pe.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,n){if(!Ba(n))return!1;var r=typeof t;return("number"==r?!(!Ca(n)||!ao(t,n.length)):"string"==r&&t in n)&&Pa(n[t],e)}function uo(e,t){if(Na(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ya(e))||Y.test(e)||!W.test(e)||null!=t&&e in Oe(t)}function lo(e){var t=Wi(e),n=Mn[t];if("function"!=typeof n||!(t in $n.prototype))return!1;if(e===n)return!0;var r=zi(n);return!!r&&e===r[0]}(bn&&no(new bn(new ArrayBuffer(1)))!=R||En&&no(new En)!=y||_n&&no(_n.resolve())!=_||wn&&no(new wn)!=O||On&&no(new On)!=I)&&(no=function(e){var t=yr(e),n=t==E?e.constructor:i,r=n?So(n):"";if(r)switch(r){case Pn:return R;case Rn:return y;case kn:return _;case Tn:return O;case Nn:return I}return t});var co=Te?Ua:ru;function fo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)}function po(e,t){return function(n){return null!=n&&n[e]===t&&(i!==t||e in Oe(n))}}function ho(e,t,n){return t=pn(i===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=pn(r.length-t,0),a=ye(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=ye(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),vt(e,this,s)}}function go(e,t){return t.length<2?e:vr(e,Hr(t,0,-1))}function vo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var mo=_o(Gr),yo=jt||function(e,t){return it.setTimeout(e,t)},bo=_o(qr);function Eo(e,t,n){var r,i,o=t+"";return bo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(te,"{\n/* [wrapped with "+t+"] */\n")}(o,(r=(i=o.match(ne))?i[1].split(re):[],yt(c,(function(e){var t="_."+e[0];n&e[1]&&!_t(r,t)&&r.push(t)})),r.sort())))}function _o(e){var t=0,n=0;return function(){var r=gn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function wo(e,t){var n=-1,r=e.length,o=r-1;for(t=i===t?r:t;++n<t;){var a=Vr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Oo=(ee=(r=_a((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(J,(function(e,n,r,i){t.push(r?i.replace(ae,"$1"):n||e)})),t}),(function(e){return 500===ee.size&&ee.clear(),e}))).cache,r);function Ao(e){if("string"==typeof e||Ya(e))return e;var t=e+"";return"0"==t&&1/e==-u?"-0":t}function So(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Io(e){if(e instanceof $n)return e.clone();var t=new Un(e.__wrapped__,e.__chain__);return t.__actions__=mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Po=Fr((function(e,t){return La(e)?ir(e,cr(t,1,La,!0)):[]})),Ro=Fr((function(e,t){var n=Do(t);return La(n)&&(n=i),La(e)?ir(e,cr(t,1,La,!0),Ji(n,2)):[]})),ko=Fr((function(e,t){var n=Do(t);return La(n)&&(n=i),La(e)?ir(e,cr(t,1,La,!0),i,n):[]}));function To(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ts(n);return i<0&&(i=pn(r+i,0)),Tt(e,Ji(t,3),i)}function No(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return i!==n&&(o=ts(n),o=n<0?pn(r+o,0):hn(o,r-1)),Tt(e,Ji(t,3),o,!0)}function xo(e){return null!=e&&e.length?cr(e,1):[]}function Co(e){return e&&e.length?e[0]:i}var Lo=Fr((function(e){var t=Ot(e,ai);return t.length&&t[0]===e[0]?wr(t):[]})),Mo=Fr((function(e){var t=Do(e),n=Ot(e,ai);return t===Do(n)?t=i:n.pop(),n.length&&n[0]===e[0]?wr(n,Ji(t,2)):[]})),jo=Fr((function(e){var t=Do(e),n=Ot(e,ai);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?wr(n,i,t):[]}));function Do(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Uo=Fr($o);function $o(e,t){return e&&e.length&&t&&t.length?Ur(e,t):e}var Vo=Gi((function(e,t){var n=null==e?0:e.length,r=Qn(e,t);return $r(e,Ot(t,(function(e){return ao(e,n)?+e:e})).sort(hi)),r}));function Bo(e){return null==e?e:yn.call(e)}var Fo=Fr((function(e){return Qr(cr(e,1,La,!0))})),Zo=Fr((function(e){var t=Do(e);return La(t)&&(t=i),Qr(cr(e,1,La,!0),Ji(t,2))})),Go=Fr((function(e){var t=Do(e);return t="function"==typeof t?t:i,Qr(cr(e,1,La,!0),i,t)}));function qo(e){if(!e||!e.length)return[];var t=0;return e=Et(e,(function(e){if(La(e))return t=pn(e.length,t),!0})),$t(t,(function(t){return Ot(e,Mt(t))}))}function Ho(e,t){if(!e||!e.length)return[];var n=qo(e);return null==t?n:Ot(n,(function(e){return vt(t,i,e)}))}var zo=Fr((function(e,t){return La(e)?ir(e,t):[]})),Wo=Fr((function(e){return ii(Et(e,La))})),Yo=Fr((function(e){var t=Do(e);return La(t)&&(t=i),ii(Et(e,La),Ji(t,2))})),Jo=Fr((function(e){var t=Do(e);return t="function"==typeof t?t:i,ii(Et(e,La),i,t)})),Ko=Fr(qo),Xo=Fr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,Ho(e,n)}));function Qo(e){var t=Mn(e);return t.__chain__=!0,t}function ea(e,t){return t(e)}var ta=Gi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Qn(t,e)};return!(t>1)&&!this.__actions__.length&&r instanceof $n&&ao(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ea,args:[o],thisArg:i}),new Un(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)})),na=bi((function(e,t,n){xe.call(e,n)?++e[n]:Xn(e,n,1)})),ra=Ii(To),ia=Ii(No);function oa(e,t){return(Na(e)?yt:or)(e,Ji(t,3))}function aa(e,t){return(Na(e)?function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:ar)(e,Ji(t,3))}var sa=bi((function(e,t,n){xe.call(e,n)?e[n].push(t):Xn(e,n,[t])})),ua=Fr((function(e,t,n){var r=-1,i="function"==typeof t,o=Ca(e)?ye(e.length):[];return or(e,(function(e){o[++r]=i?vt(t,e,n):Or(e,t,n)})),o})),la=bi((function(e,t,n){Xn(e,n,t)}));function ca(e,t){return(Na(e)?Ot:Nr)(e,Ji(t,3))}var fa=bi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),da=Fr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&so(e,t[0],t[1])?t=[]:n>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),jr(e,cr(t,1),[])})),pa=Rt||function(){return it.Date.now()};function ha(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,$i(e,128,i,i,i,i,t)}function ga(e,t){var n;if("function"!=typeof t)throw new Ie(o);return e=ts(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var va=Fr((function(e,t,n){var r=1;if(n.length){var i=Xt(n,Yi(va));r|=32}return $i(e,r,t,n,i)})),ma=Fr((function(e,t,n){var r=3;if(n.length){var i=Xt(n,Yi(ma));r|=32}return $i(t,r,e,n,i)}));function ya(e,t,n){var r,a,s,u,l,c,f=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw new Ie(o);function g(t){var n=r,o=a;return r=a=i,f=t,u=e.apply(o,n)}function v(e){var n=e-c;return i===c||n>=t||n<0||p&&e-f>=s}function m(){var e,n=pa();if(v(n))return y(n);l=yo(m,(e=t-(n-c),p?hn(e,s-(n-f)):e))}function y(e){return l=i,h&&r?g(e):(r=a=i,u)}function b(){var e,n=pa(),o=v(n);if(r=arguments,a=this,c=n,o){if(i===l)return f=e=c,l=yo(m,t),d?g(e):u;if(p)return ci(l),l=yo(m,t),g(c)}return i===l&&(l=yo(m,t)),u}return t=rs(t)||0,Ba(n)&&(d=!!n.leading,s=(p="maxWait"in n)?pn(rs(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),b.cancel=function(){i!==l&&ci(l),f=0,r=c=a=l=i},b.flush=function(){return i===l?u:y(pa())},b}var ba=Fr((function(e,t){return rr(e,1,t)})),Ea=Fr((function(e,t,n){return rr(e,rs(t)||0,n)}));function _a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(_a.Cache||Fn),n}function wa(e){if("function"!=typeof e)throw new Ie(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}_a.Cache=Fn;var Oa=Fr((function(e,t){var n=(t=1==t.length&&Na(t[0])?Ot(t[0],Bt(Ji())):Ot(cr(t,1),Bt(Ji()))).length;return Fr((function(r){for(var i=-1,o=hn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return vt(e,this,r)}))})),Aa=Fr((function(e,t){var n=Xt(t,Yi(Aa));return $i(e,32,i,t,n)})),Sa=Fr((function(e,t){var n=Xt(t,Yi(Sa));return $i(e,64,i,t,n)})),Ia=Gi((function(e,t){return $i(e,256,i,i,i,t)}));function Pa(e,t){return e===t||e!=e&&t!=t}var Ra=Li(br),ka=Li((function(e,t){return e>=t})),Ta=Ar(function(){return arguments}())?Ar:function(e){return Fa(e)&&xe.call(e,"callee")&&!Qe.call(e,"callee")},Na=ye.isArray,xa=ct?Bt(ct):function(e){return Fa(e)&&yr(e)==P};function Ca(e){return null!=e&&Va(e.length)&&!Ua(e)}function La(e){return Fa(e)&&Ca(e)}var Ma=ln||ru,ja=ft?Bt(ft):function(e){return Fa(e)&&yr(e)==h};function Da(e){if(!Fa(e))return!1;var t=yr(e);return t==g||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!qa(e)}function Ua(e){if(!Ba(e))return!1;var t=yr(e);return t==v||t==m||"[object AsyncFunction]"==t||"[object Proxy]"==t}function $a(e){return"number"==typeof e&&e==ts(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ba(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Fa(e){return null!=e&&"object"==typeof e}var Za=dt?Bt(dt):function(e){return Fa(e)&&no(e)==y};function Ga(e){return"number"==typeof e||Fa(e)&&yr(e)==b}function qa(e){if(!Fa(e)||yr(e)!=E)return!1;var t=qe(e);if(null===t)return!0;var n=xe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==je}var Ha=pt?Bt(pt):function(e){return Fa(e)&&yr(e)==w},za=ht?Bt(ht):function(e){return Fa(e)&&no(e)==O};function Wa(e){return"string"==typeof e||!Na(e)&&Fa(e)&&yr(e)==A}function Ya(e){return"symbol"==typeof e||Fa(e)&&yr(e)==S}var Ja=gt?Bt(gt):function(e){return Fa(e)&&Va(e.length)&&!!Ke[yr(e)]},Ka=Li(Tr),Xa=Li((function(e,t){return e<=t}));function Qa(e){if(!e)return[];if(Ca(e))return Wa(e)?tn(e):mi(e);if(ot&&e[ot])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[ot]());var t=no(e);return(t==y?Jt:t==O?Qt:Ps)(e)}function es(e){return e?(e=rs(e))===u||e===-u?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ts(e){var t=es(e),n=t%1;return t==t?n?t-n:t:0}function ns(e){return e?er(ts(e),0,4294967295):0}function rs(e){if("number"==typeof e)return e;if(Ya(e))return l;if(Ba(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ba(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var n=ce.test(e);return n||de.test(e)?tt(e.slice(2),n?2:8):le.test(e)?l:+e}function is(e){return yi(e,bs(e))}function os(e){return null==e?"":Xr(e)}var as=Ei((function(e,t){if(fo(t)||Ca(t))yi(t,ys(t),e);else for(var n in t)xe.call(t,n)&&Wn(e,n,t[n])})),ss=Ei((function(e,t){yi(t,bs(t),e)})),us=Ei((function(e,t,n,r){yi(t,bs(t),e,r)})),ls=Ei((function(e,t,n,r){yi(t,ys(t),e,r)})),cs=Gi(Qn),fs=Fr((function(e,t){e=Oe(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&so(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=bs(a),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(i===f||Pa(f,ke[c])&&!xe.call(e,c))&&(e[c]=a[c])}return e})),ds=Fr((function(e){return e.push(i,Bi),vt(_s,i,e)}));function ps(e,t,n){var r=null==e?i:vr(e,t);return i===r?n:r}function hs(e,t){return null!=e&&ro(e,t,_r)}var gs=ki((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),e[t]=n}),Bs(Gs)),vs=ki((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Me.call(t)),xe.call(e,t)?e[t].push(n):e[t]=[n]}),Ji),ms=Fr(Or);function ys(e){return Ca(e)?qn(e):kr(e)}function bs(e){return Ca(e)?qn(e,!0):function(e){if(!Ba(e))return function(e){var t=[];if(null!=e)for(var n in Oe(e))t.push(n);return t}(e);var t=fo(e),n=[];for(var r in e)"constructor"==r&&(t||!xe.call(e,r))||n.push(r);return n}(e)}var Es=Ei((function(e,t,n){Lr(e,t,n)})),_s=Ei((function(e,t,n,r){Lr(e,t,n,r)})),ws=Gi((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ot(t,(function(t){return t=ui(t,e),r||(r=t.length>1),t})),yi(e,Hi(e),n),r&&(n=tr(n,7,Fi));for(var i=t.length;i--;)ei(n,t[i]);return n})),Os=Gi((function(e,t){return null==e?{}:Dr(e,t,(function(t,n){return hs(e,n)}))}));function As(e,t){if(null==e)return{};var n=Ot(Hi(e),(function(e){return[e]}));return t=Ji(t),Dr(e,n,(function(e,n){return t(e,n[0])}))}var Ss=Ui(ys),Is=Ui(bs);function Ps(e){return null==e?[]:Ft(e,ys(e))}var Rs=Ai((function(e,t,n){return t=t.toLowerCase(),e+(n?ks(t):t)}));function ks(e){return Ds(os(e).toLowerCase())}function Ts(e){return(e=os(e))&&e.replace(he,Ht).replace(Ge,"")}var Ns=Ai((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),xs=Ai((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Cs=Oi("toLowerCase"),Ls=Ai((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Ms=Ai((function(e,t,n){return e+(n?" ":"")+Ds(t)})),js=Ai((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ds=Oi("toUpperCase");function Us(e,t,n){var r;return e=os(e),i===(t=n?i:t)?(r=e,We.test(r)?e.match(He)||[]:e.match(ie)||[]):e.match(t)||[]}var $s=Fr((function(e,t){try{return vt(e,i,t)}catch(e){return Da(e)?e:new Ee(e)}})),Vs=Gi((function(e,t){return yt(t,(function(t){Xn(e,t=Ao(t),va(e[t],e))})),e}));function Bs(e){return function(){return e}}var Fs=Pi(),Zs=Pi(!0);function Gs(e){return e}function qs(e){return Rr("function"==typeof e?e:tr(e,1))}var Hs=Fr((function(e,t){return function(n){return Or(n,e,t)}})),zs=Fr((function(e,t){return function(n){return Or(e,n,t)}}));function Ws(e,t,n){var r=ys(t),i=gr(t,r);null!=n||Ba(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=gr(t,ys(t)));var o=!(Ba(n)&&"chain"in n&&!n.chain),a=Ua(e);return yt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=mi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,At([this.value()],arguments))})})),e}function Ys(){}var Js=Ni(Ot),Ks=Ni(bt),Xs=Ni(Pt);function Qs(e){return uo(e)?Mt(Ao(e)):function(t){return vr(t,e)}}var eu=Ci(),tu=Ci(!0);function nu(){return[]}function ru(){return!1}var iu=Ti((function(e,t){return e+t}),0),ou=ji("ceil"),au=Ti((function(e,t){return e/t}),1),su=ji("floor"),uu=Ti((function(e,t){return e*t}),1),lu=ji("round"),cu=Ti((function(e,t){return e-t}),0);return Mn.after=function(e,t){if("function"!=typeof t)throw new Ie(o);return e=ts(e),function(){if(--e<1)return t.apply(this,arguments)}},Mn.ary=ha,Mn.assign=as,Mn.assignIn=ss,Mn.assignInWith=us,Mn.assignWith=ls,Mn.at=cs,Mn.before=ga,Mn.bind=va,Mn.bindAll=Vs,Mn.bindKey=ma,Mn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Na(e)?e:[e]},Mn.chain=Qo,Mn.chunk=function(e,t,n){t=(n?so(e,t,n):i===t)?1:pn(ts(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,a=0,s=ye(an(r/t));o<r;)s[a++]=Hr(e,o,o+=t);return s},Mn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Mn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ye(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return At(Na(n)?mi(n):[n],cr(t,1))},Mn.cond=function(e){var t=null==e?0:e.length,n=Ji();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Ie(o);return[n(e[0]),e[1]]})):[],Fr((function(n){for(var r=-1;++r<t;){var i=e[r];if(vt(i[0],this,n))return vt(i[1],this,n)}}))},Mn.conforms=function(e){var t,n;return n=ys(t=tr(e,1)),function(e){return nr(e,t,n)}},Mn.constant=Bs,Mn.countBy=na,Mn.create=function(e,t){var n=jn(e);return null==t?n:Kn(n,t)},Mn.curry=function e(t,n,r){var o=$i(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Mn.curryRight=function e(t,n,r){var o=$i(t,16,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Mn.debounce=ya,Mn.defaults=fs,Mn.defaultsDeep=ds,Mn.defer=ba,Mn.delay=Ea,Mn.difference=Po,Mn.differenceBy=Ro,Mn.differenceWith=ko,Mn.drop=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=n||i===t?1:ts(t))<0?0:t,r):[]},Mn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,0,(t=r-(t=n||i===t?1:ts(t)))<0?0:t):[]},Mn.dropRightWhile=function(e,t){return e&&e.length?ni(e,Ji(t,3),!0,!0):[]},Mn.dropWhile=function(e,t){return e&&e.length?ni(e,Ji(t,3),!0):[]},Mn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&so(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=ts(n))<0&&(n=-n>o?0:o+n),(r=i===r||r>o?o:ts(r))<0&&(r+=o),r=n>r?0:ns(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Mn.filter=function(e,t){return(Na(e)?Et:lr)(e,Ji(t,3))},Mn.flatMap=function(e,t){return cr(ca(e,t),1)},Mn.flatMapDeep=function(e,t){return cr(ca(e,t),u)},Mn.flatMapDepth=function(e,t,n){return n=i===n?1:ts(n),cr(ca(e,t),n)},Mn.flatten=xo,Mn.flattenDeep=function(e){return null!=e&&e.length?cr(e,u):[]},Mn.flattenDepth=function(e,t){return null!=e&&e.length?cr(e,t=i===t?1:ts(t)):[]},Mn.flip=function(e){return $i(e,512)},Mn.flow=Fs,Mn.flowRight=Zs,Mn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Mn.functions=function(e){return null==e?[]:gr(e,ys(e))},Mn.functionsIn=function(e){return null==e?[]:gr(e,bs(e))},Mn.groupBy=sa,Mn.initial=function(e){return null!=e&&e.length?Hr(e,0,-1):[]},Mn.intersection=Lo,Mn.intersectionBy=Mo,Mn.intersectionWith=jo,Mn.invert=gs,Mn.invertBy=vs,Mn.invokeMap=ua,Mn.iteratee=qs,Mn.keyBy=la,Mn.keys=ys,Mn.keysIn=bs,Mn.map=ca,Mn.mapKeys=function(e,t){var n={};return t=Ji(t,3),pr(e,(function(e,r,i){Xn(n,t(e,r,i),e)})),n},Mn.mapValues=function(e,t){var n={};return t=Ji(t,3),pr(e,(function(e,r,i){Xn(n,r,t(e,r,i))})),n},Mn.matches=function(e){return xr(tr(e,1))},Mn.matchesProperty=function(e,t){return Cr(e,tr(t,1))},Mn.memoize=_a,Mn.merge=Es,Mn.mergeWith=_s,Mn.method=Hs,Mn.methodOf=zs,Mn.mixin=Ws,Mn.negate=wa,Mn.nthArg=function(e){return e=ts(e),Fr((function(t){return Mr(t,e)}))},Mn.omit=ws,Mn.omitBy=function(e,t){return As(e,wa(Ji(t)))},Mn.once=function(e){return ga(2,e)},Mn.orderBy=function(e,t,n,r){return null==e?[]:(Na(t)||(t=null==t?[]:[t]),Na(n=r?i:n)||(n=null==n?[]:[n]),jr(e,t,n))},Mn.over=Js,Mn.overArgs=Oa,Mn.overEvery=Ks,Mn.overSome=Xs,Mn.partial=Aa,Mn.partialRight=Sa,Mn.partition=fa,Mn.pick=Os,Mn.pickBy=As,Mn.property=Qs,Mn.propertyOf=function(e){return function(t){return null==e?i:vr(e,t)}},Mn.pull=Uo,Mn.pullAll=$o,Mn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ur(e,t,Ji(n,2)):e},Mn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ur(e,t,i,n):e},Mn.pullAt=Vo,Mn.range=eu,Mn.rangeRight=tu,Mn.rearg=Ia,Mn.reject=function(e,t){return(Na(e)?Et:lr)(e,wa(Ji(t,3)))},Mn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ji(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return $r(e,i),n},Mn.rest=function(e,t){if("function"!=typeof e)throw new Ie(o);return Fr(e,t=i===t?t:ts(t))},Mn.reverse=Bo,Mn.sampleSize=function(e,t,n){return t=(n?so(e,t,n):i===t)?1:ts(t),(Na(e)?function(e,t){return wo(mi(e),er(t,0,e.length))}:function(e,t){var n=Ps(e);return wo(n,er(t,0,n.length))})(e,t)},Mn.set=function(e,t,n){return null==e?e:Zr(e,t,n)},Mn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Zr(e,t,n,r)},Mn.shuffle=function(e){return(Na(e)?function(e){return wo(mi(e))}:function(e){return wo(Ps(e))})(e)},Mn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&so(e,t,n)?(t=0,n=r):(t=null==t?0:ts(t),n=i===n?r:ts(n)),Hr(e,t,n)):[]},Mn.sortBy=da,Mn.sortedUniq=function(e){return e&&e.length?Jr(e):[]},Mn.sortedUniqBy=function(e,t){return e&&e.length?Jr(e,Ji(t,2)):[]},Mn.split=function(e,t,n){return n&&"number"!=typeof n&&so(e,t,n)&&(t=n=i),(n=i===n?4294967295:n>>>0)?(e=os(e))&&("string"==typeof t||null!=t&&!Ha(t))&&!(t=Xr(t))&&Yt(e)?li(tn(e),0,n):e.split(t,n):[]},Mn.spread=function(e,t){if("function"!=typeof e)throw new Ie(o);return t=null==t?0:pn(ts(t),0),Fr((function(n){var r=n[t],i=li(n,0,t);return r&&At(i,r),vt(e,this,i)}))},Mn.tail=function(e){var t=null==e?0:e.length;return t?Hr(e,1,t):[]},Mn.take=function(e,t,n){return e&&e.length?Hr(e,0,(t=n||i===t?1:ts(t))<0?0:t):[]},Mn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Hr(e,(t=r-(t=n||i===t?1:ts(t)))<0?0:t,r):[]},Mn.takeRightWhile=function(e,t){return e&&e.length?ni(e,Ji(t,3),!1,!0):[]},Mn.takeWhile=function(e,t){return e&&e.length?ni(e,Ji(t,3)):[]},Mn.tap=function(e,t){return t(e),e},Mn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ie(o);return Ba(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ya(e,t,{leading:r,maxWait:t,trailing:i})},Mn.thru=ea,Mn.toArray=Qa,Mn.toPairs=Ss,Mn.toPairsIn=Is,Mn.toPath=function(e){return Na(e)?Ot(e,Ao):Ya(e)?[e]:mi(Oo(os(e)))},Mn.toPlainObject=is,Mn.transform=function(e,t,n){var r=Na(e),i=r||Ma(e)||Ja(e);if(t=Ji(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ba(e)&&Ua(o)?jn(qe(e)):{}}return(i?yt:pr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Mn.unary=function(e){return ha(e,1)},Mn.union=Fo,Mn.unionBy=Zo,Mn.unionWith=Go,Mn.uniq=function(e){return e&&e.length?Qr(e):[]},Mn.uniqBy=function(e,t){return e&&e.length?Qr(e,Ji(t,2)):[]},Mn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?Qr(e,i,t):[]},Mn.unset=function(e,t){return null==e||ei(e,t)},Mn.unzip=qo,Mn.unzipWith=Ho,Mn.update=function(e,t,n){return null==e?e:ti(e,t,si(n))},Mn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ti(e,t,si(n),r)},Mn.values=Ps,Mn.valuesIn=function(e){return null==e?[]:Ft(e,bs(e))},Mn.without=zo,Mn.words=Us,Mn.wrap=function(e,t){return Aa(si(t),e)},Mn.xor=Wo,Mn.xorBy=Yo,Mn.xorWith=Jo,Mn.zip=Ko,Mn.zipObject=function(e,t){return oi(e||[],t||[],Wn)},Mn.zipObjectDeep=function(e,t){return oi(e||[],t||[],Zr)},Mn.zipWith=Xo,Mn.entries=Ss,Mn.entriesIn=Is,Mn.extend=ss,Mn.extendWith=us,Ws(Mn,Mn),Mn.add=iu,Mn.attempt=$s,Mn.camelCase=Rs,Mn.capitalize=ks,Mn.ceil=ou,Mn.clamp=function(e,t,n){return i===n&&(n=t,t=i),i!==n&&(n=(n=rs(n))==n?n:0),i!==t&&(t=(t=rs(t))==t?t:0),er(rs(e),t,n)},Mn.clone=function(e){return tr(e,4)},Mn.cloneDeep=function(e){return tr(e,5)},Mn.cloneDeepWith=function(e,t){return tr(e,5,t="function"==typeof t?t:i)},Mn.cloneWith=function(e,t){return tr(e,4,t="function"==typeof t?t:i)},Mn.conformsTo=function(e,t){return null==t||nr(e,t,ys(t))},Mn.deburr=Ts,Mn.defaultTo=function(e,t){return null==e||e!=e?t:e},Mn.divide=au,Mn.endsWith=function(e,t,n){e=os(e),t=Xr(t);var r=e.length,o=n=i===n?r:er(ts(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Mn.eq=Pa,Mn.escape=function(e){return(e=os(e))&&G.test(e)?e.replace(F,zt):e},Mn.escapeRegExp=function(e){return(e=os(e))&&X.test(e)?e.replace(K,"\\$&"):e},Mn.every=function(e,t,n){var r=Na(e)?bt:sr;return n&&so(e,t,n)&&(t=i),r(e,Ji(t,3))},Mn.find=ra,Mn.findIndex=To,Mn.findKey=function(e,t){return kt(e,Ji(t,3),pr)},Mn.findLast=ia,Mn.findLastIndex=No,Mn.findLastKey=function(e,t){return kt(e,Ji(t,3),hr)},Mn.floor=su,Mn.forEach=oa,Mn.forEachRight=aa,Mn.forIn=function(e,t){return null==e?e:fr(e,Ji(t,3),bs)},Mn.forInRight=function(e,t){return null==e?e:dr(e,Ji(t,3),bs)},Mn.forOwn=function(e,t){return e&&pr(e,Ji(t,3))},Mn.forOwnRight=function(e,t){return e&&hr(e,Ji(t,3))},Mn.get=ps,Mn.gt=Ra,Mn.gte=ka,Mn.has=function(e,t){return null!=e&&ro(e,t,Er)},Mn.hasIn=hs,Mn.head=Co,Mn.identity=Gs,Mn.includes=function(e,t,n,r){e=Ca(e)?e:Ps(e),n=n&&!r?ts(n):0;var i=e.length;return n<0&&(n=pn(i+n,0)),Wa(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Nt(e,t,n)>-1},Mn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ts(n);return i<0&&(i=pn(r+i,0)),Nt(e,t,i)},Mn.inRange=function(e,t,n){var r,o,a;return t=es(t),i===n?(n=t,t=0):n=es(n),(r=e=rs(e))>=hn(o=t,a=n)&&r<pn(o,a)},Mn.invoke=ms,Mn.isArguments=Ta,Mn.isArray=Na,Mn.isArrayBuffer=xa,Mn.isArrayLike=Ca,Mn.isArrayLikeObject=La,Mn.isBoolean=function(e){return!0===e||!1===e||Fa(e)&&yr(e)==p},Mn.isBuffer=Ma,Mn.isDate=ja,Mn.isElement=function(e){return Fa(e)&&1===e.nodeType&&!qa(e)},Mn.isEmpty=function(e){if(null==e)return!0;if(Ca(e)&&(Na(e)||"string"==typeof e||"function"==typeof e.splice||Ma(e)||Ja(e)||Ta(e)))return!e.length;var t=no(e);if(t==y||t==O)return!e.size;if(fo(e))return!kr(e).length;for(var n in e)if(xe.call(e,n))return!1;return!0},Mn.isEqual=function(e,t){return Sr(e,t)},Mn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return i===r?Sr(e,t,i,n):!!r},Mn.isError=Da,Mn.isFinite=function(e){return"number"==typeof e&&cn(e)},Mn.isFunction=Ua,Mn.isInteger=$a,Mn.isLength=Va,Mn.isMap=Za,Mn.isMatch=function(e,t){return e===t||Ir(e,t,Xi(t))},Mn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Ir(e,t,Xi(t),n)},Mn.isNaN=function(e){return Ga(e)&&e!=+e},Mn.isNative=function(e){if(co(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(e)},Mn.isNil=function(e){return null==e},Mn.isNull=function(e){return null===e},Mn.isNumber=Ga,Mn.isObject=Ba,Mn.isObjectLike=Fa,Mn.isPlainObject=qa,Mn.isRegExp=Ha,Mn.isSafeInteger=function(e){return $a(e)&&e>=-9007199254740991&&e<=9007199254740991},Mn.isSet=za,Mn.isString=Wa,Mn.isSymbol=Ya,Mn.isTypedArray=Ja,Mn.isUndefined=function(e){return i===e},Mn.isWeakMap=function(e){return Fa(e)&&no(e)==I},Mn.isWeakSet=function(e){return Fa(e)&&"[object WeakSet]"==yr(e)},Mn.join=function(e,t){return null==e?"":fn.call(e,t)},Mn.kebabCase=Ns,Mn.last=Do,Mn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return i!==n&&(o=(o=ts(n))<0?pn(r+o,0):hn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--&&e[r]!==t;);return r}(e,t,o):Tt(e,Ct,o,!0)},Mn.lowerCase=xs,Mn.lowerFirst=Cs,Mn.lt=Ka,Mn.lte=Xa,Mn.max=function(e){return e&&e.length?ur(e,Gs,br):i},Mn.maxBy=function(e,t){return e&&e.length?ur(e,Ji(t,2),br):i},Mn.mean=function(e){return Lt(e,Gs)},Mn.meanBy=function(e,t){return Lt(e,Ji(t,2))},Mn.min=function(e){return e&&e.length?ur(e,Gs,Tr):i},Mn.minBy=function(e,t){return e&&e.length?ur(e,Ji(t,2),Tr):i},Mn.stubArray=nu,Mn.stubFalse=ru,Mn.stubObject=function(){return{}},Mn.stubString=function(){return""},Mn.stubTrue=function(){return!0},Mn.multiply=uu,Mn.nth=function(e,t){return e&&e.length?Mr(e,ts(t)):i},Mn.noConflict=function(){return it._===this&&(it._=De),this},Mn.noop=Ys,Mn.now=pa,Mn.pad=function(e,t,n){e=os(e);var r=(t=ts(t))?en(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return xi(sn(i),n)+e+xi(an(i),n)},Mn.padEnd=function(e,t,n){e=os(e);var r=(t=ts(t))?en(e):0;return t&&r<t?e+xi(t-r,n):e},Mn.padStart=function(e,t,n){e=os(e);var r=(t=ts(t))?en(e):0;return t&&r<t?xi(t-r,n)+e:e},Mn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),vn(os(e).replace(Q,""),t||0)},Mn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&so(e,t,n)&&(t=n=i),i===n&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),i===e&&i===t?(e=0,t=1):(e=es(e),i===t?(t=e,e=0):t=es(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=mn();return hn(e+o*(t-e+et("1e-"+((o+"").length-1))),t)}return Vr(e,t)},Mn.reduce=function(e,t,n){var r=Na(e)?St:Dt,i=arguments.length<3;return r(e,Ji(t,4),n,i,or)},Mn.reduceRight=function(e,t,n){var r=Na(e)?It:Dt,i=arguments.length<3;return r(e,Ji(t,4),n,i,ar)},Mn.repeat=function(e,t,n){return t=(n?so(e,t,n):i===t)?1:ts(t),Br(os(e),t)},Mn.replace=function(){var e=arguments,t=os(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mn.result=function(e,t,n){var r=-1,o=(t=ui(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Ao(t[r])];i===a&&(r=o,a=n),e=Ua(a)?a.call(e):a}return e},Mn.round=lu,Mn.runInContext=e,Mn.sample=function(e){return(Na(e)?Hn:function(e){return Hn(Ps(e))})(e)},Mn.size=function(e){if(null==e)return 0;if(Ca(e))return Wa(e)?en(e):e.length;var t=no(e);return t==y||t==O?e.size:kr(e).length},Mn.snakeCase=Ls,Mn.some=function(e,t,n){var r=Na(e)?Pt:zr;return n&&so(e,t,n)&&(t=i),r(e,Ji(t,3))},Mn.sortedIndex=function(e,t){return Wr(e,t)},Mn.sortedIndexBy=function(e,t,n){return Yr(e,t,Ji(n,2))},Mn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Wr(e,t);if(r<n&&Pa(e[r],t))return r}return-1},Mn.sortedLastIndex=function(e,t){return Wr(e,t,!0)},Mn.sortedLastIndexBy=function(e,t,n){return Yr(e,t,Ji(n,2),!0)},Mn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Wr(e,t,!0)-1;if(Pa(e[n],t))return n}return-1},Mn.startCase=Ms,Mn.startsWith=function(e,t,n){return e=os(e),n=null==n?0:er(ts(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},Mn.subtract=cu,Mn.sum=function(e){return e&&e.length?Ut(e,Gs):0},Mn.sumBy=function(e,t){return e&&e.length?Ut(e,Ji(t,2)):0},Mn.template=function(e,t,n){var r=Mn.templateSettings;n&&so(e,t,n)&&(t=i),e=os(e),t=us({},t,r,Vi);var o,a,s=us({},t.imports,r.imports,Vi),u=ys(s),l=Ft(s,u),c=0,f=t.interpolate||ge,d="__p += '",p=Ae((t.escape||ge).source+"|"+f.source+"|"+(f===z?se:ge).source+"|"+(t.evaluate||ge).source+"|$","g"),h="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Je+"]")+"\n";e.replace(p,(function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(c,u).replace(ve,Wt),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),d+="';\n";var g=xe.call(t,"variable")&&t.variable;if(g){if(oe.test(g))throw new Ee("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(U,""):d).replace($,"$1").replace(V,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=$s((function(){return _e(u,h+"return "+d).apply(i,l)}));if(v.source=d,Da(v))throw v;return v},Mn.times=function(e,t){if((e=ts(e))<1||e>9007199254740991)return[];var n=4294967295,r=hn(e,4294967295);e-=4294967295;for(var i=$t(r,t=Ji(t));++n<e;)t(n);return i},Mn.toFinite=es,Mn.toInteger=ts,Mn.toLength=ns,Mn.toLower=function(e){return os(e).toLowerCase()},Mn.toNumber=rs,Mn.toSafeInteger=function(e){return e?er(ts(e),-9007199254740991,9007199254740991):0===e?e:0},Mn.toString=os,Mn.toUpper=function(e){return os(e).toUpperCase()},Mn.trim=function(e,t,n){if((e=os(e))&&(n||i===t))return Vt(e);if(!e||!(t=Xr(t)))return e;var r=tn(e),o=tn(t);return li(r,Gt(r,o),qt(r,o)+1).join("")},Mn.trimEnd=function(e,t,n){if((e=os(e))&&(n||i===t))return e.slice(0,nn(e)+1);if(!e||!(t=Xr(t)))return e;var r=tn(e);return li(r,0,qt(r,tn(t))+1).join("")},Mn.trimStart=function(e,t,n){if((e=os(e))&&(n||i===t))return e.replace(Q,"");if(!e||!(t=Xr(t)))return e;var r=tn(e);return li(r,Gt(r,tn(t))).join("")},Mn.truncate=function(e,t){var n=30,r="...";if(Ba(t)){var o="separator"in t?t.separator:o;n="length"in t?ts(t.length):n,r="omission"in t?Xr(t.omission):r}var a=(e=os(e)).length;if(Yt(e)){var s=tn(e);a=s.length}if(n>=a)return e;var u=n-en(r);if(u<1)return r;var l=s?li(s,0,u).join(""):e.slice(0,u);if(i===o)return l+r;if(s&&(u+=l.length-u),Ha(o)){if(e.slice(u).search(o)){var c,f=l;for(o.global||(o=Ae(o.source,os(ue.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var d=c.index;l=l.slice(0,i===d?u:d)}}else if(e.indexOf(Xr(o),u)!=u){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+r},Mn.unescape=function(e){return(e=os(e))&&Z.test(e)?e.replace(B,rn):e},Mn.uniqueId=function(e){var t=++Ce;return os(e)+t},Mn.upperCase=js,Mn.upperFirst=Ds,Mn.each=oa,Mn.eachRight=aa,Mn.first=Co,Ws(Mn,(me={},pr(Mn,(function(e,t){xe.call(Mn.prototype,t)||(me[t]=e)})),me),{chain:!1}),Mn.VERSION="4.17.21",yt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mn[e].placeholder=Mn})),yt(["drop","take"],(function(e,t){$n.prototype[e]=function(n){n=i===n?1:pn(ts(n),0);var r=this.__filtered__&&!t?new $n(this):this.clone();return r.__filtered__?r.__takeCount__=hn(n,r.__takeCount__):r.__views__.push({size:hn(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},$n.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),yt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;$n.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ji(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),yt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");$n.prototype[e]=function(){return this[n](1).value()[0]}})),yt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");$n.prototype[e]=function(){return this.__filtered__?new $n(this):this[n](1)}})),$n.prototype.compact=function(){return this.filter(Gs)},$n.prototype.find=function(e){return this.filter(e).head()},$n.prototype.findLast=function(e){return this.reverse().find(e)},$n.prototype.invokeMap=Fr((function(e,t){return"function"==typeof e?new $n(this):this.map((function(n){return Or(n,e,t)}))})),$n.prototype.reject=function(e){return this.filter(wa(Ji(e)))},$n.prototype.slice=function(e,t){e=ts(e);var n=this;return n.__filtered__&&(e>0||t<0)?new $n(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),i!==t&&(n=(t=ts(t))<0?n.dropRight(-t):n.take(t-e)),n)},$n.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},$n.prototype.toArray=function(){return this.take(4294967295)},pr($n.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Mn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Mn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof $n,l=s[0],c=u||Na(t),f=function(e){var t=o.apply(Mn,At([e],s));return r&&d?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,g=u&&!p;if(!a&&c){t=g?t:new $n(this);var v=e.apply(t,s);return v.__actions__.push({func:ea,args:[f],thisArg:i}),new Un(v,d)}return h&&g?e.apply(this,s):(v=this.thru(f),h?r?v.value()[0]:v.value():v)})})),yt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Mn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Na(i)?i:[],e)}return this[n]((function(n){return t.apply(Na(n)?n:[],e)}))}})),pr($n.prototype,(function(e,t){var n=Mn[t];if(n){var r=n.name+"";xe.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}})),In[Ri(i,2).name]=[{name:"wrapper",func:i}],$n.prototype.clone=function(){var e=new $n(this.__wrapped__);return e.__actions__=mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=mi(this.__views__),e},$n.prototype.reverse=function(){if(this.__filtered__){var e=new $n(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},$n.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Na(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=hn(t,e+a);break;case"takeRight":e=pn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,f=c.length,d=0,p=hn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return ri(e,this.__actions__);var h=[];e:for(;u--&&d<p;){for(var g=-1,v=e[l+=t];++g<f;){var m=c[g],y=m.iteratee,b=m.type,E=y(v);if(2==b)v=E;else if(!E){if(1==b)continue e;break e}}h[d++]=v}return h},Mn.prototype.at=ta,Mn.prototype.chain=function(){return Qo(this)},Mn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Mn.prototype.next=function(){i===this.__values__&&(this.__values__=Qa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Mn.prototype.plant=function(e){for(var t,n=this;n instanceof Dn;){var r=Io(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Mn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof $n){var t=e;return this.__actions__.length&&(t=new $n(this)),(t=t.reverse()).__actions__.push({func:ea,args:[Bo],thisArg:i}),new Un(t,this.__chain__)}return this.thru(Bo)},Mn.prototype.toJSON=Mn.prototype.valueOf=Mn.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Mn.prototype.first=Mn.prototype.head,ot&&(Mn.prototype[ot]=function(){return this}),Mn}();it._=on,i!==(r=function(){return on}.call(t,n,t,e))&&(e.exports=r)}.call(this)},88306:function(e,t,n){var r=n(83369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},36968:function(e,t,n){var r=n(10611);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},95062:function(e){e.exports=function(){return!1}},23493:function(e,t,n){var r=n(23279),i=n(13218);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},14841:function(e,t,n){var r=n(27561),i=n(13218),o=n(33448),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):a.test(e)?NaN:+e}},79833:function(e,t,n){var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},83454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(77663)},6840:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(10333)}])},61036:function(e,t,n){"use strict";n.d(t,{Bf:function(){return y},Fc:function(){return b},HX:function(){return c},J2:function(){return m},Kt:function(){return f},Qb:function(){return h},Zo:function(){return p},je:function(){return g},sA:function(){return E},x9:function(){return u},xn:function(){return v}});var r=n(34853),i=n(70247),o=n(83928),a=n(80535),s=n(77497);function u(e){let{days:t=0,hours:n=0,minutes:r=0,seconds:i=0,ms:o=0}=e;return o+1e3*i+6e4*r+36e5*n+864e5*t}let l={};async function c(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u({minutes:2}),i=(null===(n=l[e])||void 0===n?void 0:n.timestamp)||0;if(Date.now()-i>r){let n=await t(),r=Date.now();l[e]={result:n,timestamp:r}}return l[e].result}function f(e){var t,n;let i=null==e||null===(t=e.displayInfo)||void 0===t?void 0:t.format;return i&&(i=r.ZP.t(i,{ns:"ui"}),null===(n=e.displayInfo.values)||void 0===n||n.forEach(((e,t)=>{i=i.replace("{".concat(t,"}"),null==e?void 0:e.toString())}))),i}let d=(e,t,n,r)=>{let i="";return e>0&&(i+="".concat(e,"d ")),t>0&&(i+="".concat(t,"h ")),n>0&&(i+="".concat(n,"m ")),void 0!==r&&(i+="".concat(r,"s")),i};function p(e){if(e<0||"number"!=typeof e||Number.isNaN(e))return"...";if(e<=90)return d(0,0,Math.floor(e/60),Math.floor(e%60));{let t=Math.round(e/60);return d(Math.floor(t/1440),Math.floor(t/60%24),Math.floor(t%60))}}function h(e){switch(e){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV";case 5:return"V"}return e.toString()}function g(e){return e[0].toUpperCase()+e.slice(1)}function v(e,t){let n=new Map;return e.forEach((e=>{n.set(e[t].toString(),e)})),n}function m(e,t){let n={width:32,height:32,image:null==e?void 0:e.image,scale:3};var r,a,s,u;if(e&&t&&(null===(r=e.onUse)||void 0===r?void 0:r.placeObject)){let t=i.Z.getGameObject(e.onUse.placeObject);(null==t||null===(a=t.sprite)||void 0===a?void 0:a.image)&&(n.image=t.sprite.image,n.width=null===(s=t.sprite.size)||void 0===s?void 0:s.width,n.height=null===(u=t.sprite.size)||void 0===u?void 0:u.height,n.height<=40&&n.width<=40?n.scale=3:n.height<=90&&n.width<=90?n.scale=2:n.scale=1)}return n.image=(0,o.b7)(n.image),n}let y=(e,t)=>{navigator.share?navigator.share({...t?{title:t}:{},url:e}).then((()=>{})).catch(console.error):navigator.clipboard&&(navigator.clipboard.writeText(e),a.e.set(s.W_,[{source:"other",text:{id:"Link Copied to Clipboard"}}]))},b=e=>null==e?void 0:e.find((e=>/rent/gi.test(e))),E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return"".concat(null==e?void 0:e.replace(/\)|\(/g,"_"),"_").concat(t)}},42379:function(e,t,n){"use strict";n.d(t,{LB:function(){return o},Yx:function(){return i},oQ:function(){return r}});let r=!0,i=!1,o="".concat("https","://").concat("pixels-server.pixels.xyz")},71343:function(e,t,n){"use strict";var r,i;n.d(t,{m:function(){return r}}),(i=r||(r={})).timeSync="timeSync",i.joinRoom="joinRoom",i.sendMapLibrary="sendMapLibrary",i.moveSelfPlayer="mv",i.swapOrCombineInventorySlots="swapOrCombineInventorySlots",i.changeEquipmentBar="changeEquipmentBar",i.addMessageToChat="addMessageToChat",i.setTypingState="setTypingState",i.setTosAccepted="setTosAccepted",i.playerNotification="playerNotification",i.receiveMessageInChat="receiveMessageInChat",i.setAvatar="setAvatar",i.setPet="setPet",i.setPetName="setPetName",i.useItem="ui",i.useItemError="useItemError",i.talkToNPC="talkToNPC",i.clickEntity="clickEntity",i.closeDialog="closeDialog",i.collideWithObject="collideWithObject",i.teleportPlayer="teleportPlayer",i.timerCheck="timerCheck",i.collectMailboxItem="collectMailboxItem",i.fetchMailbox="fetchMailbox",i.subscribe="subscribe",i.rentFarm="rentFarm",i.buyStoreItem="buyStoreItem",i.sellStoreItem="sellStoreItem",i.updateMapMembers="updateMapMembers",i.updateRolesAndPermissions="updateRolesAndPermissions",i.updateRoomRestrictions="updateRoomRestrictions",i.updateMapListing="updateMapListing",i.claimNftMap="claimNftMap",i.updateRoomName="updateRoomName",i.updatePlayer="updatePlayer",i.bookmarkMap="bookmarkMap",i.buildObject="buildObject",i.buildTile="buildTile",i.buildEntity="buildEntity",i.upgradeFarm="upgradeFarm",i.presentUI="presentUI",i.clientCmd="clientCmd",i.playerAction="playerAction",i.clientTrigger="clientTrigger",i.trade="trade",i.marketplace="marketplace",i.reportPlayer="reportPlayer",i.mintUgc="mintUgc",i.findNFTs="findNFTs",i.sellOrders="sellOrders",i.sellOrderFill="sellOrderFill",i.sellOrderFetch="sellOrderFetch",i.sellOrderReset="sellOrderReset"},79274:function(e,t,n){"use strict";var r,i;n.d(t,{h3:function(){return o},nA:function(){return a},oi:function(){return s}}),(i=r||(r={})).forge="forge",i.cooking="cooking",i.woodwork="woodwork",i.windmill="windmill",i.textile_mill="textile_mill",i.kiln="kiln",i.quantum_recombinator="quantum_recombinator",i.winery="winery",i.industries="industries",i.gridcraftManufacturing="gridcraftManufacturing",i.gridcraftPacking="gridcraftPacking",i.pattyMaker="pattyMaker",i.foodProcessor="foodProcessor",i.grill="grill",i.assemblyTable="assemblyTable",i.deepFryer="deepFryer";let o=Object.keys(r),a=["farming","forestry","cooking","mining","woodwork","metalworking","stoneshaping","petcare","business","exploration","granger","ceramicist","beekeeping","textiler","aviculture","redifferentiator","slugger","winemaking","fishing"],s={forge:"ceramicist",cooking:"cooking",woodwork:"woodwork",windmill:"granger",textile_mill:"textiler",kiln:"ceramicist",quantum_recombinator:"redifferentiator",winery:"winemaking",industries:"redifferentiator",gridcraftManufacturing:"business",gridcraftPacking:"business",pattyMaker:"cooking",foodProcessor:"cooking",grill:"cooking",assemblyTable:"cooking",deepFryer:"cooking"}},51465:function(e,t,n){"use strict";var r,i;n.d(t,{m:function(){return r}}),(i=r||(r={}))[i.loop=1]="loop",i[i.click=2]="click",i[i.approach=4]="approach",i[i.approachloop=5]="approachloop"},64939:function(e,t,n){"use strict";n.d(t,{m3:function(){return r.m},vn:function(){return i},jK:function(){return o}});var r=n(51465);let i=3,o=1e3},16562:function(e,t,n){"use strict";let r;n.d(t,{l:function(){return A}});var i,o,a=n(7767),s=n(34377),u=n(71343),l=n(70247),c=n(60604),f=n(23493),d=n.n(f);let p=class{constructor(e,t){this.command=e,this.payload=t}},h=class{pushNewObject(e){for(let n=0;n<this.queue.length;n++){var t;let r=this.queue[n];if(r.command===u.m.buildObject&&"remove"===r.payload.type&&!(null===(t=r.payload.remove)||void 0===t?void 0:t._id)){r.payload.remove._id=e;break}console.log("no match")}}pushNewEntity(e){for(let n=0;n<this.queue.length;n++){var t;let r=this.queue[n];if(r.command===u.m.buildEntity&&"remove"===r.payload.action&&!(null===(t=r.payload.remove)||void 0===t?void 0:t._id)){r.payload.remove._id=e;break}}}popObject(){return this.queue.pop()}pushObject(e){let t,n={type:"update"};switch(e.type){case"update":if(n.type="update",!e.update||!(t=l.Z.getMapObject(e.update._id)))return!1;n.update={_id:e.update._id},Object.keys(e.update).forEach((e=>{n.update[e]=t[e]}));break;case"add":n.type="remove",n.remove={_id:""};break;case"remove":if(n.type="add",!e.remove||!(t=l.Z.getMapObject(e.remove._id)))return!1;n.add={...t}}this.queue.push(new p(u.m.buildObject,n))}pushEntity(e,t){let n,r={action:"move"};switch(e.action){case"move":if(r.action="move",!e.move||!t||!(n=t.get(e.move._id)))return!1;r.move={_id:e.move._id,label:n.label,x:n.position.x,y:n.position.y};break;case"add":r.action="remove",r.remove={_id:""};break;case"remove":if(r.action="add",!e.remove||!t||!(n=t.get(e.remove._id)))return!1;r.add={_id:e.remove._id,x:n.position.x,y:n.position.y,entity:n.entity,label:n.label}}this.queue.push(new p(u.m.buildEntity,r))}pushTiles(e,t){let n={action:"update"};n.update=e.map((e=>{let n=null==t?void 0:t[e._id];return n?{_id:e._id,tileset:e.tileset,x:n.x,y:n.y,width:n.width,index:n.index,indexes:n.indexes?[...n.indexes]:void 0}:{_id:e._id,tileset:e.tileset,x:e.x,y:e.y,width:0,indexes:[]}})),this.queue.push(new p(u.m.buildTile,n))}constructor(){this.queue=[]}};var g=n(95047);let v=e=>{let t=0,n=[],r=0,i=0;try{"function"==typeof(null==e?void 0:e.forEach)&&e.forEach(((e,o)=>{0===o||null===e||99===o||o>500||(n.push({id:o,name:"World "+o,players:Math.max(0,e)}),e<1600&&r++,e<=0&&i++,t+=e)}));for(let t=1;t<=4;t++)(void 0===e[t]||null===e[t])&&(n.push({id:t,name:"World "+t,players:0}),r++,i++);if(0===i&&r<2){n.sort(((e,t)=>e.id-t.id));let e=0;for(;e<n.length&&!(n[e].id>e+1);e++);if(e+1<80){let t=(e+1).toString();n.push({id:t,name:"World "+t,players:0})}}return{total:t,numberOfWorlds:n.length,maxPlayersPerWorld:2e3,worlds:n}}catch(e){return console.log("worlds lookup",e),0===n.length&&n.push({id:9,name:"Wiggly World",players:100}),{total:t,maxPlayersPerWorld:2e3,numberOfWorlds:n.length,worlds:n}}},m=class{async fetchWorldData(){try{let e=await g.Z.getWorldTotals();return v(null!=e?e:[])}catch(e){console.log("worlds error",e)}return(e=>{let t=[],n=[];try{return null==e||e.forEach((e=>{var n,r,i;null!==(i=null===(r=e.metadata)||void 0===r||null===(n=r.worlds)||void 0===n?void 0:n.length)&&void 0!==i&&i&&e.metadata.worlds.forEach(((e,n)=>{var r;null!==e&&(t[n]=(null!==(r=t[n])&&void 0!==r?r:0)+e)}))})),v(t)}catch(e){return console.log("worlds lookup",e),{total:0,maxPlayersPerWorld:1e3,numberOfWorlds:n.length,worlds:n}}})([])}constructor(e){this.client=e}};var y=n(80535),b=n(77497),E=n(6354);(i=o||(o={}))[i.ROOM_UNINITIALIZED=4008]="ROOM_UNINITIALIZED",i[i.DISCONNECTED=4009]="DISCONNECTED",i[i.INVALID_TELEPORT=4010]="INVALID_TELEPORT",i[i.INVALID_JOIN=4011]="INVALID_JOIN",i[i.JOIN_IN_PROGRESS=4013]="JOIN_IN_PROGRESS",i[i.DUPLICATE_ROOM=4242]="DUPLICATE_ROOM",i[i.PLAYER_NOT_FOUND=4501]="PLAYER_NOT_FOUND",i[i.INVALID_SESSION=4503]="INVALID_SESSION",i[i.ROOM_FULL=4504]="ROOM_FULL",i[i.INVALID_AVATAR=4505]="INVALID_AVATAR",i[i.INVALID_USERNAME=4506]="INVALID_USERNAME",i[i.AUTHENTICATION_FAILED=4507]="AUTHENTICATION_FAILED",i[i.INCORRECT_CLIENT_VERSION=4509]="INCORRECT_CLIENT_VERSION",i[i.NEED_RECAPTCHA=4511]="NEED_RECAPTCHA",i[i.AUTHENTICATION_EXPIRED=4512]="AUTHENTICATION_EXPIRED",i[i.PLAYER_BANNED=4521]="PLAYER_BANNED",i[i.BAD_RECAPTCHA=4567]="BAD_RECAPTCHA",i[i.ROOM_DISPOSING=4595]="ROOM_DISPOSING",i[i.VELOCITY_CONTROL=4596]="VELOCITY_CONTROL",i[i.SERVER_MAINTENANCE=4597]="SERVER_MAINTENANCE",i[i.INVALID_WORLD=4777]="INVALID_WORLD",i[i.INVALID_MAP=4978]="INVALID_MAP",i[i.LOGGING_OUT=4997]="LOGGING_OUT",i[i.ABANDONED=4998]="ABANDONED",i[i.LOGGED_IN=4999]="LOGGED_IN";let _="".concat("wss","://").concat("pixels-server.pixels.xyz"),w=null,O={[s.Yi.PLAYER_MOVING]:{command:u.m.moveSelfPlayer,throttle:!0,adapter:e=>{let t=-4&Math.floor(Date.now()/1e5);return[Math.round(e.position.x)*(t%1e3)+Math.round(e.position.y)*(t%23)+t%111,e.position.x,e.position.y,e.velocity.x,e.velocity.y]}},[s.qM.PLAYER_USED_ITEM]:{command:u.m.useItem,adapter:e=>{var t,n,r,i,o,a,s;return{id:null===(t=e.item)||void 0===t?void 0:t.id,type:null===(n=e.target)||void 0===n?void 0:n.type,slot:null===(r=e.item)||void 0===r?void 0:r.inventorySlot,mid:null===(i=e.target)||void 0===i?void 0:i.mid,x:null===(o=e.target)||void 0===o?void 0:o.x,y:null===(a=e.target)||void 0===a?void 0:a.y,tiles:null===(s=e.target)||void 0===s?void 0:s.tiles}}},[u.m.clickEntity]:{command:u.m.clickEntity},[u.m.timerCheck]:{command:u.m.timerCheck,throttle:!0},[s.qM.PLAYER_CLICKED_NPC]:{command:u.m.talkToNPC,adapter:e=>e},[s.Yi.NPCDIALOG_CLOSE]:{command:u.m.closeDialog,adapter:e=>e},[s.Yi.TRIGGER_EVENT]:{command:u.m.collideWithObject,adapter:e=>({objectId:e.targetId,trigger:e.trigger})},[s.Yi.NFT_SELECTED]:{command:u.m.setAvatar,adapter:e=>e},[s.Yi.PET_SELECTED]:{command:u.m.setPet},[s.Yi.PET_RENAME]:{command:u.m.setPetName},[s.Yi.CHAT_MESSAGE_SEND]:{command:u.m.addMessageToChat},[s.Yi.SET_TYPING_STATE]:{command:u.m.setTypingState,throttle:!0},[s.fb.SET_TOS_ACCEPTED]:{command:u.m.setTosAccepted},[s.Yi.FARM_CLAIM]:{command:u.m.rentFarm},[s.Yi.FIND_NFT]:{command:u.m.findNFTs},[s.Yi.PUSH_SUBSCRIBE]:{command:u.m.subscribe},[s.Yi.BUY_STORE_ITEM]:{command:u.m.buyStoreItem},[s.Yi.SELL_STORE_ITEM]:{command:u.m.sellStoreItem},[s.fb.BOOKMARK_MAP]:{command:u.m.bookmarkMap},[s.qM.BUILD_OBJECT]:{command:u.m.buildObject,adapter:e=>(r||(r=new h),r.pushObject(e),e)},[s.qM.BUILD_TILE]:{command:u.m.buildTile,adapter:e=>(r||(r=new h),e)},[s.qM.BUILD_ENTITY]:{command:u.m.buildEntity,adapter:e=>(r||(r=new h),r.pushEntity(e,A.getInstance().getMapEntities()),e)},[s.qM.UPGRADE_FARM]:{command:u.m.upgradeFarm},[s.qM.ROOM_RESTRICTIONS]:{command:u.m.updateRoomRestrictions},[s.qM.ROOM_PERMISSIONS]:{command:u.m.updateRolesAndPermissions},[s.qM.ROOM_OWNERSHIP]:{command:u.m.updateMapListing},[s.qM.CLAIM_NFTMAP]:{command:u.m.claimNftMap,adapter:e=>e},[s.qM.ROOM_MEMBERS]:{command:u.m.updateMapMembers},[s.qM.ROOM_NAME]:{command:u.m.updateRoomName,adapter:e=>({name:e})},[s.fb.TRADE_SEND]:{command:u.m.trade},[s.fb.MARKETPLACE_SEND]:{command:u.m.marketplace},[s.fb.REPORT_PLAYER]:{command:u.m.reportPlayer},[s.Yi.FETCH_MAIL]:{command:u.m.fetchMailbox},[s.Yi.COLLECT_MAIL_ITEM]:{command:u.m.collectMailboxItem},[s.Yi.MINT_UGC]:{command:u.m.mintUgc},[s.Yi.CLIENT_TRIGGER]:{command:u.m.clientTrigger,adapter:e=>({...e})}},A=class e{get chatMessages(){var e;return null===(e=this.room)||void 0===e?void 0:e.state.chatMessages}get mapLabels(){var e,t;return null!==(t=null===(e=this.room)||void 0===e?void 0:e.state.labels)&&void 0!==t?t:[]}get mapType(){var e,t;return null!==(t=null===(e=this.room)||void 0===e?void 0:e.state.type)&&void 0!==t?t:"public"}get mapTraits(){var e,t,n;return null===(e=null===(n=this.room)||void 0===n||null===(t=n.state)||void 0===t?void 0:t.nft)||void 0===e?void 0:e.traits}get currentPlayer(){var e,t;return{core:null===(t=this.room)||void 0===t?void 0:t.state.players.get(null===(e=this.room)||void 0===e?void 0:e.sessionId),full:this.selfPlayer}}get mapId(){var e;return(null===(e=this.room)||void 0===e?void 0:e.state.id)||""}get mapStorageId(){var e;return(null===(e=this.room)||void 0===e?void 0:e.state.mid)||""}get marketPlaceSellLimit(){var e,t;return null!==(t=null===(e=this.room)||void 0===e?void 0:e.state.mpSell)&&void 0!==t?t:1500}get marketPlaceBuyLimit(){var e,t;return null!==(t=null===(e=this.room)||void 0===e?void 0:e.state.mpBuy)&&void 0!==t?t:700}static getInstance(){return e.singleton||(e.singleton=new e),e.singleton}getMapEntities(){var e,t;return null===(e=null===(t=this.room)||void 0===t?void 0:t.state)||void 0===e?void 0:e.entities}getEntityByUniqueId(e){var t,n;return(null===(t=this.getMapEntities())||void 0===t?void 0:t.get(e))||(null===(n=this.selfPlayer)||void 0===n?void 0:n.entities.get(e))}getPlayerSessionIdByMid(e){var t,n;if(!e)return;let r=null===(n=this.room)||void 0===n||null===(t=n.state)||void 0===t?void 0:t.players;if(r)for(let[t,n]of r.entries())if(n.mid===e)return t}getPlayerCoreBySessionId(e){var t,n;if(this.isSelfPlayer(e))return this.currentPlayer.core;let r=null===(t=this.room)||void 0===t?void 0:t.state.players.get(e);return r?null===(n=this.players)||void 0===n?void 0:n.get(r.mid):void 0}getSessionId(){var e;return null===(e=this.room)||void 0===e?void 0:e.sessionId}getMapStorage(){var e;return null===(e=this.room)||void 0===e?void 0:e.state.storage}addMapEntity(e){let t=this.getMapEntities();t&&t.set(e.mid,e)}getSoilEntity(e){return this.getEntityByUniqueId(e)}hasJoystick(){var e;return!!(null===(e=this.scene)||void 0===e?void 0:e.hasJoystick())}peekLeftMap(){let e=this.mapId,t=null==e?void 0:e.match(/NFT.*-(\d+)/),n=!!t&&!!t[1]&&parseInt(t[1]);if(n)1===n?n=5e3:n--;else{let e=(Date.now()-this.serverTimeDelta)/1e3%86400;n=1+Math.floor(e/17.28)%5e3}return"pixelsNFTFarm-".concat(n)}peekRightMap(){let e=this.mapId,t=null==e?void 0:e.match(/NFT.*-(\d+)/),n=!!t&&!!t[1]&&parseInt(t[1]);if(n)5e3===n?n=1:n++;else{let e=((Date.now()-this.serverTimeDelta)/1e3+43200)%86400;n=1+Math.floor(e/17.28)%5e3}return"pixelsNFTFarm-".concat(n)}registerEvents(){let e=(e,t,n)=>{n&&this.room&&this.room.sessionId===n?this.room.send(e,t):console.log("message ignored because room not loaded",e)};Object.entries(O).forEach((t=>{let[n,r]=t,i=r.throttle?d()(e,250):e;s.ZP.registerEventListener(n,(e=>{var t;i(r.command,r.adapter?r.adapter(e):e,null===(t=this.room)||void 0===t?void 0:t.sessionId)}))}));let t=(t,n)=>{let r=n.throttle?d()(e,250):e;t.subscribe((e=>{var t;let i=n.adapter?n.adapter(e):e;r(n.command,i,null===(t=this.room)||void 0===t?void 0:t.sessionId)}))};t(s.rV.inventory.swapItems,{command:u.m.swapOrCombineInventorySlots}),t(s.rV.inventory.changeActiveRow,{command:u.m.changeEquipmentBar,throttle:!0}),t(s.rV.sellOrders.fetch,{command:u.m.sellOrderFetch}),t(s.rV.sellOrders.fill,{command:u.m.sellOrderFill}),t(s.rV.sellOrders.reset,{command:u.m.sellOrderReset})}undoCommand(){if(r){console.log("undo list exists");let t=r.popObject();var e;if(t)console.log("sending undo",t.command,t.payload),null===(e=this.room)||void 0===e||e.send(t.command,t.payload)}}checkParams(){let e=new URLSearchParams(window.location.search);e.has("mockEthAddress")&&e.get("mockEthAddress"),e.has("trigger")&&(w=e.get("trigger"))}isSelfPlayer(e){var t;return e===(null===(t=this.room)||void 0===t?void 0:t.sessionId)}initPlayers(){var e,t,n;if(this.players=new Map,"private"===this.room.state.type||"tutorial"===this.room.state.type){let t=this.currentPlayer;t&&(null===(e=this.players)||void 0===e||e.set(t.core.mid,t.core))}else null===(n=this.room)||void 0===n||null===(t=n.state)||void 0===t||t.players.forEach(((e,t)=>{var n;null===(n=this.players)||void 0===n||n.set(e.mid,e),this.isSelfPlayer(t)||this.setupOtherPlayer(e,t)}))}handleDisconnect(){var e;null===(e=this.room)||void 0===e||e.onLeave((e=>{var t,n,r,i;if(null===(n=this.currentPlayer)||void 0===n||null===(t=n.core)||void 0===t?void 0:t.isGuest)return console.log("disconnected, code=",e),void(null===(r=this.room)||void 0===r||r.removeAllListeners());if(s.ZP.emitEventNow(s.fb.ROOM_LEAVE),this.room){if(console.log("disconnected, code=",e),this.room.removeAllListeners(),null===(i=this.playerSerializer)||void 0===i||i.teardown(),this.playerSerializer=void 0,this.selfPlayer=void 0,this.room=void 0,4999===e)return void s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["playerKicked","We offer our humble apologies. You have been disconnected from the game server as a result of joining from another device or browser window. Multiple connections are not permitted."]});s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:"lostConnection"})}}))}handleRoomEvents(){var e;this.room&&(this.room.onMessage(u.m.timeSync,(e=>{(null==e?void 0:e.ms)&&(this.serverTimeDelta=Date.now()-e.ms,console.log("time delta ".concat(this.serverTimeDelta,"ms")))})),this.room.state.listen("ownerAddress",(e=>{s.ZP.emitEventNow(s.fb.ROOM_OWNER_CHANGED,e)})),this.room.state.listen("name",(()=>{this.room&&s.ZP.emitEventNow(s.fb.ROOM_NAME_CHANGED,this.room.state.name)})),this.room.state.listen("guild",(()=>{this.room&&s.ZP.emitEventNow(s.fb.ROOM_GUILD_CHANGED,this.room.state.guild)})),this.room.state.permissions.onChange((()=>{if(!this.room)return;let e=JSON.parse(JSON.stringify(this.room.state.permissions));s.ZP.emitEventNow(s.fb.ROOM_PERMISSIONS_CHANGED,e)})),this.room.state.restrictions.onChange((()=>{if(!this.room)return;let e=JSON.parse(JSON.stringify(this.room.state.restrictions));s.ZP.emitEventNow(s.fb.ROOM_RESTRICTIONS_CHANGED,e)})),this.room.state.ownership&&this.room.state.ownership.onChange((()=>{if(!this.room)return;let e=JSON.parse(JSON.stringify(this.room.state.ownership));s.ZP.emitEventNow(s.fb.ROOM_OWNERSHIP_CHANGED,e)})),this.room.state.members.onAdd((()=>{if(!this.room)return;let e=JSON.parse(JSON.stringify(this.room.state.members));s.ZP.emitEventNow(s.fb.ROOM_MEMBERS_CHANGED,e)})),this.room.state.members.onRemove((()=>{if(!this.room)return;let e=JSON.parse(JSON.stringify(this.room.state.members));s.ZP.emitEventNow(s.fb.ROOM_MEMBERS_CHANGED,e)})),null===(e=this.room)||void 0===e||e.onMessage("*",((e,t)=>{if(this.room)try{var n,i,o,a,c,f,d,p,h,g,v,m,_,w,O,A,S;switch(e){case u.m.updatePlayer:null===(n=this.playerSerializer)||void 0===n||n.patch(t),this.applyStateChanges();break;case u.m.talkToNPC:s.ZP.emitEventNow(s.fb.NPC_SPEAKS,t);break;case u.m.receiveMessageInChat:s.ZP.emitEventNow(s.fb.CHAT_MESSAGE_RCV,{...t,whisper:!0});break;case u.m.buildObject:r&&"add"===t.action&&r.pushNewObject(t._id),"add"===t.action||"update"===t.action?l.Z.addMapObject(t):"remove"===t.action&&l.Z.removeMapObject(t),s.ZP.emitEventNow(s.fb.SERVER_BUILD_NODE,{...t,type:"object"});break;case u.m.buildTile:t.update&&(r&&"update"!==t.action&&r.pushTiles(t.update,l.Z.getMapTiles()),l.Z.updateMapTiles(t.update)),s.ZP.emitEventNow(s.fb.SERVER_BUILD_NODE,{type:"tile",...t});break;case u.m.useItem:s.ZP.sendEventDelayed("CONFIRM_USEITEM",t),null===(i=this.scene)||void 0===i||i.playerUsedItem(t);break;case u.m.useItemError:if("cannot-overwater"===t.message)break;s.rV.playSound.emit("snd_ui_error");let I={source:"item",icon:t.item&&(null===(o=l.Z.getGameItem(t.item))||void 0===o?void 0:o.image),text:{id:t.message},deduplicationKey:t.message};y.e.set(b.W_,[I]);break;case u.m.teleportPlayer:s.ZP.emitEventNow(s.fb.ROOM_WARP,{mapId:t.mapId,spawn:t.spawn,source:t.source,abort:t.abort});break;case u.m.playerAction:"play"===t.action?(t.sound&&s.rV.playSound.emit(t.sound),(null===(a=t.animation)||void 0===a?void 0:a.name)&&(t.target&&"self"!==t.target?null===(f=this.scene)||void 0===f||f.playNodeAnimation({mid:t.target,animation:t.animation.name,position:t.animation.position,emoji:t.emoji,pet:!1}):null===(c=this.scene)||void 0===c||c.playPlayerAnimation(t.animation.name))):"stop"===t.action?t.sound&&(console.log("stopping sound ".concat(t.sound)),s.ZP.sendEventDelayed("STOP_SOUND",t.sound)):"petplay"===t.action?t.emoji&&(null===(h=this.scene)||void 0===h||h.playNodeAnimation({mid:null!==(g=t.target)&&void 0!==g?g:"",animation:null!==(v=null===(d=t.animation)||void 0===d?void 0:d.name)&&void 0!==v?v:"",position:null===(p=t.animation)||void 0===p?void 0:p.position,emoji:t.emoji,pet:!0})):"tween"===t.action&&t.tweenTo&&(null===(m=this.scene)||void 0===m||m.playNodeAnimation({mid:null!==(_=t.target)&&void 0!==_?_:"",animation:null!==(w=t.tweenTo.animation)&&void 0!==w?w:"",position:{x:t.tweenTo.x,y:t.tweenTo.y},tween:{duration:t.tweenTo.ms,easing:null!==(O=t.tweenTo.ease)&&void 0!==O?O:"cubic"}}));break;case u.m.playerNotification:y.e.set(b.W_,[t]),"item"===(null==t?void 0:t.source)&&(null===(A=t.text)||void 0===A?void 0:A.count)>0&&(null===(S=t.stacking)||void 0===S?void 0:S.key)&&s.ZP.emitEventNow(s.fb.PLAYER_INVENTORY_NEW,{item:t.stacking.key});break;case u.m.sellOrders:y.e.set(E.v,t);break;case u.m.clientCmd:s.ZP.emitEventNow(s.fb.CLIENT_CMD,t);break;case u.m.presentUI:s.ZP.emitEventNow(s.fb.PRESENT_UI,t);break;case u.m.trade:s.ZP.emitEventNow(s.fb.TRADE_RECEIVE,t);break;case u.m.marketplace:s.ZP.emitEventNow(s.fb.MARKETPLACE_RECEIVE,t);break;case u.m.setAvatar:s.ZP.emitEventNow(s.fb.PLAYER_AVATAR,t);break;case u.m.bookmarkMap:s.ZP.emitEventNow(s.fb.BOOKMARK_MAP,t);break;case u.m.fetchMailbox:console.log("received mailbox items"),s.ZP.emitEventNow(s.fb.RECEIVE_MAIL,t);break;case u.m.collectMailboxItem:s.ZP.emitEventNow(s.fb.COLLECT_MAIL_ITEM_RESPONSE,t);break;case u.m.findNFTs:s.ZP.emitEventNow(s.Yi.FOUND_NFT,t);break;default:console.warn("Unhandled server message",e,t)}}catch(n){console.error("exception in message",n,"from message",e,t)}})),this.handleDisconnect())}applyStateChanges(){this.updatedEntities.forEach((e=>{this.entityUpdated(e)})),this.updatedEntities.clear(),this.updatedPet&&(this.selfPetupdate(),this.updatedPet=!1),this.updatedInventory&&(this.inventoryChanged(),this.updatedInventory=!1)}handleRoomUpdates(){if(!this.room)return;this.room.onStateChange((()=>{this.applyStateChanges()})),this.room.state.entities.forEach((e=>{this.monitorEntity(e)})),this.room.state.entities.onAdd((e=>{var t;null===(t=this.scene)||void 0===t||t.addEntityElement(void 0,e.toJSON()),r&&r.pushNewEntity(e.mid),this.monitorEntity(e),s.ZP.emitEventNow(s.fb.SERVER_BUILD_NODE,{_id:e.mid,action:"add",type:"entity"})}),!1),this.room.state.entities.onRemove((e=>{var t;let n=l.Z.getGameEntity(e.entity);null===(t=this.scene)||void 0===t||t.removeEntityElement(e.mid,null==n?void 0:n.type),s.ZP.emitEventNow(s.fb.SERVER_BUILD_NODE,{_id:e.mid,action:"remove",type:"entity"})})),this.room.state.chatMessages.onAdd((e=>{var t;(null===(t=this.room)||void 0===t?void 0:t.state)&&"private"!==this.room.state.type&&"tutorial"!==this.room.state.type&&s.ZP.emitEventNow(s.fb.CHAT_MESSAGE_RCV,{...e})}),!1);let e=this.room.state.storage;(null==e?void 0:e.slots)&&(e.slots.onAdd((e=>{this.monitorSlot(e)})),e.slots.onRemove((()=>this.updatedInventory=!0))),this.room.state.levels.onAdd(((e,t)=>{let n=JSON.parse(JSON.stringify(e));s.ZP.emitEventNow(s.fb.ROOM_LEVEL_ADD,{key:t,level:n}),this.monitorLevel(t,e,"room")})),this.room.state.players.onAdd(((e,t)=>{var n,r,i;this.room&&("private"===(null===(n=this.room.state)||void 0===n?void 0:n.type)||"tutorial"===(null===(r=this.room.state)||void 0===r?void 0:r.type)||(null===(i=this.players)||void 0===i||i.set(e.mid,e),s.ZP.emitEventNow(s.fb.PLAYER_JOINED,{username:e.username,sessionId:t,id:e.mid}),this.isSelfPlayer(t)||setTimeout((()=>this.setupOtherPlayer(e,t)),10)))}),!1),this.room.state.players.onRemove(((e,t)=>{var n,r,i,o;this.room&&"private"!==(null===(n=this.room.state)||void 0===n?void 0:n.type)&&"tutorial"!==(null===(r=this.room.state)||void 0===r?void 0:r.type)&&(null===(i=this.players)||void 0===i||i.delete(e.mid),s.ZP.emitEventNow(s.fb.PLAYER_REMOVED,{username:e.username,id:e.mid}),null===(o=this.scene)||void 0===o||o.playerLeave(t,e.mid))}))}async disconnect(){var e,t;if(!this.room)return Promise.resolve(-1);let{room:n}=this;this.room.removeAllListeners(),null===(e=this.playerSerializer)||void 0===e||e.teardown(),this.playerSerializer=void 0,this.selfPlayer=void 0,this.room=void 0;let r=n.leave(!0);return null===(t=this.players)||void 0===t||t.clear(),this.scene=void 0,s.ZP.emitEventNow(s.fb.ROOM_LEAVE),r}doJoin(t){return new Promise(((n,r)=>{let i=1,o="",a=async()=>{if("need-recaptcha"!==o||t.recaptcha)i>1&&s.ZP.sendEventDelayed(s.fb.SLOW_LOAD,{retry:i});else{let e=g.Z.getStytchTelemetry().then((e=>{t.telemetryId=e})).catch();if(await Promise.all([e]),!t.telemetryId)return void r({message:"no-telemetryId-available"})}g.Z.getRoomId(t.mapId,t.world).then((s=>{this.client.joinById(s,t).then((e=>n(e))).catch((t=>{console.error("error from colyseus",JSON.stringify(t)),o=null==t?void 0:t.message,e.permanentErrors.includes(null==t?void 0:t.message)?r(t):e.retryErrors.includes(null==t?void 0:t.message)&&i<8?(setTimeout(a,5e3),i+=1):i>=2?r(t):(setTimeout(a,3e3),i+=1)}))})).catch((t=>{console.error("error from getRoomId",JSON.stringify(t)),o=null==t?void 0:t.message,e.permanentErrors.includes(null==t?void 0:t.message)||i>=2?r(t):(setTimeout(a,3e3),i+=1)}))};a()}))}async connect(e,t,n,i,u,f,d,p,h){var g,v;this.scene=i,this.firstLoad&&(this.registerEvents(),this.firstLoad=!1);let m={};if(n){let e=n.split(",");m.label=e[0],e.length>=3&&(m.offset={x:parseInt(e[1],10),y:parseInt(e[2],10)})}r=void 0;try{this.room&&(console.log("double join happened!"),await this.disconnect()),console.log("joining map ".concat(e,": ").concat(h)),this.room=await this.doJoin({mapId:e,token:u||"iamguest",isGuest:!u,cryptoWallet:{},username:d,playerId:p,world:t,ver:c.WX,...m,avatar:u||!f?"":JSON.stringify(f),lastSavedAt:h})}catch(e){if((null==e?void 0:e.code)===o.SERVER_MAINTENANCE)s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:null!==(g=e.message)&&void 0!==g?g:"server-maintenance"});else if((null==e?void 0:e.code)===o.PLAYER_BANNED){let t=e.message.split("+|=|+"),n="playerIsBanned",r="It's cool to be in a band. Not so cool to get BANNED. You can find the appeal form in our help center";t.length>1&&t[1]&&(n=t[1],r=t[1]),s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:[n,r]})}else(null==e?void 0:e.message)?"room-is-full"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:"roomFull"}):"join-in-progress"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["joinInProgress","Your account was in process of joining a room already. You cannot be connected until the prior attempt completes"]}):"user-logging-out"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["userLoggingOut","Sorry, it is taking longer than expected to save your progress from the previous location. You can try again in a few seconds"]}):"velocity-control"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["velocityControl","The room you tried to join has too many players. Try choosing a different world."]}):"invalid-token"===e.message||"player-not-found"===e.message||"could-not-authenticate"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["authenticationFailed","To say you are who you are may be contrary to fact. Your authentication was not so authenticated."]}):"authentication-expired"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["authenticationExpired","You were there, now you are here. My head is spinning. Just...try again, please."]}):"invalid-permissions"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["invalidPermissionsToJoinRoom","The room owner did not let you in. Did you remember to knock nicely? Permission denied!"]}):"user-already-logged-in"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:"alreadyLoggedIn"}):"transfer-in-progress"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["transferInProgress","There is a lot at stake, so you must take a break, and wait for your transfer to take"]}):"invalid-client-version"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["updateClient","No matter how hard you try to avoid it, things change. And so do you. Please refresh page for a new beginning."]}):"no-recaptcha-available"===e.message||"no-telemetryId-available"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["noRecaptcha","Dude, where's my server? Please disable ad blockers or other plugins"]}):"invalid-map"===e.message?s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["mapNotFound","I see you brought your ticket to the dance, but there is no dancehall here. invalid-map"]}):s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:[e.message,"Sorry, we couldn't enter you into the game. Care to try again? (".concat(e.message,")")]}):s.ZP.emitEventNow(s.fb.SVR_CANNOTCONNECT,{message:["joinFailed","It appears likely your destination failed to exist. If you attempt to join again, who knows where you might land? Get it? L-A-N-D. Me, neither."]});return}this.playerSerializer=new a.mV;let y=new Promise((e=>{var t;null===(t=this.room)||void 0===t||t.onMessage("joinRoom",(t=>{l.Z.setMapLibrary(t.config),this.playerSerializer.handshake(t.handshake),this.playerSerializer.setState(t.serialPlayer);let n=this.playerSerializer.getState();e(n)}))}));this.handleRoomEvents();let b=new Promise((e=>{this.room.onStateChange.once((()=>{let t=this.room.state.players.get(this.room.sessionId);e(t)}))}));await Promise.all([b,y]),this.selfPlayer=await y;let E=await b;if(await l.Z.scanGameLibrary(this.room.state.entities),this.selfPlayer){let e=JSON.parse(JSON.stringify(this.currentPlayer));(null===(v=e.full.pet)||void 0===v?void 0:v.avatar)||delete e.full.pet,this.initPlayers(),this.setupSelfPlayerListeners(this.selfPlayer,E),this.scene.initSelfPlayerState(e),s.ZP.emitEventNow(s.fb.ROOM_LOADED,{player:e,roomType:this.room.state.type,mapId:this.room.state.id,guild:this.room.state.guild,roomName:this.room.state.name,ownerAddress:this.room.state.ownerAddress,sessionId:this.room.sessionId,messages:JSON.parse(JSON.stringify(this.room.state.chatMessages)),templateName:this.room.state.templateName}),s.ZP.emitEventNow(s.fb.ROOM_NAME_CHANGED,this.room.state.name),s.ZP.emitEventNow(s.fb.PLAYER_ENERGY_CHANGE,{energy:JSON.parse(JSON.stringify(this.selfPlayer.energy))})}return this.handleRoomUpdates(),w&&u&&(s.ZP.emitEventNow(s.Yi.CLIENT_TRIGGER,{trigger:w}),w=null),u||this.room.leave(!0),this.currentPlayer}entityUpdated(e){let t=this.getEntityByUniqueId(e);if(t){var n;let e=t.toJSON();s.ZP.emitEventNow(s.fb.ENTITY_UPDATE,e),null===(n=this.scene)||void 0===n||n.updateEntity(e)}else console.error("entity ".concat(e," changed but not found"))}monitorEntity(e){var t;let n=e.mid,r=l.Z.getGameEntity(e.entity);(null==r?void 0:r.type)&&e[r.type]&&e.storage&&e.storage.slots&&(e.storage.slots.onAdd((e=>{this.monitorSlot(e)})),e.storage.slots.onRemove((()=>this.updatedInventory=!0))),null===(t=e.position)||void 0===t||t.onChange((()=>{this.updatedEntities.add(n)})),e.onChange((()=>{this.updatedEntities.add(n)})),e.generic&&(e.generic.onChange((()=>{this.updatedEntities.add(n)})),e.generic.displayInfo.onChange((()=>{this.updatedEntities.add(n)})),e.generic.statics&&(e.generic.statics.onChange((()=>{this.updatedEntities.add(n)})),e.generic.statics.onAdd((()=>{this.updatedEntities.add(n)}),!1),e.generic.statics.onRemove((()=>{this.updatedEntities.add(n)}))),e.generic.trackers&&(e.generic.trackers.onChange((()=>{this.updatedEntities.add(n)})),e.generic.trackers.onAdd((()=>{this.updatedEntities.add(n)}),!1),e.generic.trackers.onRemove((()=>{this.updatedEntities.add(n)}))))}monitorAchievements(e){let t=e.achievementId;e.onChange((()=>{let e=JSON.parse(JSON.stringify(this.selfPlayer.achievements.get(t)));s.ZP.emitEventNow(s.fb.PLAYER_ACHIEVEMENT_CHANGED,{achievement:e})}))}monitorLevel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"player";t.onChange((()=>{var t,r,i;if("player"===n){if(this.selfPlayer){let t=JSON.parse(JSON.stringify(this.selfPlayer.levels.get(e)));s.ZP.emitEventNow(s.fb.PLAYER_LEVEL_CHANGED,{key:e,level:t})}}else if(null===(r=this.room)||void 0===r||null===(t=r.state)||void 0===t?void 0:t.levels){let t=JSON.parse(JSON.stringify(null===(i=this.room)||void 0===i?void 0:i.state.levels.get(e)));s.ZP.emitEventNow(s.fb.ROOM_LEVEL_CHANGED,{key:e,level:t})}}))}inventoryChanged(){if(this.selfPlayer){let e=JSON.parse(JSON.stringify(this.selfPlayer.inventory));s.ZP.emitEventNow("PLAYER_INVENTORY_CHANGE",{inventory:e})}}monitorSlot(e){this.updatedInventory=!0,e.onChange((()=>{this.updatedInventory=!0}))}monitorCoinSlot(e){e.onChange((e=>{let t=e.find((e=>"balance"===e.field&&e.value>e.previousValue)),n=JSON.parse(JSON.stringify(this.selfPlayer.coinInventory));s.ZP.emitEventNow("PLAYER_COIN_INVENTORY_CHANGE",{coinInventory:n,added:t?t.value-t.previousValue:0})}))}selfPetupdate(){var e;let t=null===(e=this.selfPlayer)||void 0===e?void 0:e.pet;if(t){let e=JSON.parse(JSON.stringify(t));s.ZP.emitEventNow(s.fb.PLAYER_PET_UPDATE,{full:{pet:e}})}}monitorPet(e){e.inventory&&(e.inventory.slots.onAdd((e=>this.monitorSlot(e))),e.inventory.slots.onRemove((()=>this.updatedInventory=!0))),e.scriptInstance&&e.scriptInstance.onChange((()=>this.updatedPet=!0)),e.avatar&&(e.avatar.listen("name",(()=>this.updatedPet=!0)),e.avatar.listen("fade",(()=>this.updatedPet=!0)))}petChange(){let e=this.currentPlayer,t=null==e?void 0:e.full.pet;if(null==t?void 0:t.avatar){let n=JSON.parse(JSON.stringify(t));s.ZP.emitEventNow(s.fb.PLAYER_PET_CHANGE,{core:{petAvatar:n.avatar,position:{x:e.core.position.x,y:e.core.position.y}},full:{pet:n}}),this.monitorPet(t)}else s.ZP.emitEventNow(s.fb.PLAYER_PET_CHANGE,{core:{petAvatar:void 0},full:{pet:void 0}})}setupSelfPlayerListeners(e,t){var n,r;e.inventory.onChange((()=>{let e=JSON.parse(JSON.stringify(this.selfPlayer.inventory));s.ZP.emitEventNow("PLAYER_INVENTORY_CHANGE",{inventory:e})})),(null===(n=e.pet)||void 0===n?void 0:n.avatar)&&this.monitorPet(e.pet),e.listen("pet",(()=>this.petChange())),e.energy.onChange((()=>{let e=JSON.parse(JSON.stringify(this.selfPlayer.energy));s.ZP.emitEventNow("PLAYER_ENERGY_CHANGE",{energy:e})})),t.currentAvatar.onChange((()=>{let e=t.currentAvatar.toJSON();s.ZP.emitEventNow("PLAYER_CURRENTAVATAR_CHANGE",{currentAvatar:e})}));let i=()=>{let e=t.memberships.toJSON();s.ZP.emitEventNow("PLAYER_MEMBERSHIPS_CHANGE",{memberships:e})};t.memberships.onChange(i),t.memberships.onAdd(i,!1),t.memberships.onRemove(i);let o=()=>{let e=t.modifiers.toJSON();s.ZP.emitEventNow("PLAYER_MODIFIERS_CHANGE",{modifiers:e})};t.modifiers.onChange(o),t.modifiers.onRemove(o),t.modifiers.onAdd(o,!1),t.listen("username",(e=>{"mute"!==t.status&&"restrict"!==t.status&&"block"!==t.status&&s.ZP.emitEventNow("PLAYER_USERNAME_CHANGE",{username:e})})),t.listen("status",(e=>{s.ZP.emitEventNow("PLAYER_USERNAME_CHANGE",{username:"mute"===e||"restrict"===e||"block"===e?"(muted)":t.username})})),e.listen("messages",(e=>{s.ZP.emitEventNow(s.fb.MAIL_UPDATE,{messages:e})})),e.achievements.onAdd((e=>{let t=JSON.parse(JSON.stringify(e));s.ZP.emitEventNow(s.fb.PLAYER_ACHIEVEMENT_ADD,{achievement:t}),this.monitorAchievements(e)})),e.achievements.onRemove((e=>{let t=JSON.parse(JSON.stringify(e));s.ZP.emitEventNow(s.fb.PLAYER_ACHIEVEMENT_REMOVED,{achievement:t})})),e.levels.onAdd(((e,t)=>{let n=JSON.parse(JSON.stringify(e));s.ZP.emitEventNow(s.fb.PLAYER_LEVEL_ADD,{key:t,level:n}),this.monitorLevel(t,e)})),null===(r=e.entities)||void 0===r||r.forEach((e=>{this.monitorEntity(e)})),e.entities.onAdd((e=>{var t;let n=e.toJSON();this.monitorEntity(e),s.ZP.emitEventNow(s.fb.ENTITY_ADD,n),null===(t=this.scene)||void 0===t||t.addPlayerEntityNodes(n)}),!1),e.entities.onRemove((e=>{var t;s.ZP.emitEventNow(s.fb.ENTITY_REMOVE,e.toJSON()),null===(t=this.scene)||void 0===t||t.removeEntity(e)})),e.farms.onAdd((()=>{var e;let t=JSON.parse(JSON.stringify(null===(e=this.selfPlayer)||void 0===e?void 0:e.farms));s.ZP.emitEventNow("PLAYER_FARMS_CHANGE",{farms:t})}),!1),e.farms.onRemove((()=>{var e;let t=JSON.parse(JSON.stringify(null===(e=this.selfPlayer)||void 0===e?void 0:e.farms));s.ZP.emitEventNow("PLAYER_FARMS_CHANGE",{farms:t})})),e.inventory.slots.onAdd((e=>{this.monitorSlot(e)}),!1),e.inventory.slots.forEach((e=>{this.monitorSlot(e)})),e.inventory.slots.onRemove((()=>this.updatedInventory=!0)),e.coinInventory.onAdd((e=>{this.monitorCoinSlot(e)})),e.levels.onChange((()=>{let e=JSON.parse(JSON.stringify(this.selfPlayer.levels));s.ZP.emitEventNow("PLAYER_EXP_CHANGE",{levels:e})})),this.questsUpdated(),e.quests.forEach((e=>{e.onChange((()=>this.questsUpdated()))})),e.quests.onAdd((e=>{e.onChange((()=>this.questsUpdated())),this.questsUpdated()}),!1)}questsUpdated(){if(this.selfPlayer){let e=JSON.parse(JSON.stringify(this.selfPlayer.quests));s.ZP.emitEventNow("PLAYER_QUESTPROGRESS_ADDED",{quests:e})}}transformPlayerCore(e){var t;let n=JSON.parse(JSON.stringify(e));return(null===(t=n.petAvatar)||void 0===t?void 0:t.id)||delete n.petAvatar,n}setupOtherPlayer(e,t){var n;let r=this.transformPlayerCore(e),i=null===(n=this.scene)||void 0===n?void 0:n.playerJoin(r,t),o=()=>{if(!this.room)return;let e=this.getPlayerCoreBySessionId(t);var n;e&&(r=this.transformPlayerCore(e),null===(n=this.scene)||void 0===n||n.playerJoin(r,t),e.petAvatar&&e.petAvatar.onChange(o))};i&&(e.velocity.onChange((()=>{let e=this.getPlayerCoreBySessionId(t);e&&i.move(e.velocity,e.position)})),e.currentAvatar.onChange(o),e.modifiers.onChange(o),e.listen("petAvatar",o),e.listen("username",(e=>{e!==r.username&&o()})),e.listen("status",(e=>{e!==r.status&&o()})),e.listen("typingTimestamp",(e=>{e&&i.showChatTyping()})),e.petAvatar&&e.petAvatar.onChange(o))}constructor(){this.client=new a.KU(_),this.updateMap=!1,this.firstLoad=!0,this.serverTimeDelta=0,this.worldService=new m(this.client),this.updatedEntities=new Set,this.updatedPet=!1,this.updatedInventory=!1,this.checkParams()}};A.unwantedFarmNumbers=[0],A.permanentErrors=["room-is-full","invalid-token","could-not-authenticate","player-not-found","invalid-permissions","bad-recaptca","bad-telemetry-data","invalid-map","invalid-client-version","player-is-banned","authentication-expired","invalid-world","server-maintenance","transfer-in-progress","teleport-unauthorized","join-in-progress"],A.retryErrors=["user-logging-out","velocity-control"]},60604:function(e,t,n){"use strict";n.d(t,{A$:function(){return h},BA:function(){return y},B_:function(){return f},D9:function(){return v},DY:function(){return c},Kp:function(){return _},LI:function(){return s},Oe:function(){return I},WS:function(){return b},WX:function(){return r},XX:function(){return m},Y:function(){return w},Z6:function(){return A},aU:function(){return l},fX:function(){return S},fd:function(){return k},je:function(){return R},ji:function(){return d},m6:function(){return E},p$:function(){return O},pZ:function(){return P},qO:function(){return o},rq:function(){return p},sD:function(){return g},sV:function(){return i},tU:function(){return a},uT:function(){return u}});let r=6.91,i=1676498533e3,o="game-container",a="players",s=144,u=188,l=1,c=2,f=3e3,d=1250,p=2e3,h=1,g=30,v=32,m=21,y={top:0,left:0,right:6e3,bottom:6e3},b={width:y.right-y.left,height:y.bottom-y.top},E=2,_=.05,w=100,O=.4,A=2,S=3/w,I=["https://pixels.xyz","https://pixels.online"],P="https://d31ss916pli4td.cloudfront.net",R="https://mesh-online-assets.s3.us-east-2.amazonaws.com",k="".concat(P,"/game/ui/skills/skills_icon_")},34377:function(e,t,n){"use strict";n.d(t,{Vh:function(){return a},fb:function(){return s},Yi:function(){return l},qM:function(){return u},ZP:function(){return y},rV:function(){return h},d6:function(){return v},lY:function(){return m},D9:function(){return g}});var r,i,o,a,s,u,l,c=n(80535);(a||(a={})).RESIZE="RESIZE",(r=s||(s={})).INIT_GAME="INIT_GAME",r.GAME_OBJECT_CLICKED="GAME_OBJECT_CLICKED",r.GAME_INITIATED="GAME_INITIATED",r.GAME_CONNECTED="GAME_CONNECTED",r.ROOM_LOADED="ROOM_LOADED",r.ROOM_LEAVE="ROOM_LEAVE",r.PLAYER_JOINED="PLAYER_JOINED",r.PLAYER_CLICKED="PLAYER_CLICKED",r.PLAYER_DRAGGING="PLAYER_DRAGGING",r.PLAYER_REMOVED="PLAYER_REMOVED",r.PLAYER_ENERGY_CHANGE="PLAYER_ENERGY_CHANGE",r.PLAYER_QUESTS_ADDED="PLAYER_QUESTS_ADDED",r.PLAYER_ENTITIES_ADDED="PLAYER_ENTITIES_ADDED",r.PLAYER_QUESTS_REMOVED="PLAYER_QUESTS_REMOVED",r.PLAYER_ENTITIES_REMOVED="PLAYER_ENTITIES_REMOVED",r.PLAYER_AVATAR="PLAYER_AVATAR",r.PLAYER_PET_CHANGE="PLAYER_PET_CHANGE",r.PLAYER_PET_UPDATE="PLAYER_PET_UPDATE",r.PLAYER_COLLIDED_WITH_OBJECT="PLAYER_COLLIDED_WITH_OBJECT",r.PLAYER_UNCOLLIDED_WITH_OBJECT="PLAYER_UNCOLLIDED_WITH_OBJECT",r.NPC_SPEAKS="NPC_SPEAKS",r.PLAYER_INVENTORY_CHANGE="PLAYER_INVENTORY_CHANGE",r.PLAYER_INVENTORY_NEW="PLAYER_INVENTORY_NEW",r.PLAYER_COIN_INVENTORY_CHANGE="PLAYER_COIN_INVENTORY_CHANGE",r.PLAYER_QUESTPROGRESS_ADDED="PLAYER_QUESTPROGRESS_ADDED",r.PLAYER_EXP_CHANGE="PLAYER_EXP_CHANGE",r.PLAYER_OPEN_STORAGE="PLAYER_OPEN_STORAGE",r.CHAT_MESSAGE_RCV="CHAT_MESSAGE_RCV",r.SERVICE_COMMAND="SERVICE_COMMAND",r.SET_TOS_ACCEPTED="SET_TOS_ACCEPTED",r.REPORT_PLAYER="REPORT_PLAYER",r.SVR_CANNOTCONNECT="SVR_CANNOTCONNECT",r.GAME_OBJECT_MOUSEOVER="GAME_OBJECT_MOUSEOVER",r.GAME_OBJECT_MOUSEOUT="GAME_OBJECT_MOUSEOUT",r.LINK_OPEN="LINK_OPEN",r.ROOM_WARP="ROOM_WARP",r.LIBRARY="LIBRARY",r.BOOKMARK_MAP="BOOKMARK_MAP",r.SLOW_LOAD="SLOW_LOAD",r.ENTITY_UPDATE="ENTITY_UPDATE",r.ENTITY_REMOVE="ENTITY_REMOVE",r.ENTITY_ADD="ENTITY_ADD",r.ROOM_PERMISSIONS_CHANGED="ROOM_PERMISSIONS_CHANGED",r.ROOM_RESTRICTIONS_CHANGED="ROOM_RESTRICTIONS_CHANGED",r.ROOM_OWNERSHIP_CHANGED="ROOM_OWNERSHIP_CHANGED",r.ROOM_MEMBERS_CHANGED="ROOM_MEMBERS_CHANGED",r.ROOM_OWNER_CHANGED="ROOM_OWNER_CHANGED",r.ROOM_NAME_CHANGED="ROOM_NAME_CHANGED",r.ROOM_GUILD_CHANGED="ROOM_GUILD_CHANGED",r.ROOM_LEVEL_CHANGED="ROOM_LEVEL_CHANGED",r.ROOM_LEVEL_ADD="ROOM_LEVEL_ADD",r.PLAYER_ACHIEVEMENT_ADD="PLAYER_ACHIEVEMENT_ADD",r.PLAYER_ACHIEVEMENT_CHANGED="PLAYER_ACHIEVEMENT_CHANGED",r.PLAYER_ACHIEVEMENT_REMOVED="PLAYER_ACHIEVEMENT_REMOVED",r.PLAYER_LEVEL_CHANGED="PLAYER_LEVEL_CHANGED",r.PLAYER_LEVEL_ADD="PLAYER_LEVEL_ADD",r.PRESENT_FARM_DETAILS="PRESENT_FARM_DETAILS",r.DISMISS_FARM_DETAILS="DISMISS_FARM_DETAILS",r.PRESENT_UI="PRESENT_UI",r.CLIENT_CMD="CLIENT_CMD",r.TRADE_SEND="TRADE_SEND",r.TRADE_RECEIVE="TRADE_RECEIVE",r.MARKETPLACE_SEND="MARKETPLACE_SEND",r.MARKETPLACE_RECEIVE="MARKETPLACE_RECEIVE",r.SERVER_BUILD_NODE="SERVER_BUILD_NODE",r.RECEIVE_MAIL="RECEIVE_MAIL",r.COLLECT_MAIL_ITEM_RESPONSE="COLLECT_MAIL_ITEM_RESPONSE",r.MAIL_UPDATE="MAIL_UPDATE",(i=u||(u={})).BUILD_OBJECT="BUILD_OBJECT",i.SET_CATEGORY="SET_CATEGORY",i.SET_MODE="SET_MODE",i.SELECT_ENTITY="SELECT_ENTITY",i.ROOM_RESTRICTIONS="ROOM_RESTRICTIONS",i.ROOM_PERMISSIONS="ROOM_PERMISSIONS",i.ROOM_OWNERSHIP="ROOM_OWNERSHIP",i.ROOM_MEMBERS="ROOM_MEMBERS",i.CLAIM_NFTMAP="CLAIM_NFTMAP",i.BUILD_TILE="BUILD_TILE",i.BUILD_ENTITY="BUILD_ENTITY",i.UPGRADE_FARM="UPGRADE_FARM",i.ROOM_NAME="ROOM_NAME",i.RELEASE_FROM_CURSOR="RELEASE_FROM_CURSOR",i.PLAYER_CLICKED_NPC="PLAYER_CLICKED_NPC",i.PLAYER_USED_ITEM="PLAYER_USED_ITEM",(o=l||(l={})).TRIGGER_EVENT="TRIGGER_EVENT",o.FETCH_MAIL="FETCH_MAIL",o.COLLECT_MAIL_ITEM="COLLECT_MAIL_ITEM",o.NFT_SELECTED="NFT_SELECTED",o.PET_SELECTED="PET_SELECTED",o.PET_RENAME="PET_RENAME",o.SET_TYPING_STATE="SET_TYPING_STATE",o.CHAT_MESSAGE_SEND="CHAT_MESSAGE_SEND",o.PLAYER_MOVING="PLAYER_MOVING",o.FARM_CLAIM="FARM_CLAIM",o.BUY_STORE_ITEM="BUY_STORE_ITEM",o.SELL_STORE_ITEM="SELL_STORE_ITEM",o.MINT_UGC="MINT_UGC",o.FIND_NFT="FIND_NFT",o.FOUND_NFT="FOUND_NFT",o.PUSH_SUBSCRIBE="PUSH_SUBSCRIBE",o.NPCDIALOG_CLOSE="NPCDIALOG_CLOSE",o.CLIENT_TRIGGER="CLIENT_TRIGGER";let f=new class{get intialized(){return!!this.phaserEventEmitter}async init(){let e=await n.e(989).then(n.t.bind(n,82260,23));this.phaserEventEmitter||(this.phaserEventEmitter=new e.Events.EventEmitter,Object.values(s).forEach((e=>{this.registerEventListener(e,(t=>{c.h.dispatch({type:"game/".concat(e),payload:t})}))})))}registerEventListener(e,t){var n;null===(n=this.phaserEventEmitter)||void 0===n||n.on(e,t)}removeEventListerner(e,t){var n;null===(n=this.phaserEventEmitter)||void 0===n||n.removeListener(e,t)}emitEventNow(e,t){var n;null===(n=this.phaserEventEmitter)||void 0===n||n.emit(e,t)}sendEventDelayed(e,t){setTimeout((()=>{this.emitEventNow(e,t)}))}},d=0;function p(){let e,t,{debugName:n,emitterAtom:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=[],o={id:"event_".concat(++d),emit:e=>i.forEach((t=>t(e))),emitDeferred:e=>setTimeout((()=>o.emit(e))),subscribe:t=>(r&&!e&&(e=c.e.sub(r,(()=>o.emit(c.e.get(r))))),i.push(t),()=>(t=>{let r=i.indexOf(t);if(r<0)throw Error("Subscriber not found for '".concat(null!=n?n:o.id,"'. Did you already remove it?"));i.splice(r,1),e&&!i.length&&e()})(t)),subscribeAtom:e=>o.subscribe((t=>c.e.set(e,t))),subscribeScene:(e,t)=>{let n=o.subscribe(t);return e.events.once("destroy",n),()=>{e.events.off("destroy",n),n()}},addReduxCase:(e,n)=>{t||(t=o.subscribe((e=>c.h.dispatch({type:o.id,payload:e})))),e.addCase(o.id,n)}};return o}let h={playSound:p(),soundControl:p(),enhancedControl:p(),joystickControl:p(),blur:p(),attachToCursor:p(),editor:{on:p(),off:p()},inventory:{swapItems:p(),changeActiveRow:p()},sellOrders:{fetch:p(),fill:p(),reset:p()}};function g(e){h.soundControl.emitDeferred(e)}function v(e){h.enhancedControl.emitDeferred(e)}function m(e){h.joystickControl.emitDeferred(e)}var y=f},82485:function(e,t,n){"use strict";n.d(t,{ML:function(){return f},N8:function(){return l},SB:function(){return u},ZZ:function(){return c},q7:function(){return s},yC:function(){return a}});var r=n(96486),i=n.n(r),o=n(70247);function a(e,t){var n,r,i;return t.full.energy.level>=-(null!==(i=null===(r=e.onUse)||void 0===r||null===(n=r.energy)||void 0===n?void 0:n.value)&&void 0!==i?i:0)}function s(e,t){var n;let r=null===(n=e.crop)||void 0===n?void 0:n.states;if(!r||t.canHarvest)return!1;let i=r[t.state];return(null==i?void 0:i.onGrow)&&t.waterLevel<50}function u(e,t){var n,r;let i=null===(n=e.crop)||void 0===n?void 0:n.states;if(!i||t.canHarvest)return 0;let o=-t.ageMinutes,a=i[t.state];for(;(null==a?void 0:a.onGrow)&&(null==a||null===(r=a.onGrow[0])||void 0===r?void 0:r.state)&&"ripe"!==a.state;)o+=a.minutesRequired,a=i[a.onGrow[0].state];return o}function l(e,t){var n,r,i;let o=null===(n=e.crop)||void 0===n?void 0:n.states;return!o||t.canHarvest?0:-t.ageMinutes+(null!==(i=null===(r=o[t.state])||void 0===r?void 0:r.minutesRequired)&&void 0!==i?i:0)}function c(e,t,n,r){var a;let s;if("string"==typeof e){let t=o.Z.getGameItem(e);if(!t)return!1;e=t}let u=null==e?void 0:e.useTargets;if(!u)return!1;let l=null===(a=e.onUse)||void 0===a?void 0:a.types.every((e=>{var i,a,u;switch(e){case"harvest":if(s=o.Z.getGameEntity(t),!r||!(null==s||null===(i=s.crop)||void 0===i?void 0:i.states))return!1;{let e=s.crop;if(!e.states[r]||!e.states[r].onHarvest)return!1}break;case"fertilize":if(s=o.Z.getGameEntity(t),!r||!(null==s||null===(a=s.crop)||void 0===a?void 0:a.states))return!1;{let e=s.crop;if(!e.states[r]||!e.states[r].onGrow||0===e.states[r].onGrow.length)return console.log("cannot fertilize ".concat(t)),!1}break;case"removeEntity":let e=o.Z.getGameEntity(t);if(e&&!(null==e?void 0:e.onRemove))return!1;break;case"removeObject":let l=o.Z.getGameObject(t);if(l&&!(null==l?void 0:l.onRemove))return!1;break;case"move":if("crop"===n)return!1;let c=null!==(u=o.Z.getGameEntity(t))&&void 0!==u?u:o.Z.getGameObject(t);if(null==c?void 0:c.immovable)return!1}return!0}));return!!l&&(null==u?void 0:u.types.some((e=>{var r,a,s,l,c;if("entities"===e)return null===(r=u.entities)||void 0===r?void 0:r.includes(t);if("entityTypes"===e)return!!n&&(null===(a=u.entityTypes)||void 0===a?void 0:a.includes(n));if("entityLabels"===e){let e=o.Z.getGameEntity(t);if(null==e?void 0:e.labels)return i().isEmpty(i().xor(u.entityLabels,e.labels))}else{if("playerEntityTypes"===e)return!!n&&(null===(s=u.playerEntityTypes)||void 0===s?void 0:s.includes(n));if("ground"===e)return"ground"===n;if("pet"===e)return"pet"===t;if("objects"===e)return null===(l=u.objects)||void 0===l?void 0:l.includes(t);if("objectTypes"===e){let e=o.Z.getGameObject(t);return null==e||null===(c=e.types)||void 0===c?void 0:c.every((e=>{var t;return null===(t=u.objectTypes)||void 0===t?void 0:t.includes(e)}))}if("self"===e)return"self"===t}return!1})))}function f(e,t,n,r){if("string"==typeof e){let t=o.Z.getGameItem(e);if(!t)return!1;e=t}return!(!e.onUse||!c(e,t,n,r))&&(e.onUse.types.includes("removeEntity")||e.onUse.types.includes("removeObject")||e.onUse.types.includes("move"))}t.ZP=c},79750:function(e,t,n){"use strict";n.d(t,{F5:function(){return o},GU:function(){return u},lf:function(){return s},q4:function(){return a}});var r=n(70247);let i={id:"pixels",name:"pixels",map:"terravilla",mapPrefix:"pixelsNFTFarm-",twitter:"",defaultCurrency:"cur_coins"};function o(){try{let e=window.location.pathname.split("/")[1];return"nucyber"===e&&(e="gridcraft"),e&&"map"!==e?e.toLowerCase().trim():i.id}catch(e){return i.id}}function a(e){let t=r.Z.getTenants();if(!t)return!1;let n=Object.values(t).find((t=>t.name===e));if(!n||(null==n?void 0:n.id)===o())return!1;let i="".concat(window.location.origin,"/").concat(n.id);return window.history.replaceState(null,"",i),!0}function s(){return u().map}function u(){var e,t;let n=o(),a=r.Z.getTenants();return null!==(t=null!==(e=null==a?void 0:a[n])&&void 0!==e?e:null==a?void 0:a.pixels)&&void 0!==t?t:i}},83928:function(e,t,n){"use strict";n.d(t,{Uk:function(){return M},iy:function(){return A},KG:function(){return E},Ky:function(){return R},Ye:function(){return I},r$:function(){return v},Fp:function(){return f},zB:function(){return x},Ir:function(){return u},FL:function(){return C},TP:function(){return d},aR:function(){return _},xG:function(){return y},uf:function(){return m},_O:function(){return w},fI:function(){return l},T1:function(){return c},Ul:function(){return g},r5:function(){return D},Sj:function(){return b},DJ:function(){return O},pt:function(){return S},En:function(){return j},b7:function(){return L}});var r,i,o=n(60604);
/*! js-cookie v3.0.5 | MIT */function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var s=function e(t,n){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=a({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=t.read(a,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let u=()=>{var e;switch(null!==(e="production".toString())&&void 0!==e?e:"local"){case"production":return"/favicon";case"staging":return"/favicon_staging";case"preview":return"/favicon_preview";default:return"/favicon_development"}},l=e=>!(!e||c(e)||o.Oe.reduce(((t,n)=>t||e.startsWith(n)),!1)),c=e=>(null==e?void 0:e.startsWith("/"))&&!(null==e?void 0:e.startsWith("//")),f=e=>{if(null==e?void 0:e.includes("dashboard.pixels")){let t=window.location.hostname;if("dev.pixels.xyz"===t)return e.replace("dashboard.pixels","dashboard-dev.pixels");if("preview.pixels.xyz"===t)return e.replace("dashboard.pixels","dashboard-preview.pixels");if("staging.pixels.xyz"===t)return e.replace("dashboard.pixels","dashboard-staging.pixels")}else if((null==e?void 0:e.startsWith("/dashboard/"))||"/dashboard"===e){let t=window.location.hostname,n=e.replace("/dashboard","");return"dev.pixels.xyz"===t?"//dashboard-dev.pixels.xyz".concat(n):t.includes("localhost")?"//localhost:3001/".concat(n):"preview.pixels.xyz"===t?"//dashboard-preview.pixels.xyz".concat(n):"staging.pixels.xyz"===t?"//dashboard-staging.pixels.xyz".concat(n):"//dashboard.pixels.xyz".concat(n)}return e},d=e=>{switch(e){case"metamask":return p("isMetaMask");case"coinbase":return p("isCoinbaseWallet")||window.coinbaseWalletExtension;case"okx":return window.okxwallet;case"trust":return window.trustwallet;case"ronin":var t;return null===(t=window.ronin)||void 0===t?void 0:t.provider}},p=e=>{var t;if(window.ethereum){if(!window.ethereum.isOkxWallet&&window.ethereum[e]&&!window.ethereum.providers)return window.ethereum;if(null===(t=window.ethereum.providers)||void 0===t?void 0:t.length){let t=window.ethereum.providers.find((t=>null==t?void 0:t[e]));if(t)return t}if(window[e])return window[e];console.log("Couldn't find wallet provider for ".concat(e))}},h={},g=(e,t)=>{if("pixels-session"!==e){if(void 0===t)return h[e]?h[e]:window.localStorage.getItem(e);if(null===t)delete h[e],window.localStorage.removeItem(e);else{h[e]=t;try{window.localStorage.setItem(e,t)}catch(e){}}}else{let e="pixels-session";if(void 0===t)return s.get(e);if(null===t)s.remove(e,{domain:"pixels.xyz"});else{let n=new Date;n.setFullYear(n.getFullYear()+10),s.set(e,t,{expires:n,secure:!0,sameSite:"strict",domain:"pixels.xyz"})}}},v=()=>{Object.keys(localStorage).filter((e=>e.startsWith("wc@2:")||e.startsWith("wagmi.")||e.startsWith("-walletlink:"))).forEach((e=>localStorage.removeItem(e)))},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null!=e?e:0).toLocaleString(void 0,{maximumFractionDigits:t})},y=(e,t)=>{var n,r;let i=null!==(r=null==t?void 0:t.roundDecimalPlaces)&&void 0!==r?r:Math.floor(Math.log10(2**(null!==(n=null==t?void 0:t.roundBinaryPlaces)&&void 0!==n?n:0)));return m(e,i)},b=e=>{var t;return(null==e?void 0:e.roundDecimalPlaces)?null==e?void 0:e.roundDecimalPlaces:Math.floor(Math.log10(2**(null!==(t=null==e?void 0:e.roundBinaryPlaces)&&void 0!==t?t:0)))},E=(e,t)=>{var n;let r=(null==t?void 0:t.roundDecimalPlaces)?10**t.roundDecimalPlaces:2**(null!==(n=null==t?void 0:t.roundBinaryPlaces)&&void 0!==n?n:0);return Math.ceil(e*r)/r},_=(e,t)=>{var n;let r=(null==t?void 0:t.roundDecimalPlaces)?10**t.roundDecimalPlaces:2**(null!==(n=null==t?void 0:t.roundBinaryPlaces)&&void 0!==n?n:0);return Math.floor(e*r)/r},w=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),O=(e,t)=>(t.x-e.x)**2+(t.y-e.y)**2,A=e=>{let{selfPlayer:t,world:n,object:r,useType:i}=e;if(!t)return 1e4;if("self"===i||"pet"===i)return 0;if(r){return Math.max(0,Math.abs(t.y-r.y)-r.height/2)**2+Math.max(0,Math.abs(t.x-r.x)-r.width/2)**2}return(t.y-n.y)*(t.y-n.y)+(t.x-n.x)*(t.x-n.x)},S=e=>window.fetch(e,{mode:"cors",credentials:"omit"}),I=async()=>{try{return await window.fetch("/api/ver").then((e=>e.json()))}catch(e){return{error:e,version:-1}}},P={},R=async e=>{try{if(P[e])return P[e];let t=encodeURIComponent(e),n=await window.fetch("/api/expand?url="+t).then((e=>e.json()));if(null==n?void 0:n.url)return P[e]=n.url,n.url}catch(e){console.error("error looking up redirect",e)}return e},k=/fuck|shit|cunt|cock|fcuk|nigger|5hit/i,T=/\b(4r5e|5h1t|5hit|a55|hitler|anal|anus|ar5e|arrse|arse|ass|asshole|asswhole|a_s_s|b!tch|b00bs|b17ch|b1tch|ballbag|balls|ballsack|bastard|beastial|beastiality|bellend|bestial|bestiality|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|bitchin|bitching|bloody|blow job|blowjob|boiolas|bollock|bollok|boner|boob|booob|boooob|booooob|booooooob|breasts|buceta|bugger|bum|butthole|buttmunch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cipa|cl1t|clit|clitoris|cnut|cock|cok|coon|cox|crap|cum|cummer|cumming|cums|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cyalis|cyberfuc|d1ck|damn|dick|dickhead|dildo|dink|dinks|dirsa|dlck|doggin|dogging|donkeyribber|doosh|duche|dyke|ejaculat|ejakulate|f u c k|f u c k e r|f4nny|fag|fanny|fannyflaps|fanyy|fatass|fcuk|fcuker|fcuking|feck|fecker|felching|fellate|fellatio|flange|fook|fooker|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux|fux0r|f_u_c_k|gangbang|gangbanged|gangbangs|gaylord|gaysex|goatse|God|god-dam|god-damned|goddamn|goddamned|hardcoresex|heshe|hoare|hoer|homo|hore|horniest|horny|hotsex|jack-off|jackoff|jap|jerk-off|jism|jiz|jizm|jizz|kawk|knob|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kock|kondum|kondums|kum|kummer|kumming|kums|kunilingus|l3i\+ch|l3itch|labia|lust|lusting|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat3|masterbat|masturbate|mo-fo|mof0|mofo|mothafuck|mother fuck|motherfuck|muff|mutha|muthafeck|muthafuckk|muther|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|nob|nob jokey|nobhead|nobjocky|nobjokey|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|pawn|pecker|penis|penisfucker|phonesex|phuck|phuk|phuked|phuking|phukked|phukking|phuks|phuq|pigfucker|pimpis|piss|poop|porn|prick|pron|pube|pusse|pussi|pussy|rectum|retard|rimjaw|rimming|s hit|s.o.b.|sadist|schlong|screwing|scroat|scrote|scrotum|semen|sex|sh!\+|sh!t|sh1t|shag|shagger|shaggin|shagging|shemale|shi\+|skank|slut|sluts|smegma|smut|snatch|son-of-a-bitch|spunk|s_h_i_t|t1tt1e|teets|teez|testical|testicle|titfuck|tits|titt|titwank|tosser|turd|tw4t|twat|twathead|twatty|v14gra|v1gra|vagina|viagra|vulva|w00se|wang|wank|wanker|wanky|whoar|whore|xrated|xxx|kkk)/gi,N=(null===(i=window.navigator)||void 0===i||null===(r=i.languages)||void 0===r?void 0:r.some((e=>null==e?void 0:e.startsWith("tl"))))?/fuck|shit|cunt|cock|fcuk|hitler|[-._+,;:'`#^/\\]+[A-Za-z]+[-._+,;:'`#^/\\]|putang|asshole|asswhole|gago|bastard|beastial|punyeta|ulol|tae|hayop|bi\+ch|biatch|bitch|bitcher|bitchers|bitches|lintik|pakshet|bloody|blowjob|boiolas|bollock|bollok|boo+b|bogo|breasts|buceta|bugger|butthole|buttmunch|buttplug|c0ck|c0cksucker|carpet muncher|bobo|chink|cl1t|clit|clitoris|cnut|cock|cok|cox|cummer|cumming|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cyalis|cyberfuc|d1ck|dickhead|dildo|dinks|dirsa|dlck|donkeyribber|doosh|duche|dyke|ejaculat|ejakulate|f u c k|f u c k e r|f4nny|fanny|fanyy|fatass|fcuk|fcuker|fcuking|fecker|felching|fellate|fellatio|flange|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux0r|gangbang|gangbanged|gangbangs|gaylord|gaysex|god-dam|god-damned|goddamn|goddamned|hardcoresex|hoare|horniest|horny|hotsex|jack-off|jackoff|jerk-off|jism|jizm|jizz|kawk|puta|knobed|knobend|knobhead|knobjocky|knobjokey|kondum|kondums|kummer|kumming|kunilingus|l3i\+ch|l3itch|labia|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat|mo-fo|mof0|mothafuck|mother fucker|motherfuck|muthafeck|muthafuck|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|penis|penisfucker|phonesex|phuck|phuked|phuking|phukked|phukking|phuks|pigfucker|pimpis|pissflaps|pissin|pissing|pissoff|porno|pricks|pube|pusse|pussi|pussy|rectum|retard|rimjaw|schlong|scrote|scrotum|shagger|shaggin|shagging|shemale|skank|smegma|snatch|spunk|t1tt1e5|t1tties|teez|testical|testicle|titfuck|titties|tittyfuck|tittywank|titwank|tw4t|twat|twathead|twatty|twunt|twunter|tranny|trannie|vagina|viagra|vulva|wang|wank|wanker|wanky|whoar|whore|xxx/gi:/fuck|shit|cunt|cock|fcuk|hitler|[-._+,;:'`#^/\\]+[A-Za-z]+[-._+,;:'`#^/\\]|arrse|asshole|asswhole|ballbag|bastard|beastial|beastiality|bellend|bestiality|bi\+ch|biatch|bloody|blowjob|boiolas|bollock|bollok|boo+b|breasts|buceta|bugger|butthole|buttmunch|buttplug|c0ck|c0cksucker|carpet muncher|cawk|chink|cl1t|clit|clitoris|cnut|cock|cok|cox|cummer|cumming|cumshot|cunilingus|cunillingus|cunnilingus|cunt|cyalis|cyberfuc|d1ck|dickhead|dildo|dinks|dirsa|dlck|donkeyribber|doosh|duche|dyke|ejaculat|ejakulate|f u c k|f u c k e r|f4nny|fanny|fanyy|fatass|fcuk|fcuker|fcuking|fecker|felching|fellate|fellatio|flange|fudge packer|fudgepacker|fuk|fuker|fukker|fukkin|fuks|fukwhit|fukwit|fux0r|gangbang|gangbanged|gangbangs|gaylord|gaysex|god-dam|god-damned|goddamn|goddamned|hardcoresex|hoare|horniest|horny|hotsex|jack-off|jackoff|jerk-off|jism|jizm|jizz|kawk|knobead|knobed|knobend|knobhead|knobjocky|knobjokey|kondum|kondums|kummer|kumming|kunilingus|l3i\+ch|l3itch|labia|m0f0|m0fo|m45terbate|ma5terb8|ma5terbate|masochist|master-bate|masterb8|masterbat*|masterbat|mo-fo|mof0|mothafuck|mother fuck|motherfuck|muthafecker|muthafuck|n1gga|n1gger|nazi|nigg3r|nigg4h|nigga|niggah|niggas|niggaz|nigger|niggers|numbnuts|nutsack|orgasim|orgasims|orgasm|orgasms|p0rn|penis|penisfucker|phonesex|phuck|phuked|phuking|phukked|phukking|phuks|pigfucker|pimpis|pissflaps|pissin|pissing|pissoff|porno|pornography|pornos|pricks|pube|pusse|pussi|pussy|rectum|retard|rimjaw|schlong|scrote|scrotum|shagger|shaggin|shagging|shemale|skank|smegma|snatch|spunk|t1tt1e5|t1tties|teez|testical|testicle|titfuck|titties|tittyfuck|tittywank|titwank|tw4t|twat|twathead|twatty|twunt|twunter|tranny|trannie|vagina|viagra|vulva|wang|wank|wanker|wanky|whoar|whore|xxx/gi,x=e=>(T.lastIndex=0,N.lastIndex=0,k.lastIndex=0,k.test(e)||T.test(e)||N.test(e.replace(/[^a-zA-Z1350]/,""))),C=e=>e.replaceAll(N,"@#$%").replaceAll(T,"!*^+"),L=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return"";if(e.startsWith("blob:")||e.startsWith("data:"))return e;e.startsWith("ipfs:")&&(e=e.replace("ipfs://","//ipfs.io/ipfs/")),e.startsWith(o.je)&&(e=e.replace(o.je,o.pZ));let n=e.indexOf(":"),r=-1===n?e:e.substring(n+1);return t&&-1===e.indexOf("?")&&-1===e.indexOf("#")?"".concat(r,"?v2"):r},M=e=>e?e.startsWith("/assets/ui")?e.replace("/assets/ui/","".concat(o.pZ,"/game/ui/")):e.startsWith("/game")?"".concat(o.pZ).concat(e):e.startsWith("/assets/")?e.replace("/assets/","".concat(o.pZ,"/game/assets/")):e.startsWith("/")&&!e.startsWith("//")?"".concat(o.pZ).concat(e):e:"",j=e=>{let t=(null==e?void 0:e.toLowerCase())||"",n=e;try{if("terravilla"===t)n="terravilla";else if(t.includes("pixelsnftfarm-")){let e=t.replace("pixelsnftfarm-","");e&&(n="pixelsNFTFarm-".concat(e))}else if(t.includes("pixelsnftfarm")){let e=t.replace("pixelsnftfarm","");e&&(n="pixelsNFTFarm".concat(e))}else if(/farm\d+/.test(t)){let e=t.replace("farm","");e&&(n="pixelsNFTFarm-".concat(e))}return n}catch(t){return e}};function D(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.startsWith("pixelsNFTFarm-")?"".concat(e.replace("pixelsNFTFarm-",t?"#":"")):/terravilla/i.test(e)?"TV":e}},89733:function(e,t,n){"use strict";var r=n(34377),i=n(70247);t.Z=new class e{get isInitialized(){return!!e.phaserGame}async loadLibraries(e){return i.Z.loadLibraries(e)}registerEvents(){r.ZP.registerEventListener(r.Vh.RESIZE,(e=>{var t;null===(t=this.roomScene)||void 0===t||t.resize(e.width,e.height)}))}async initGame(){let t=await n.e(989).then(n.t.bind(n,82260,23)),i=await Promise.all([n.e(989),n.e(983)]).then(n.bind(n,39983)),{phaserConfig:o}=await Promise.all([n.e(989),n.e(967)]).then(n.bind(n,2967));return await r.ZP.init(),e.phaserGame||(this.audioScene=new i.default,o.scene=this.audioScene,e.phaserGame=new t.Game(o),this.registerEvents()),e.phaserGame}async freezeRoom(t){e.phaserGame.scene.getScenes(!0).forEach((e=>{e.events.emit("TRANSITION_OUT",t)})),await new Promise((e=>{setTimeout(e,"quick"!==t?1500:1e3)}))}unfreezeRoom(t){e.phaserGame.scene.getScenes(!0).forEach((e=>{e.events.emit("TRANSITION_IN",t)}))}pauseRoom(){e.phaserGame.scene.getScenes(!0).forEach((e=>{e!==this.audioScene&&e.scene.pause()}))}async killScene(){if(e.phaserGame){e.phaserGame.scene.getScenes().forEach((e=>{e!==this.audioScene&&e.scene.remove()})),this.currentScene="loader"}this.roomScene=void 0}static get reentrancyCheck(){var e;return null===(e=window)||void 0===e?void 0:e.pixelsRentrancy}static set reentrancyCheck(e){console.log("setting re-entrancy",e),window&&(window.pixelsRentrancy=e)}async initRoom(t){var i;e.phaserGame||await this.initGame(),null===(i=this.audioScene)||void 0===i||i.clearPositional();let o=await Promise.all([n.e(989),n.e(676),n.e(983),n.e(314)]).then(n.bind(n,4314));if(e.reentrancyCheck)return void console.error("wtf are we doing? We cannot run this twice.");""!=localStorage.getItem("mapIDS")&&(t.mapId=localStorage.getItem("mapIDS")),e.reentrancyCheck=!0;let a="room".concat(t.mapId);localStorage.setItem("mapIDS",""),a===this.currentScene&&(a="".concat(a,"2"));let s=new o.default(a,t.mapId,t.worldId,t.spawn,t.transition),u=setTimeout((()=>{console.log("Have not loaded after 5 seconds!!!!"),r.ZP.sendEventDelayed(r.fb.SLOW_LOAD)}),5e3),l=()=>{let t=this.currentScene&&e.phaserGame.scene.getScene(this.currentScene);t||console.log("no scene to destroy"),clearTimeout(u),e.phaserGame.scene.add(a,s),s.scene.start(),this.currentScene=a,this.roomScene=s,null==t||t.scene.remove(),null==s||s.events.once("create",(()=>{r.ZP.emitEventNow(r.fb.GAME_INITIATED)})),r.ZP.removeEventListerner(r.fb.GAME_CONNECTED,l),r.ZP.removeEventListerner(r.fb.SVR_CANNOTCONNECT,c),e.reentrancyCheck=!1},c=()=>{clearTimeout(u),r.ZP.removeEventListerner(r.fb.GAME_CONNECTED,l),r.ZP.removeEventListerner(r.fb.SVR_CANNOTCONNECT,c),e.reentrancyCheck=!1};r.ZP.registerEventListener(r.fb.GAME_CONNECTED,l),r.ZP.registerEventListener(r.fb.SVR_CANNOTCONNECT,c)}destroyGame(){var t;null===(t=e.phaserGame)||void 0===t||t.destroy(!0),e.phaserGame=null}constructor(){this.currentScene="loader"}}},95047:function(e,t,n){"use strict";n.d(t,{Z:function(){return qe}});var r,i,o,a={};function s(e,t){return function(){return e.apply(t,arguments)}}n.r(a),n.d(a,{hasBrowserEnv:function(){return oe},hasStandardBrowserEnv:function(){return ae},hasStandardBrowserWebWorkerEnv:function(){return se}});let{toString:u}=Object.prototype,{getPrototypeOf:l}=Object,c=(r=Object.create(null),e=>{let t=u.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}),f=e=>(e=e.toLowerCase(),t=>c(t)===e),d=e=>t=>typeof t===e,{isArray:p}=Array,h=d("undefined"),g=f("ArrayBuffer"),v=d("string"),m=d("function"),y=d("number"),b=e=>null!==e&&"object"==typeof e,E=e=>{if("object"!==c(e))return!1;let t=l(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},_=f("Date"),w=f("File"),O=f("Blob"),A=f("FileList"),S=f("URLSearchParams");function I(e,t,{allOwnKeys:n=!1}={}){let r,i;if(null!=e)if("object"!=typeof e&&(e=[e]),p(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{let i,o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;for(r=0;r<a;r++)i=o[r],t.call(null,e[i],i,e)}}function P(e,t){let n;t=t.toLowerCase();let r=Object.keys(e),i=r.length;for(;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}let R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,k=e=>!h(e)&&e!==R,T=(i="undefined"!=typeof Uint8Array&&l(Uint8Array),e=>i&&e instanceof i),N=f("HTMLFormElement"),x=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),C=f("RegExp"),L=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};I(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},M="abcdefghijklmnopqrstuvwxyz",j="0123456789",D={DIGIT:j,ALPHA:M,ALPHA_DIGIT:M+M.toUpperCase()+j},U=f("AsyncFunction");var $={isArray:p,isArrayBuffer:g,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&m(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||m(e.append)&&("formdata"===(t=c(e))||"object"===t&&m(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer)},isString:v,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:b,isPlainObject:E,isUndefined:h,isDate:_,isFile:w,isBlob:O,isRegExp:C,isFunction:m,isStream:e=>b(e)&&m(e.pipe),isURLSearchParams:S,isTypedArray:T,isFileList:A,forEach:I,merge:function e(){let{caseless:t}=k(this)&&this||{},n={},r=(r,i)=>{let o=t&&P(n,i)||i;E(n[o])&&E(r)?n[o]=e(n[o],r):E(r)?n[o]=e({},r):p(r)?n[o]=r.slice():n[o]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&I(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(I(t,((t,r)=>{n&&m(t)?e[r]=s(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a,s={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],(!r||r(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=!1!==n&&l(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:f,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!y(t))return null;let n=Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{let n,r=(e&&e[Symbol.iterator]).call(e);for(;(n=r.next())&&!n.done;){let r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let n,r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:N,hasOwnProperty:x,hasOwnProp:x,reduceDescriptors:L,freezeMethods:e=>{L(e,((t,n)=>{if(m(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;let r=e[n];if(m(r)){if(t.enumerable=!1,"writable"in t)return void(t.writable=!1);t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}}))},toObjectSet:(e,t)=>{let n={};return(e=>{e.forEach((e=>{n[e]=!0}))})(p(e)?e:String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>Number.isFinite(e=+e)?e:t,findKey:P,global:R,isContextDefined:k,ALPHABET:D,generateString:(e=16,t=D.ALPHA_DIGIT)=>{let n="",{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&m(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{let t=Array(10),n=(e,r)=>{if(b(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;let i=p(e)?[]:{};return I(e,((e,t)=>{let o=n(e,r+1);h(o)||(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:U,isThenable:e=>e&&(b(e)||m(e))&&m(e.then)&&m(e.catch)};function V(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}$.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});let B=V.prototype,F={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{F[e]={value:e}})),Object.defineProperties(V,F),Object.defineProperty(B,"isAxiosError",{value:!0}),V.from=(e,t,n,r,i,o)=>{let a=Object.create(B);return $.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),V.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};var Z=n(21876).Buffer;function G(e){return $.isPlainObject(e)||$.isArray(e)}function q(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function H(e,t,n){return e?e.concat(t).map((function(e,t){return e=q(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}let z=$.toFlatObject($,{},null,(function(e){return/^is[A-Z]/.test(e)}));var W=function(e,t,n){if(!$.isObject(e))throw TypeError("target must be an object");t=t||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!$.isUndefined(t[e])}));let r=n.metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(i))throw TypeError("visitor must be a function");function u(e){if(null===e)return"";if($.isDate(e))return e.toISOString();if(!s&&$.isBlob(e))throw new V("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(e)||$.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Z.from(e):e}function l(e,n,i){let s=e;var l;if(e&&!i&&"object"==typeof e)if($.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if($.isArray(e)&&(l=e,$.isArray(l)&&!l.some(G))||($.isFileList(e)||$.endsWith(n,"[]"))&&(s=$.toArray(e)))return n=q(n),s.forEach((function(e,r){$.isUndefined(e)||null===e||t.append(!0===a?H([n],r,o):null===a?n:n+"[]",u(e))})),!1;return!!G(e)||(t.append(H(i,n,o),u(e)),!1)}let c=[],f=Object.assign(z,{defaultVisitor:l,convertValue:u,isVisitable:G});if(!$.isObject(e))throw TypeError("data must be an object");return function e(n,r){if(!$.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),$.forEach(n,(function(n,o){!0===(!($.isUndefined(n)||null===n)&&i.call(t,n,$.isString(o)?o.trim():o,r,f))&&e(n,r?r.concat(o):[o])})),c.pop()}}(e),t};function Y(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function J(e,t){this._pairs=[],e&&W(e,this,t)}let K=J.prototype;function X(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Q(e,t,n){let r;if(!t)return e;let i=n&&n.encode||X,o=n&&n.serialize;if(r=o?o(t,n):$.isURLSearchParams(t)?t.toString():new J(t,n).toString(i)){let t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}K.append=function(e,t){this._pairs.push([e,t])},K.toString=function(e){let t=e?function(t){return e.call(this,t,Y)}:Y;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ee=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},te={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ne="undefined"!=typeof URLSearchParams?URLSearchParams:J,re="undefined"!=typeof FormData?FormData:null,ie="undefined"!=typeof Blob?Blob:null;let oe="undefined"!=typeof window&&"undefined"!=typeof document,ae=(o="undefined"!=typeof navigator&&navigator.product,oe&&0>["ReactNative","NativeScript","NS"].indexOf(o)),se="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var ue={...a,isBrowser:!0,classes:{URLSearchParams:ne,FormData:re,Blob:ie},protocols:["http","https","file","blob","url","data"]},le=function(e){if($.isFormData(e)&&$.isFunction(e.entries)){let t={};return $.forEachEntry(e,((e,n)=>{!function e(t,n,r,i){let o=t[i++];if("__proto__"===o)return!0;let a=Number.isFinite(+o),s=i>=t.length;return o=!o&&$.isArray(r)?r.length:o,s?($.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&$.isObject(r[o])||(r[o]=[]),e(t,n,r[o],i)&&$.isArray(r[o])&&(r[o]=function(e){let t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!a)}($.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0])),n,t,0)})),t}return null};let ce={transitional:te,adapter:["xhr","http"],transformRequest:[function(e,t){let n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=$.isObject(e);if(o&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return i?JSON.stringify(le(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){var a,s;if(r.indexOf("application/x-www-form-urlencoded")>-1)return(a=e,s=this.formSerializer,W(a,new ue.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ue.isNode&&$.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},s))).toString();if((n=$.isFileList(e))||r.indexOf("multipart/form-data")>-1){let t=this.env&&this.env.FormData;return W(n?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if($.isString(e))try{return(0,JSON.parse)(e),$.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){let t=this.transitional||ce.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&$.isString(e)&&(n&&!this.responseType||r)){let n=t&&t.silentJSONParsing;try{return JSON.parse(e)}catch(e){if(!n&&r){if("SyntaxError"===e.name)throw V.from(e,V.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ue.classes.FormData,Blob:ue.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],(e=>{ce.headers[e]={}}));let fe=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);let de=Symbol("internals");function pe(e){return e&&String(e).trim().toLowerCase()}function he(e){return!1===e||null==e?e:$.isArray(e)?e.map(he):String(e)}function ge(e,t,n,r,i){if($.isFunction(r))return r.call(this,t,n);if(i&&(t=n),$.isString(t)){if($.isString(r))return-1!==t.indexOf(r);if($.isRegExp(r))return r.test(t)}}let ve=class{constructor(e){e&&this.set(e)}set(e,t,n){let r=this;function i(e,t,n){let i=pe(t);if(!i)throw Error("header name must be a non-empty string");let o=$.findKey(r,i);o&&void 0!==r[o]&&!0!==n&&(void 0!==n||!1===r[o])||(r[o||t]=he(e))}let o=(e,t)=>$.forEach(e,((e,n)=>i(e,n,t)));return $.isPlainObject(e)||e instanceof this.constructor?o(e,t):$.isString(e)&&(e=e.trim())&&!(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))(e)?o((e=>{let t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&fe[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=pe(e)){let n=$.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(!0===t)return function(e){let t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;t=r.exec(e);)n[t[1]]=t[2];return n}(e);if($.isFunction(t))return t.call(this,e,n);if($.isRegExp(t))return t.exec(e);throw TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=pe(e)){let n=$.findKey(this,e);return!(!n||void 0===this[n]||t&&!ge(0,this[n],n,t))}return!1}delete(e,t){let n=this,r=!1;function i(e){if(e=pe(e)){let i=$.findKey(n,e);i&&(!t||ge(0,n[i],i,t))&&(delete n[i],r=!0)}}return $.isArray(e)?e.forEach(i):i(e),r}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||ge(0,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return $.forEach(this,((r,i)=>{let o=$.findKey(n,i);if(o)return t[o]=he(r),void delete t[i];let a=e?i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n)):String(i).trim();a!==i&&delete t[i],t[a]=he(r),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return $.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&$.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){let t=(this[de]=this[de]={accessors:{}}).accessors,n=this.prototype;function r(e){let r=pe(e);t[r]||(function(e,t){let n=$.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return $.isArray(e)?e.forEach(r):r(e),this}};function me(e,t){let n=this||ce,r=t||n,i=ve.from(r.headers),o=r.data;return $.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function ye(e){return!(!e||!e.__CANCEL__)}function be(e,t,n){V.call(this,null==e?"canceled":e,V.ERR_CANCELED,t,n),this.name="CanceledError"}ve.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$.reduceDescriptors(ve.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),$.freezeMethods(ve),$.inherits(be,V,{__CANCEL__:!0});var Ee=ue.hasStandardBrowserEnv?{write(e,t,n,r,i,o){let a=[e+"="+encodeURIComponent(t)];$.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),$.isString(r)&&a.push("path="+r),$.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function _e(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e:t}var we=ue.hasStandardBrowserEnv?function(){let e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){let r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){let n=$.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function Oe(e,t){let n=0,r=function(e,t){let n;e=e||10;let r=Array(e),i=Array(e),o=0,a=0;return t=void 0!==t?t:1e3,function(s){let u=Date.now(),l=i[a];n||(n=u),r[o]=s,i[o]=u;let c=a,f=0;for(;c!==o;)f+=r[c++],c%=e;if((o=(o+1)%e)===a&&(a=(a+1)%e),u-n<t)return;let d=l&&u-l;return d?Math.round(1e3*f/d):void 0}}(50,250);return i=>{let o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,u=r(s);n=o;let l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var Ae="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r,i,o=e.data,a=ve.from(e.headers).normalize(),{responseType:s,withXSRFToken:u}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}if($.isFormData(o))if(ue.hasStandardBrowserEnv||ue.hasStandardBrowserWebWorkerEnv)a.setContentType(!1);else if(!1!==(i=a.getContentType())){let[e,...t]=i?i.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}let c=new XMLHttpRequest;if(e.auth){let t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(t+":"+n))}let f=_e(e.baseURL,e.url);function d(){if(!c)return;let r=ve.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){let r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Q(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(n(new V("Request aborted",V.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new V("Network Error",V.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||te;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new V(t,r.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,c)),c=null},ue.hasStandardBrowserEnv&&(u&&$.isFunction(u)&&(u=u(e)),u||!1!==u&&we(f))){let t=e.xsrfHeaderName&&e.xsrfCookieName&&Ee.read(e.xsrfCookieName);t&&a.set(e.xsrfHeaderName,t)}void 0===o&&a.setContentType(null),"setRequestHeader"in c&&$.forEach(a.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),$.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),s&&"json"!==s&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",Oe(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Oe(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{c&&(n(!t||t.type?new be(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));let p=function(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);p&&-1===ue.protocols.indexOf(p)?n(new V("Unsupported protocol "+p+":",V.ERR_BAD_REQUEST,e)):c.send(o||null)}))};let Se={http:null,xhr:Ae};$.forEach(Se,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));let Ie=e=>`- ${e}`,Pe=e=>$.isFunction(e)||null===e||!1===e;var Re=e=>{let t,n;e=$.isArray(e)?e:[e];let{length:r}=e,i={};for(let o=0;o<r;o++){let r;if(n=t=e[o],!Pe(t)&&void 0===(n=Se[(r=String(t)).toLowerCase()]))throw new V(`Unknown adapter '${r}'`);if(n)break;i[r||"#"+o]=n}if(!n){let e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new V("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(Ie).join("\n"):" "+Ie(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function ke(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new be(null,e)}function Te(e){return ke(e),e.headers=ve.from(e.headers),e.data=me.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Re(e.adapter||ce.adapter)(e).then((function(t){return ke(e),t.data=me.call(e,e.transformResponse,t),t.headers=ve.from(t.headers),t}),(function(t){return!ye(t)&&(ke(e),t&&t.response&&(t.response.data=me.call(e,e.transformResponse,t.response),t.response.headers=ve.from(t.response.headers))),Promise.reject(t)}))}let Ne=e=>e instanceof ve?e.toJSON():e;function xe(e,t){t=t||{};let n={};function r(e,t,n){return $.isPlainObject(e)&&$.isPlainObject(t)?$.merge.call({caseless:n},e,t):$.isPlainObject(t)?$.merge({},t):$.isArray(t)?t.slice():t}function i(e,t,n){return $.isUndefined(t)?$.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!$.isUndefined(t))return r(void 0,t)}function a(e,t){return $.isUndefined(t)?$.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}let u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(Ne(e),Ne(t),!0)};return $.forEach(Object.keys(Object.assign({},e,t)),(function(r){let o=u[r]||i,a=o(e[r],t[r],r);$.isUndefined(a)&&o!==s||(n[r]=a)})),n}let Ce="1.6.7",Le={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Le[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));let Me={};Le.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new V(r(i," has been removed"+(t?" in "+t:"")),V.ERR_DEPRECATED);return t&&!Me[i]&&(Me[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var je={assertOptions:function(e,t,n){if("object"!=typeof e)throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let o=r[i],a=t[o];if(a){let t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new V("option "+o+" must be "+n,V.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new V("Unknown option "+o,V.ERR_BAD_OPTION)}},validators:Le};let De=je.validators,Ue=class{constructor(e){this.defaults=e,this.interceptors={request:new ee,response:new ee}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=Error();let n=t.stack?t.stack.replace(/^.+\n/,""):"";e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}throw e}}_request(e,t){let n,r;"string"==typeof e?(t=t||{}).url=e:t=e||{},t=xe(this.defaults,t);let{transitional:i,paramsSerializer:o,headers:a}=t;void 0!==i&&je.assertOptions(i,{silentJSONParsing:De.transitional(De.boolean),forcedJSONParsing:De.transitional(De.boolean),clarifyTimeoutError:De.transitional(De.boolean)},!1),null!=o&&($.isFunction(o)?t.paramsSerializer={serialize:o}:je.assertOptions(o,{encode:De.function,serialize:De.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&$.merge(a.common,a[t.method]);a&&$.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=ve.concat(s,a);let u=[],l=!0;this.interceptors.request.forEach((function(e){("function"!=typeof e.runWhen||!1!==e.runWhen(t))&&(l=l&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));let c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let f=0;if(!l){let e=[Te.bind(this),void 0];for(e.unshift.apply(e,u),e.push.apply(e,c),r=e.length,n=Promise.resolve(t);f<r;)n=n.then(e[f++],e[f++]);return n}r=u.length;let d=t;for(f=0;f<r;){let t=u[f++],n=u[f++];try{d=t(d)}catch(e){n.call(this,e);break}}try{n=Te.call(this,d)}catch(e){return Promise.reject(e)}for(f=0,r=c.length;f<r;)n=n.then(c[f++],c[f++]);return n}getUri(e){return Q(_e((e=xe(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],(function(e){Ue.prototype[e]=function(t,n){return this.request(xe(n||{},{method:e,url:t,data:(n||{}).data}))}})),$.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(xe(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ue.prototype[e]=t(),Ue.prototype[e+"Form"]=t(!0)}));let $e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($e).forEach((([e,t])=>{$e[t]=e}));let Ve=function e(t){let n=new Ue(t),r=s(Ue.prototype.request,n);return $.extend(r,Ue.prototype,n,{allOwnKeys:!0}),$.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(xe(t,n))},r}(ce);Ve.Axios=Ue,Ve.CanceledError=be,Ve.CancelToken=class e{constructor(e){let t;if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise((function(e){t=e}));let n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t,r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new be(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},Ve.isCancel=ye,Ve.VERSION=Ce,Ve.toFormData=W,Ve.AxiosError=V,Ve.Cancel=Ve.CanceledError,Ve.all=function(e){return Promise.all(e)},Ve.spread=function(e){return function(t){return e.apply(null,t)}},Ve.isAxiosError=function(e){return $.isObject(e)&&!0===e.isAxiosError},Ve.mergeConfig=xe,Ve.AxiosHeaders=ve,Ve.formToJSON=e=>le($.isHTMLForm(e)?new FormData(e):e),Ve.getAdapter=Re,Ve.HttpStatusCode=$e,Ve.default=Ve;var Be=n(60604),Fe=n(79750),Ze=n(83928),Ge=n(42379);var qe=new class e{async logAction(e){Ve.get("".concat(this.baseAPIURL,"/log?message=")+encodeURIComponent(e))}static webAssemblySupported(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){let e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}getStytchTelemetry(){if(!e.webAssemblySupported())throw{message:"wasm-required"};return new Promise(((e,t)=>{setTimeout((()=>{t("no-telemetryId-available")}),3e4),window.GetTelemetryID?window.GetTelemetryID("public-token-live-e4dbf337-9f27-447f-908f-17038ec8d940").then((n=>{n||(console.log("GetTelemetryID returned nothing"),t({message:"no-telemetryId-available"})),e(n)})):(console.log("GetTelemetryID not on window"),t({message:"no-telemetryId-available"}))}))}async captchaOptions(e){let t={};return t.telemetryId=await this.getStytchTelemetry(),console.log("got telemetry",t),t}async completeEmailAuthentication(e,t,n,r){let i={email:e,password:t,create:n,mapId:r,...await this.captchaOptions("start_email_authentication")};try{let{data:e}=await Ve.post("".concat(this.baseAPIURL,"/auth/email_authentication"),i);return this.sessionToken=e.sessionToken,this.walletProvider="email",(0,Ze.Ul)("pixels-session",this.sessionToken),(0,Ze.Ul)("wallet-provider","email"),e}catch(e){var o;if(null===(o=e.response)||void 0===o?void 0:o.data)throw e.response.data;throw{error:"server-unreachable",message:"No response from server. Please try again later."}}}async startCryptoAuthentication(e){try{let{data:t}=await Ve.post("".concat(this.baseAPIURL,"/auth/start_crypto_authentication"),{walletAddress:e,...await this.captchaOptions("start_crypto_authentication")},{headers:{"Content-Type":"application/json"}});if(!t.challenge&&t.message)throw t;return t.challenge}catch(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data)throw e.response.data;throw{error:"server-unreachable",message:"No response from server. Please try again later."}}}async completeCryptoAuthentication(e,t,n,r){try{let{data:i}=await Ve.post("".concat(this.baseAPIURL,"/auth/complete_crypto_authentication"),{walletAddress:e,signature:t,mapId:r,tenant:(0,Fe.F5)(),walletProvider:n});return this.sessionToken=i.sessionToken,this.walletProvider=n,(0,Ze.Ul)("pixels-session",this.sessionToken),(0,Ze.Ul)("wallet-provider",n),i}catch(e){var i;if(null===(i=e.response)||void 0===i?void 0:i.data)throw e.response.data;throw{error:"server-unreachable",message:"No response from server. Please try again later."}}}async startOneTimeAuthentication(e,t,n){try{let{data:r}=await Ve.post("".concat(this.baseAPIURL,"/auth/start_onetime_authentication"),{otpckind:e,identifier:"email"===e?n:t,...await this.captchaOptions("start_onetime_authentication")});return r.method_id}catch(e){var r;if(null===(r=e.response)||void 0===r?void 0:r.data)throw e.response.data;throw{error:"server-unreachable",message:"No response from server. Please try again later."}}}async completeOneTimeAuthentication(e,t,n){try{let{data:r}=await Ve.post("".concat(this.baseAPIURL,"/auth/complete_onetime_authentication"),{id:e,code:t,mapId:n,tenant:(0,Fe.F5)()});return this.sessionToken=r.sessionToken,this.walletProvider="otpc",(0,Ze.Ul)("pixels-session",this.sessionToken),(0,Ze.Ul)("wallet-provider","otpc"),r}catch(e){var r;if(null===(r=e.response)||void 0===r?void 0:r.data)throw e.response.data;throw{error:"server-unreachable",message:"No response from server. Please try again later."}}}async initialize(e,t){let n;try{let r=(0,Fe.F5)(),i=(0,Ze.Ul)("pixels-session");if(!i)return null;let o=(0,Ze.Ul)("wallet-provider")||t||"metamask";n=(await Ve.post("".concat(this.baseAPIURL,"/auth/initialize"),{authToken:i,mapId:e,tenant:r,walletProvider:o,ver:Be.WX,...await this.captchaOptions("validateSession")})).data,this.sessionToken=n.sessionToken,this.walletProvider=o}catch(e){if(e.response&&e.response.data&&e.response.data.error)throw e.response.data;if(!e.response)throw{error:"server-unreachable",message:"No response from server when authenticating. Check Internet Connection."};return null}if(!n.sessionToken&&n.error)throw n;return n}async createPlayer(e,t){let{data:n}=await Ve.post("".concat(this.baseAPIURL,"/auth/player/upsert"),{username:e,avatarPieces:t,authToken:this.sessionToken,walletProvider:this.walletProvider,...await this.captchaOptions("create_player"),tenant:(0,Fe.F5)()});return n}async rateLimitedGet(e,t){for(;this.limiter;)await this.limiter;return this.limiter=(async()=>{var n;let r=1e3-(Date.now()-(null!==(n=this.lastcall)&&void 0!==n?n:0));r>0&&await new Promise((e=>setTimeout(e,r)));let{data:i}=await Ve.get(t,e);return this.lastcall=Date.now(),i})(),this.limiter.then((e=>(this.limiter=void 0,e)))}async fetchPlayerDetails(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={headers:{Authorization:this.sessionToken}};return this.rateLimitedGet(n,"".concat(this.baseAPIURL,"/player?mid=").concat(e,"&detail=").concat(t))}async fetchPlayersUsernames(e){if(!(null==e?void 0:e.length))return{};let t={headers:{Authorization:this.sessionToken}},n=e.map((e=>"mid=".concat(e))).join("&");try{let{data:e}=await Ve.get("".concat(this.baseAPIURL,"/player/usernames?").concat(n),t);return e}catch(e){return{}}}async signOut(){let e=(0,Ze.Ul)("pixels-session");if(this.sessionToken=void 0,(0,Ze.Ul)("pixels-session",null),(0,Ze.Ul)("wallet-provider",null),(0,Ze.Ul)("player-nfts",null),this.sessionToken=void 0,e){let{data:t}=await Ve.post("".concat(this.baseAPIURL,"/auth/sign_out"),{authToken:e});return t}}hashVersion(e){let t={6.122:"87bbbwei20",6.209:"--78DEVO+spins"};if(t[e])return t[e];let n=0;for(let t=0,r=e.length;t<r;t++){n=(n<<5)-n+(e.charCodeAt(t)+t-17)|0}return n}async fetchGameLibrary(){let e=(0,Fe.F5)(),t={headers:{"x-client-version":this.hashVersion(Be.WX.toString())}},{data:n}=await this.axiosget("".concat(this.baseAPIURL,"/game/library?tenant=").concat(e,"&ver=").concat(Be.WX),t);return n}async fetchGameLibraryExtras(e){let{data:t}=await Ve.post("".concat(this.baseAPIURL,"/game/library"),e);return t}async fetchMap(e){let{data:t}=await this.axiosget("".concat(this.baseAPIURL,"/map/").concat(e));return t}async fetchingUgcDecorations(e){let{onlyFetchPending:t}=e,{data:n}=await this.axiosget("".concat(this.baseAPIURL,"/game/ugc/decorations?").concat(t?"onlyFetchPending=true":""));return n}async approveUgcDecoration(e){let{itemId:t,objectId:n}=e,{data:r}=await Ve.post("".concat(this.baseAPIURL,"/game/ugc/decorations/approve"),{authToken:(0,Ze.Ul)("pixels-session"),itemId:t,objectId:n});return r}async rejectUgcDecoration(e){let{itemId:t,objectId:n,reason:r}=e,{data:i}=await Ve.post("".concat(this.baseAPIURL,"/game/ugc/decorations/reject"),{authToken:(0,Ze.Ul)("pixels-session"),itemId:t,objectId:n,reason:r});return i}async axiosget(e,t){let n=Date.now(),r=-1===e.indexOf("?")?"".concat(e,"?v=").concat(n):"".concat(e,"&v=").concat(n);return Ve.get(r,t)}async fetchFeaturedMaps(){let{data:e}=await Ve.get("".concat(this.baseAPIURL,"/maps/featured"));return e}async getStoreItemStockSupply(e,t){let{data:n}=await this.axiosget("".concat(this.baseAPIURL,"/store/").concat(e,"/").concat(t));return n}async fetchPlayerPets(e){console.log("getting pets from ".concat(this.baseAPIURL));let{data:t}=await this.axiosget("".concat(this.baseAPIURL,"/pets/owner/").concat(e||"0"));return t}async fetchPet(e){let{data:t}=await this.axiosget("".concat(this.baseAPIURL,"/pet/").concat(e));return t}async fetchPetPreview(e,t){let{data:n}=await this.axiosget("".concat(this.baseAPIURL,"/pet/").concat(e,"/").concat(t));return n}async fetchNFTStats(e){let{data:t}=await Ve.get("".concat(this.baseAPIURL,"/nft/stats/").concat(e));return t}async voteForNFT(e,t,n){await Ve.put("".concat(this.baseAPIURL,"/nft/vote"),{collection:e,token:t,vote:n})}getPlayerCachedNfts(){try{let e=(0,Ze.Ul)("player-nfts")||"";return e?JSON.parse(e):null}catch(e){console.log(e)}}savePlayerNfts(e,t){try{let n={nfts:e,timestamp:Date.now(),addresses:t};(0,Ze.Ul)("player-nfts",JSON.stringify(n))}catch(e){console.log(e)}}async getNFTTraitData(e,t){let n={headers:{Authorization:this.sessionToken}};if(!this.sessionToken)return[];let{data:r}=await Ve.get("".concat(this.baseAPIURL,"/player/collections/getNFTData?collection=").concat(e,"&token=").concat(t),n);return r||{}}async getTopFarms(){let{data:e}=await Ve.get("".concat(this.baseCacheUrl,"/discoverability/top_farms"));return e}async getTopNFTFarms(){let{data:e}=await Ve.get("".concat(this.baseCacheUrl,"/discoverability/nft/top_farms"));return e}async getTopFreeFarms(){let{data:e}=await Ve.get("".concat(this.baseCacheUrl,"/discoverability/free/top_farms"));return e}async fetchPlayerFarms(e){let{data:t}=await Ve.get("".concat(this.baseAPIURL,"/player/farms?player_id=").concat(e));return t}async searchFarms(e){let{data:t}=await Ve.get("".concat(this.baseAPIURL,"/player/search?input=").concat(encodeURIComponent(e)));return t}async farmDetails(e){let{data:t}=await Ve.get("".concat(this.baseAPIURL,"/infiniportal/farm_details/").concat(e));return t}async hatchPet(e){try{let{data:t}=await Ve.post("".concat(this.baseAPIURL,"/pets/hatch"),{entity:e},{headers:{Authorization:this.sessionToken}});return t}catch(e){return console.log(null==e?void 0:e.message),!1}}async getRoomId(e,t){let{data:n}=await this.axiosget("".concat(this.baseColyeusURL,"/game/findroom/").concat(encodeURIComponent(e),"/").concat(t));if(!(null==n?void 0:n.roomId))throw Error("please-reload-app");return"".concat(null==n?void 0:n.roomId,"/").concat(null==n?void 0:n.server)}async getWorldTotals(){let{data:e}=await this.axiosget("".concat(this.baseAPIURL,"/game/worlds"));return e}async fetchMarketplaceListingCounts(){let{data:e}=await this.axiosget("".concat(this.baseCacheUrl,"/marketplace/listings/count"));return e}async fetchMarketplaceListingsForItem(e,t){let n=Date.now();if(this.marketTime&&n-this.marketTime<2e3){let e=this.marketTime+2e3-n;await new Promise((t=>setTimeout(t,e)))}let r={headers:{Authorization:this.sessionToken}},{data:i}=await this.axiosget("".concat(this.baseAPIURL,"/marketplace/item/").concat(e,"?pid=").concat(t),r);return this.marketTime=Date.now(),i}async fetchMarketplaceListingsForPlayer(e){let{data:t}=await this.axiosget("".concat(this.baseAPIURL,"/marketplace/player/").concat(e));return t}async fetchPlayerUGC(){let{data:e}=await Ve.post("".concat(this.baseAPIURL,"/game/ugc/player"),{token:this.sessionToken});return e}async checkForStytchAccount(e){let{email:t,phone:n,eth:r,kind:i}=e,o={headers:{"x-client-version":this.hashVersion(Be.WX.toString())}},{data:a}=await this.axiosget("".concat(this.baseAPIURL,"/auth/check/stytch_user"),{params:{email:"email"===i?t:void 0,phone:"sms"===i||"whatsapp"===i?n:void 0,eth:"eth"===i?r:void 0,ver:Be.WX},...o});return a}constructor(e,t){this.baseURL=e,this.version=t,this.baseAPIURL="".concat(e,"/").concat(t),this.baseCacheUrl="".concat(e,"/cache"),this.baseColyeusURL=e}}(Ge.LB,"v1")},18496:function(e,t,n){"use strict";var r=n(95047);t.Z=new class{get sessionToken(){return this.api.sessionToken}get walletProvider(){return this.api.walletProvider}async startCryptoAuthentication(e){return this.api.startCryptoAuthentication(e)}async completeAuthentication(e,t,n,r){return this.api.completeCryptoAuthentication(e,t,n,r)}async completeEmailAuthentication(e,t,n,r){return this.api.completeEmailAuthentication(e,t,n,r)}async startOneTimeAuthentication(e,t,n){return this.api.startOneTimeAuthentication(e,t,n)}async completeOneTimeAuthentication(e,t,n){return this.api.completeOneTimeAuthentication(e,t,n)}async initialize(e,t){return this.api.initialize(e,t)}async signOut(){return this.api.signOut()}async createPlayer(e,t){return this.api.createPlayer(e,t)}async fetchPlayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.api.fetchPlayerDetails(e,t)}async checkForStytchAccount(e){let{email:t,phone:n,eth:r,kind:i}=e;return this.api.checkForStytchAccount({email:t,phone:n,eth:r,kind:i})}constructor(e){this.api=e}}(r.Z)},39135:function(e,t,n){"use strict";n.d(t,{Z:function(){return W},W:function(){return z}});var r,i,o,a=n(34853),s=n(57715);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=[],c=l.forEach,f=l.slice;function d(e){return c.call(f.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}function p(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":u(XMLHttpRequest))}var h=n(83154),g=n.t(h,2);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof fetch&&(r="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),p()&&("undefined"!=typeof global&&global.XMLHttpRequest?i=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(i=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?o=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(o=window.ActiveXObject)),r||!g||i||o||(r=h||g),"function"!=typeof r&&(r=void 0);var m=function(e,t){if(t&&"object"===v(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},y=function(e,t,n){r(e,t).then((function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then((function(t){n(null,{status:e.status,data:t})})).catch(n)})).catch(n)},b=!1,E=function(e,t,n,r){n&&"object"===v(n)&&(n=m("",n).slice(1)),e.queryStringParams&&(t=m(t,e.queryStringParams));try{(a=i?new i:new o("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",t,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,n&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var a,s=e.customHeaders;if(s="function"==typeof s?s():s)for(var u in s)a.setRequestHeader(u,s[u]);a.onreadystatechange=function(){a.readyState>3&&r(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(n)}catch(e){console&&console.log(e)}},_=function(e,t,n,i){return"function"==typeof n&&(i=n,n=void 0),i=i||function(){},r?function(e,t,n,r){e.queryStringParams&&(t=m(t,e.queryStringParams));var i=d({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);n&&(i["Content-Type"]="application/json");var o="function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions,a=d({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},b?{}:o);try{y(t,a,r)}catch(e){if(!o||0===Object.keys(o).length||!e.message||0>e.message.indexOf("not implemented"))return r(e);try{Object.keys(o).forEach((function(e){delete a[e]})),y(t,a,r),b=!0}catch(e){r(e)}}}(e,t,n,i):p()||"function"==typeof ActiveXObject?E(e,t,n,i):void i(Error("No fetch and no xhr implementation found!"))};function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){var e;function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return e=[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=d(n,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){var r,i;return i=n||"",t in(r={})?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i,r},request:_,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.allOptions=r,this.services&&this.options.reloadInterval&&setInterval((function(){return t.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,i){var o,a,s=this,u=this.options.loadPath;"function"==typeof this.options.loadPath&&(u=this.options.loadPath(e,n)),(u=(a=o=u)&&"function"==typeof a.then?o:Promise.resolve(o)).then((function(o){if(!o)return i(null,{});var a=s.services.interpolator.interpolate(o,{lng:e.join("+"),ns:n.join("+")});s.loadUrl(a,i,t,r)}))}},{key:"loadUrl",value:function(e,t,n,r){var i=this;this.options.request(this.options,e,void 0,(function(o,a){var s,u;if(a&&(a.status>=500&&a.status<600||!a.status))return t("failed loading "+e+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return t("failed loading "+e+"; status code: "+a.status,!1);if(!a&&o&&o.message&&o.message.indexOf("Failed to fetch")>-1)return t("failed loading "+e+": "+o.message,!0);if(o)return t(o,!1);try{s="string"==typeof a.data?i.options.parse(a.data,n,r):a.data}catch(t){u="failed parsing "+e+" to json"}if(u)return t(u,!1);t(null,s)}))}},{key:"create",value:function(e,t,n,r,i){var o=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var a=this.options.parsePayload(t,n,r),s=0,u=[],l=[];e.forEach((function(n){var r=o.options.addPath;"function"==typeof o.options.addPath&&(r=o.options.addPath(n,t));var c=o.services.interpolator.interpolate(r,{lng:n,ns:t});o.options.request(o.options,c,a,(function(t,n){s+=1,u.push(t),l.push(n),s===e.length&&i&&i(u,l)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,i=t.logger,o=n.language;if(!o||"cimode"!==o.toLowerCase()){var a=[],s=function(e){r.toResolveHierarchy(e).forEach((function(e){0>a.indexOf(e)&&a.push(e)}))};s(o),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return s(e)})),a.forEach((function(t){e.allOptions.ns.forEach((function(e){n.read(t,e,"read",null,null,(function(r,o){r&&i.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&o&&i.log("loaded namespace ".concat(e," for language ").concat(t),o),n.loaded("".concat(t,"|").concat(e),r,o)}))}))}))}}}],w(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();O.type="backend";var A=n(15671),S=n(43144),I=[],P=I.forEach,R=I.slice,k=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,T=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+6e4*n)),r&&(i.domain=r),document.cookie=function(e,t,n){var r=n||{};r.path=r.path||"/";var i=encodeURIComponent(t),o="".concat(e,"=").concat(i);if(r.maxAge>0){var a=r.maxAge-0;if(Number.isNaN(a))throw Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(r.domain){if(!k.test(r.domain))throw TypeError("option domain is invalid");o+="; Domain=".concat(r.domain)}if(r.path){if(!k.test(r.path))throw TypeError("option path is invalid");o+="; Path=".concat(r.path)}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw TypeError("option expires is invalid");o+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return o}(e,encodeURIComponent(t),i)},N=function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},x={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var n=N(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&T(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},C={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");o>0&&r[i].substring(0,o)===e.lookupQuerystring&&(t=r[i].substring(o+1))}}return t}},L=null,M=function(){if(null!==L)return L;try{L="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){L=!1}return L},j={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&M()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&M()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},D=null,U=function(){if(null!==D)return D;try{D="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){D=!1}return D},$={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&U()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&U()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},V={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},B={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(t=n.getAttribute("lang")),t}},F={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof n[e.lookupFromPathIndex])return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},Z={name:"subdomain",lookup:function(e){var t="number"==typeof e.lookupFromSubdomainIndex?e.lookupFromSubdomainIndex+1:1,n="undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}},G=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,A.Z)(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return(0,S.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return P.call(R.call(arguments,1),(function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(x),this.addDetector(C),this.addDetector(j),this.addDetector($),this.addDetector(V),this.addDetector(B),this.addDetector(F),this.addDetector(Z)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var n=[];return e.forEach((function(e){if(t.detectors[e]){var r=t.detectors[e].lookup(t.options);r&&"string"==typeof r&&(r=[r]),r&&(n=n.concat(r))}})),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)})))}}]),e}();G.type="languageDetector";var q=n(79750);let H=!1;a.ZP.on("onLoaded",(()=>{console.log("loading i18n"),H=!0})),a.ZP.use(O).use(G).use(s.Db).init({debug:!1,fallbackLng:"en",load:"languageOnly",preload:["en"],ns:["ui","game","quest"],defaultNS:"ui",react:{useSuspense:!1},interpolation:{escapeValue:!1},backend:{crossDomain:!0,loadPath:function(){let e=(0,q.F5)();return"//pixels-server.pixels.xyz/v1/i18n/{{ns}}/{{lng}}"+"?tenant=".concat(e)}}},(e=>{H=!e}));let z=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||!H)return a.ZP.reloadResources()};var W=a.ZP},70247:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(95047);function i(e){let{keyField:t,first:n,second:r,mergefields:i}=e,o=[].concat(null!=n?n:[]);if(!r||0===r.length)return o;let a={};return o.forEach(((e,n)=>{t in e&&(a[e[t]]=n)})),r.forEach((e=>{let n=e[t];if(n in a){if(i){let t=a[n];o[t]={...o[t],...e}}}else o.push(e)})),o}let o=(e,t)=>{var n,r,a,s;let u=t.entities[e];if(!u||"generic"!==u.type||!(null===(n=u.generic)||void 0===n?void 0:n.inherits))return u;let l=u.generic,c=o(l.inherits,t);if(!(null==c?void 0:c.generic))return u;let f=c.generic;return u.generic.defaultState=l.defaultState||f.defaultState,u.generic.states=(null===(r=l.states)||void 0===r?void 0:r.length)?i({keyField:"name",second:l.states,first:f.states,mergefields:!0}):f.states,u.generic.layers=(null===(a=l.layers)||void 0===a?void 0:a.length)?i({keyField:"depth",second:l.layers,first:f.layers,mergefields:!0}):f.layers,u.generic.transitions=(null===(s=l.transitions)||void 0===s?void 0:s.length)?i({keyField:"from_to",second:l.transitions,first:f.transitions,mergefields:!1}):f.transitions,delete u.generic.inherits,u};var a=new class{async loadMap(e){return this.api.fetchMap(e)}clearGameLibrary(){this.gameLibraryPromise=void 0}async loadLibraries(e){try{this.gameLibraryPromise||(this.gameLibraryPromise=this.api.fetchGameLibrary(),this.gameLibraryPromise.then((e=>{this.transformGameLibrary(e)})).catch((()=>{this.gameLibraryPromise=void 0})));let t=[this.gameLibraryPromise];e&&this.mapId!==e&&(this.mapInfoPromise=this.api.fetchMap(e),this.mapLibrary=void 0,this.mapId=e),this.mapInfoPromise&&t.push(this.mapInfoPromise);try{await Promise.all(t)}catch(e){this.gameLibraryPromise=void 0,this.mapInfoPromise=void 0}if(this.mapInfoPromise){let e=await this.mapInfoPromise;e&&(this.mapLibrary={id:e.id,labels:e.labels,type:e.type,config:{}})}return this.gameLibrary}catch(e){return console.log("could not load game library",e),this.gameLibraryPromise=void 0,void(this.mapInfoPromise=void 0)}}transformGameLibrary(e){e.sounds&&(e.sounds=new Map(e.sounds.map((e=>[e.id,e])))),e.entities&&Object.keys(e.entities).forEach((t=>{o(t,e)})),this.gameLibrary=e}transformGameLibraryUpdate(e){let t={sounds:e.sounds};return Object.entries(e).forEach((e=>{let[n,r]=e;"sounds"!==n&&(t[n]={},r.forEach((e=>{t[n][e.id]=e})))})),t}isValid(){return this.gameLibrary&&!!this.gameLibrary.objects&&!!this.gameLibrary.avatars}async reloadOne(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="".concat(e.kind,"s");if(!this.gameLibrary&&!t)return null;try{let t=await this.api.fetchGameLibraryExtras({[n]:[e.id]});var r;if(t)return this.updateGameLibrary(this.transformGameLibraryUpdate(t)),"sounds"===n?this.gameLibrary.sounds.get(e.id):null===(r=this.gameLibrary[n])||void 0===r?void 0:r[e.id]}catch(e){return null}}updateGameLibrary(e){var t;if(!this.gameLibrary)return console.log("got library with ".concat(Object.values(null!==(t=e.tilesets)&&void 0!==t?t:{}).length," tilesets")),void(this.gameLibrary=e);e.objects&&Object.assign(this.gameLibrary.objects,e.objects),e.stores&&Object.assign(this.gameLibrary.stores,e.stores),e.entities&&(Object.assign(this.gameLibrary.entities,e.entities),Object.keys(e.entities).forEach((e=>{o(e,this.gameLibrary)}))),e.sounds&&e.sounds.forEach((e=>{this.gameLibrary.sounds.set(e.id,e)})),e.tilesets&&Object.assign(this.gameLibrary.tilesets,e.tilesets),e.quests&&Object.assign(this.gameLibrary.quests,e.quests)}getGameObject(e){var t;return null===(t=this.gameLibrary)||void 0===t?void 0:t.objects[e]}getGameNonWallObjects(){var e;this.nonWallObjects||(this.nonWallObjects=(null===(e=this.gameLibrary)||void 0===e?void 0:e.objects)?Object.values(this.gameLibrary.objects).filter((e=>!e.wall)):void 0);return this.nonWallObjects}getGameWallObjects(){var e;this.wallObjects||(this.wallObjects=(null===(e=this.gameLibrary)||void 0===e?void 0:e.objects)?Object.values(this.gameLibrary.objects).filter((e=>!!e.wall)):void 0);return this.wallObjects}getGameWallCategories(){if(!this.wallCategories){let e=this.getGameWallObjects();this.wallCategories=null==e?void 0:e.reduce(((e,t)=>({...e,[t.wall.type]:[...e[t.wall.type]||[],t]})),{})}return this.wallCategories}getGameTilesObjects(){var e;return(null===(e=this.gameLibrary)||void 0===e?void 0:e.tilesets)?Object.values(this.gameLibrary.tilesets):void 0}getGameItems(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.items}getGameItem(e){var t;return null===(t=this.gameLibrary)||void 0===t?void 0:t.items[e]}getGameEntities(){var e;if(this.gameLibrary)return Object.values(null===(e=this.gameLibrary)||void 0===e?void 0:e.entities)}getGameEntity(e){var t;return null===(t=this.gameLibrary)||void 0===t?void 0:t.entities[e]}getGameAvatar(e){var t;return null===(t=this.gameLibrary)||void 0===t?void 0:t.avatars[e]}getGameAvatars(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.avatars}getTenants(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.tenants}getTraitVariations(e,t){let n,r=[],i=t;if(t.includes(".")){let[e,r]=t.split(".");n=r,i=e}if(e&&(r=Object.values(e).filter((e=>e.type===i))),n){let e=[r[0]];return r.forEach((t=>{e.map((e=>e[n])).includes(t[n])||e.push(t)})),e}return r}getGameAvatarTypesOfTraits(e){let t=new Set,n=this.getGameAvatar(e);return n&&n.defaults&&("function"==typeof n.defaults.forEach?n.defaults.forEach((e=>{"item"!==e.type&&("hair"!==e.type?t.add(e.type):(t.add("".concat(e.type,".style")),t.add("".concat(e.type,".color"))))})):"object"==typeof n.defaults&&Object.keys(n.defaults).forEach((e=>{t.add(e)}))),Array.from(t.values())}getGameAvatarTraitsOfType(e,t){let n,r=[],i=this.getGameAvatar(e),o=t;if(t.includes(".")){let[e,r]=t.split(".");n=r,o=e}if(i&&i.defaults&&(r=Object.values(i.defaults).filter((e=>e.type===o))),n){let e=[r[0]];return r.forEach((t=>{e.map((e=>e[n])).includes(t[n])||e.push(t)})),e}return r}getGameAvatarWithRandomTraits(e){let t=this.getGameAvatarTypesOfTraits(e).map((t=>this.getGameAvatarTraitsOfType(e,t))).map((e=>e[Math.floor(Math.random()*e.length)]));return t.reduce(((e,t)=>({...e,[t.type]:t})),{})}getGameTiles(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.tilesets}getGameSoils(){var e,t;if(null===(e=this.gameLibrary)||void 0===e?void 0:e.entities)return Object.values(null===(t=this.gameLibrary)||void 0===t?void 0:t.entities)}getGameSound(e){var t;return(null===(t=this.gameLibrary)||void 0===t?void 0:t.sounds)&&this.gameLibrary.sounds.get(e)}getGameCurrency(e){var t;return null===(t=this.gameLibrary)||void 0===t?void 0:t.currencies[e]}getGameCurrencies(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.currencies}setMapLibrary(e){(null==e?void 0:e.config)&&(this.mapLibrary=e)}async updateLibraryItems(e){var t;if(this.gameLibrary&&(null===(t=this.mapLibrary)||void 0===t?void 0:t.config)&&(null==e?void 0:e.length))try{let t=await this.api.fetchGameLibraryExtras({items:e});this.updateGameLibrary(this.transformGameLibraryUpdate(t))}catch(e){console.error("failure getting supplemental objects")}}async scanGameLibrary(e){var t;if(!this.gameLibrary||!(null===(t=this.mapLibrary)||void 0===t?void 0:t.config))return;let n={objects:new Set,entities:new Set,tilesets:new Set,sounds:new Set};this.mapLibrary.config.objects&&Object.entries(this.mapLibrary.config.objects).forEach((e=>{let[,t]=e;this.gameLibrary.objects&&Object.hasOwn(this.gameLibrary.objects,t.object)||n.objects.add(t.object)})),this.mapLibrary.config.tiles&&Object.entries(this.mapLibrary.config.tiles).forEach((e=>{let[,t]=e;this.gameLibrary.tilesets&&Object.hasOwn(this.gameLibrary.tilesets,t.tileset)||n.tilesets.add(t.tileset)})),this.mapLibrary.config.sounds&&this.mapLibrary.config.sounds.forEach((e=>{this.gameLibrary.sounds&&this.gameLibrary.sounds.has(e)||n.sounds.add(e)})),e.forEach((e=>{this.gameLibrary.entities&&Object.hasOwn(this.gameLibrary.entities,e.entity)||n.entities.add(e.entity)}));let r=!0,i={};if(Object.entries(n).filter((e=>{let[,t]=e;return t.size>0})).forEach((e=>{let[t,n]=e;r=!1,i[t]=Array.from(n)})),!r){console.log("waiting to retrieve missing elements",i);try{let e=await this.api.fetchGameLibraryExtras(i);this.updateGameLibrary(this.transformGameLibraryUpdate(e))}catch(e){console.error("failure getting supplemental objects")}}}async getUgcDecorations(e){let{onlyFetchPending:t}=e,n=await this.api.fetchingUgcDecorations({onlyFetchPending:t});return this.updateGameLibrary(this.transformGameLibraryUpdate({objects:n.objects})),n}async approveUgcDecoration(e){let{itemId:t,objectId:n}=e;return await this.api.approveUgcDecoration({itemId:t,objectId:n})}async rejectUgcDecoration(e){let{itemId:t,objectId:n,reason:r}=e;return await this.api.rejectUgcDecoration({itemId:t,objectId:n,reason:r})}getDefaultCurrency(){var e;return(null===(e=this.mapLibrary)||void 0===e?void 0:e.defaultCurrency)||"cur_berry"}getMapType(){var e;return(null===(e=this.mapLibrary)||void 0===e?void 0:e.type)||"public"}getMapObjects(){var e;return null===(e=this.mapLibrary)||void 0===e?void 0:e.config.objects}getMapObject(e){var t;return null===(t=this.getMapObjects())||void 0===t?void 0:t[e]}getMapBackground(){var e,t,n;let r=null===(e=this.mapLibrary)||void 0===e?void 0:e.config.background;if(!r)return;let i=null===(n=this.gameLibrary)||void 0===n||null===(t=n.objects)||void 0===t?void 0:t[r];return i||void 0}addMapObject(e){let t=this.getMapObjects();if(t){let n=t[e._id];n?Object.assign(n,e):t[e._id]=e}}updateMapTiles(e){let t=this.getMapTiles();e&&t&&e.forEach((e=>{t[e._id]=e}))}removeMapObject(e){let t=this.getMapObjects();t&&delete t[e._id]}getMapTiles(){var e;return null===(e=this.mapLibrary)||void 0===e?void 0:e.config.tiles}getNPCProperties(e){return{npcType:e}}getMapSounds(){var e,t;return null===(t=this.mapLibrary)||void 0===t||null===(e=t.config)||void 0===e?void 0:e.sounds}getMapLabels(){var e;return null===(e=this.mapLibrary)||void 0===e?void 0:e.labels}getStoreData(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.stores}getStore(e){var t,n;return null===(n=this.gameLibrary)||void 0===n||null===(t=n.stores)||void 0===t?void 0:t[e]}getMapTilesAt(e){let t;return this.mapLibrary&&(t=Object.values(this.mapLibrary.config.tiles).filter((t=>t.x===e.x&&t.y===e.y))),t}getGameQuests(){var e;return null===(e=this.gameLibrary)||void 0===e?void 0:e.quests}getMapTile(e){var t;return null===(t=this.mapLibrary)||void 0===t?void 0:t.config.tiles[e]}getGameAchievement(e){var t,n;return null===(n=this.gameLibrary)||void 0===n||null===(t=n.achievements)||void 0===t?void 0:t[e]}getGameAchievements(){var e;return(null===(e=this.gameLibrary)||void 0===e?void 0:e.achievements)?Object.values(this.gameLibrary.achievements):void 0}constructor(e){this.api=e}}(r.Z)},10333:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(85893),i=n(67294),o=n(11163),a=n(25617),s=n(48583);n(39135),n(993),n(46305),n(17591);var u=n(80535);var l=e=>{let{Component:t,pageProps:n}=e,l=(0,o.useRouter)();return(0,i.useEffect)((()=>{let e=e=>{(e=>{var t,n;(null===(t=window)||void 0===t?void 0:t.gtag)&&(null===(n=window)||void 0===n||n.gtag("config","G-QGP383C71B",{page_path:e}))})(e)};return l.events.on("routeChangeComplete",e),()=>{l.events.off("routeChangeComplete",e)}}),[l.events]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.zt,{store:u.h,children:(0,r.jsx)(s.zt,{store:u.e,children:(0,r.jsx)(t,{...n})})})})}},86731:function(e,t,n){"use strict";n.d(t,{H:function(){return i},q:function(){return r}});let r={};function i(e,t){if(e in r){let n=r[e];r[e]=(e,r)=>{n(e,r),t(e,r)}}else r[e]=t}},86193:function(e,t,n){"use strict";n.d(t,{U:function(){return l},V:function(){return c}});var r=n(86731),i=n(46787),o=n(34377),a=n(16562),s=n(19445),u=n(80535);function l(e){o.ZP.emitEventNow(o.fb.TRADE_SEND,e)}function c(e,t){var n,r;let i=a.l.getInstance(),o=e?null===(r=i.getEntityByUniqueId(e))||void 0===r||null===(n=r.storage)||void 0===n?void 0:n.slots:i.currentPlayer.full.inventory.slots;if(o)return"get"in o?o.get(t.toString()):o[t]}function f(e){return u.e.get(i.eH)?void 0:(0,i.sG)(e.getState())}let d=(e,t)=>{var n;let{slot:r,item:o,adjustment:s,sourceSlot:u}=e,c=t.getState(),d=(0,i.KU)(c),p=f(t);if(!p||!d)return;let h=a.l.getInstance().getSessionId();if(!h)return;let g=null===(n=p.players[h])||void 0===n?void 0:n.items;if(!g)return;let v=g.map((e=>e)),m=v.find((e=>e.slot===r));if(m&&!o){let e=m.quantity+s;v=v.filter((e=>e.slot!==r)),e>0&&v.push({...m,quantity:e})}else{if(!o)return;v=v.filter((e=>e.slot!==r&&e.originalSlot!==u)),s>0&&v.push({item:o,quantity:s,originalSlot:null!=u?u:0,originalSource:void 0,slot:r})}l({subcommand:"update",tradeId:d,trade:{items:v}})};(0,r.H)("game/PLAYER_INVENTORY_CHANGE",((e,t)=>{var n;let r=t.getState(),o=(0,i.KU)(r),s=f(t);if(!s||!o)return;let{inventory:u}=e,c=a.l.getInstance().getSessionId(),d=null===(n=s.players[c])||void 0===n?void 0:n.items;if(!d)return;let p=!1,h=d.filter((e=>{var t;let n=null===(t=u.slots)||void 0===t?void 0:t[e.originalSlot.toString()];return!!n&&n.item===e.item&&!(n.quantity<e.quantity)||(p=!0,!1)}));p&&l({subcommand:"update",tradeId:o,trade:{items:h}})})),(0,r.H)(i.sU.type,d),(0,r.H)(i.gJ.type,((e,t)=>{var n;let{slot:r,mouseButton:o}=e,u=t.getState(),l=(0,i.KU)(u),c=f(t);if(!c||!l)return;let p=a.l.getInstance().getSessionId();if(!p)return;let h=null===(n=c.players[p])||void 0===n?void 0:n.items;if(!h)return;let g=(0,s.B6)(u),v=(0,s.xM)(u),m=h.find((e=>e.slot===r));0===o?g?d({slot:r,item:g.id,sourceSlot:v.slot,adjustment:Math.min(1,v.quantity)},t):m&&!g&&d({slot:r,adjustment:-m.quantity},t):2===o&&!g&&m&&d({slot:r,adjustment:-Math.ceil(m.quantity/2)},t)}))},22181:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var r=n(7406),i=n(70247);let o=(0,r.hg)("game/authenticatedWallet",(async(e,t)=>{try{let n=await i.Z.loadLibraries(e.mapId);if(!i.Z.isValid())throw"invalid-game-library";t.dispatch({type:"game/LIBRARY",payload:!!n})}catch(e){t.dispatch({type:"game/SVR_CANNOTCONNECT",payload:{message:["serverOffline","Server Offline"]}})}return e}))},92217:function(e,t,n){"use strict";n.d(t,{$O:function(){return x},DH:function(){return g},Ec:function(){return p},Gq:function(){return d},H2:function(){return m},Kx:function(){return _},MD:function(){return S},RT:function(){return I},Ti:function(){return v},WS:function(){return h},YR:function(){return P},ZP:function(){return y},cQ:function(){return E},cm:function(){return T},cn:function(){return A},cu:function(){return f},eW:function(){return w},fq:function(){return b},gz:function(){return L},iM:function(){return R},k4:function(){return N},vU:function(){return C},z1:function(){return k}});var r=n(7406),i=n(79750),o=n(16562),a=n(89733),s=n(70247),u=n(60604),l=n(39135);let c=(0,r.oM)({name:"auth",initialState:{connected:!1,isAccountDirty:!1,showWalletNotFoundWarning:!1,authenticated:!1,loading:!0,noticeDialog:{visible:!1,allowClose:!1,allowReload:!0,msgKey:""}},reducers:{checkAuthentication:(e,t)=>{e.loading=!0,e.mapId=t.payload.mapId},walletRequired:(e,t)=>{e.showWalletNotFoundWarning=!1!==t.payload},setConnected:(e,t)=>{e.errorMessage="",e.connected=t.payload.connected,e.provider=t.payload.provider,e.eth=t.payload.eth,e.email=t.payload.email,e.newuser=t.payload.newuser,e.methodid=t.payload.methodid,e.code=t.payload.code,e.password=t.payload.password,e.isAccountDirty=!1,t.payload.connected&&(e.errorMessage=void 0)},continueAsGuest:(e,t)=>{var n;e.errorMessage=void 0,e.authenticated=!0,e.mapId=(null===(n=t.payload)||void 0===n?void 0:n.mapId)||(0,i.lf)(),e.loading=!1,e.sessionToken=null},createPlayer:(e,t)=>{if(e.errorMessage=void 0,e.sessionToken)console.log("waiting for middleware to createplayer"),e.loading=!0;else{console.log("continuing as guest");let n=t.payload.username;/^Guest-/i.test(null!=n?n:"")||(n="Guest-".concat(n)),e.username=n,e.playerAvatar=t.payload.avatarPieces}},loadingDone:e=>{e.loading=!1},authenticate:(e,t)=>{e.errorMessage=void 0,e.mapId=t.payload.mapId,e.loading=!0},updatedPlayer:(e,t)=>{t.payload.username&&(e.username=t.payload.username),t.payload.playerId&&(e.playerId=t.payload.playerId),t.payload.playerAvatar&&(e.playerAvatar=t.payload.playerAvatar),t.payload.mapId&&(e.mapId=t.payload.mapId),t.payload.cryptoWallets&&(e.cryptoWallets=t.payload.cryptoWallets)},authenticatedPlayer:(e,t)=>{e.loading=!1,e.username=t.payload.username,e.playerId=t.payload.playerId,t.payload.playerAvatar?e.playerAvatar=t.payload.playerAvatar:e.playerAvatar=s.Z.getGameAvatarWithRandomTraits(u.tU),t.payload.mapId&&(e.mapId=t.payload.mapId),e.authenticated=!0,e.sessionToken=t.payload.sessionToken,e.provider=t.payload.provider,e.cryptoWallets=t.payload.cryptoWallets,e.currentAvatar=t.payload.currentAvatar,e.errorMessage=void 0},authenticateError:(e,t)=>{var n;e.errorMessage=null===(n=t.payload)||void 0===n?void 0:n.message,e.loading=!1,e.connected=!1,e.provider=void 0,e.errorMessage&&console.log("set error message",JSON.stringify(e.errorMessage))},serviceNotification:(e,t)=>{var n,r;e.noticeDialog.visible=!0,e.noticeDialog.msgKey=t.payload.message,e.noticeDialog.allowClose=null===(n=t.payload.allowClose)||void 0===n||n,e.noticeDialog.allowReload=null===(r=t.payload.allowReload)||void 0===r||r},closeNotification:e=>{e.noticeDialog.allowClose&&(e.noticeDialog.visible=!1)},loggedOut:e=>{e.loading=!1,e.errorMessage=void 0,e.provider=void 0,e.authenticated=!1,e.connected=!1,e.playerId=void 0,e.username=void 0,e.sessionToken=null,e.playerAvatar=void 0,e.currentAvatar=void 0,e.isAccountDirty=!1,e.cryptoWallets=void 0},setIsAccountDirty:(e,t)=>{e.isAccountDirty=t.payload}},extraReducers:e=>{e.addCase("game/ROOM_LOADED",(e=>{e.noticeDialog.visible=!1})),e.addCase("game/SVR_CANNOTCONNECT",((e,t)=>{var n;e.loading=!0,e.authenticated=!1,e.connected=!1,e.mapId=void 0,e.username=void 0,e.sessionToken=null,e.playerAvatar=void 0,e.currentAvatar=void 0,e.cryptoWallets=void 0,e.errorMessage=null===(n=t.payload)||void 0===n?void 0:n.message})),e.addCase("game/PLAYER_AVATAR",((e,t)=>{t.payload.success?(t.payload.username&&(e.username=t.payload.username),t.payload.playerAvatar&&(e.playerAvatar=t.payload.playerAvatar)):"username-already-exists"===t.payload.message?e.errorMessage=["nameInUse","Name in use"]:e.errorMessage=["internalServerError","Task Failed Successfully. msg: UpdateAvatar"]})),e.addCase("game/SERVICE_COMMAND",((e,t)=>{var n,r,i,u,c,f;let d=null==t||null===(r=t.payload)||void 0===r||null===(n=r.command)||void 0===n?void 0:n.toLowerCase();"notice"===d?(e.noticeDialog.visible=!0,e.noticeDialog.msgKey=t.payload.message,e.noticeDialog.allowClose=null===(i=t.payload.allowClose)||void 0===i||i,e.noticeDialog.allowReload=null===(u=t.payload.allowReload)||void 0===u||u,!1===t.payload.allowClose&&(a.Z.killScene(),o.l.getInstance().disconnect())):"reload"!==d||!t.payload.id||(null===(c=e.reloadIds)||void 0===c?void 0:c.includes(t.payload.id))||(e.reloadIds||(e.reloadIds=[]),null===(f=(0,l.W)(!0))||void 0===f||f.catch(console.error),s.Z.clearGameLibrary(),s.Z.loadLibraries().catch(console.error),e.reloadIds.push(t.payload.id))}))}}),f=e=>e.auth.playerAvatar,d=e=>e.auth.authenticated,p=e=>e.auth.username,h=e=>({email:e.auth.email,password:e.auth.password,newuser:e.auth.newuser}),g=e=>({method_id:e.auth.methodid,code:e.auth.code}),v=e=>e.auth.connected&&e.auth.provider,m=e=>e.auth.loading,y=e=>e.auth.errorMessage,b=e=>e.auth.cryptoWallets,E=e=>e.auth.noticeDialog,{checkAuthentication:_,setConnected:w,walletRequired:O,continueAsGuest:A,createPlayer:S,loadingDone:I,authenticate:P,authenticatedPlayer:R,updatedPlayer:k,authenticateError:T,loggedOut:N,setIsAccountDirty:x,closeNotification:C,serviceNotification:L}=c.actions;t.Co=c.reducer},77341:function(e,t,n){"use strict";n.d(t,{F0:function(){return h},Gp:function(){return O},U1:function(){return b},Uf:function(){return g},Up:function(){return S},XU:function(){return v},_r:function(){return _},hL:function(){return A},ki:function(){return y},og:function(){return m},qx:function(){return E},sY:function(){return p},yq:function(){return w}});var r=n(7406),i=n(68697),o=n(70247),a=n(83171),s=n(34377),u=n(71343),l=n(16562);let c=(e,t,n,r)=>{if(e&&!t){let n=l.l.getInstance().getEntityByUniqueId(e);t=null==n?void 0:n.entity}t&&e&&s.ZP.sendEventDelayed(u.m.clickEntity,{mid:e,impact:n,entity:t,inputs:r})},f={achievements:{},showCrafting:!1,ui:{craftType:"cooking",tableTier:1,selectedCraftable:void 0}},d=(0,r.oM)({name:"craftingSlice",initialState:f,reducers:{selectCraftable:(e,t)=>{e.ui={...e.ui,selectedCraftable:t.payload.id}},closeCraftingDialog:e=>{e.showCrafting&&c(e.ui.table_mid,e.ui.table_entity,"uiclose"),e.showCrafting=!1},showCraftingWindow:(e,t)=>{let{craftType:n,source:r,achievement:i,state:o,quantity:a,finish:s,tableTier:u}=t.payload,l=null==o?void 0:o.startsWith("update:");(!l||e.showCrafting&&e.ui.table_mid===r)&&(e.showCrafting&&e.ui.table_mid&&e.ui.table_entity&&e.ui.craftType!==n&&c(e.ui.table_mid,e.ui.table_entity,"uiclose"),i?e.ui.selectedCraftable=i:r!==e.ui.table_mid&&(e.ui.selectedCraftable=void 0),e.ui.craftType=n,e.ui.tableTier=u,e.ui.table_mid=r,e.ui.quantity=a,e.ui.completionTime=s,e.ui.entityState=l?o.substring(7):o,e.ui.updated=Date.now(),e.showCrafting=!0)}},extraReducers:e=>{e.addCase("game/ROOM_LEAVE",(e=>{e.achievements={},e.showCrafting=!1,e.ui={...f.ui}})),e.addCase("game/PLAYER_ACHIEVEMENT_ADD",((e,t)=>{e.achievements[t.payload.achievement.achievementId]=t.payload.achievement})),e.addCase("game/PLAYER_ACHIEVEMENT_CHANGED",((e,t)=>{e.achievements[t.payload.achievement.achievementId]=t.payload.achievement})),e.addCase("game/PLAYER_ACHIEVEMENT_REMOVED",((e,t)=>{delete e.achievements[t.payload.achievement.achievementId]}))}}),{selectCraftable:p,closeCraftingDialog:h,showCraftingWindow:g}=d.actions;t.ZP=d.reducer;let v=e=>e.crafting.showCrafting,m=e=>Object.values(e.crafting.achievements),y=e=>e.crafting.ui,b=e=>e.crafting.ui.selectedCraftable?e.crafting.achievements[e.crafting.ui.selectedCraftable]||{achievementId:e.crafting.ui.selectedCraftable}:null,E=e=>e.crafting.ui.entityState,_=(0,i.P1)([b,a.RQ,E],((e,t,n)=>r=>{if(!e||"busy"===n)return!1;let i=o.Z.getGameAchievement(e.achievementId);return!!i&&!!i.craftable&&i.craftable.requiredItems.every((e=>t(e.id)>=e.quantity*r))})),w=(0,i.P1)([b,a.xK],((e,t)=>n=>{let r=Object.values(t.slots);if(e){var i;let t=o.Z.getGameAchievement(e.achievementId);if(!t)return!1;let n=null===(i=t.craftable)||void 0===i?void 0:i.requiredItems.some((e=>r.filter((t=>t.item===e.id)).some((t=>t.quantity===e.quantity))));if(n)return!0}if(t.size>r.length)return!0;let a=o.Z.getGameItem(n);if(!a)return!1;let s=r.filter((e=>e.item===n)).reduce(((e,t)=>e+t.quantity),0);return!!s&&(!a.inventory.maxQuantity||a.inventory.maxQuantity-s%a.inventory.maxQuantity>0)})),O=e=>{let t=b(e);if(!t)return[];let n=o.Z.getGameAchievement(t.achievementId);return n&&n.craftable?n.craftable.requiredItems.filter((t=>t.unconsumable&&t.quantity>(0,a.RQ)(e)(t.id))):[]},A=e=>e.crafting.ui.craftType,S=e=>{var t;return!(!(null===(t=e.crafting.ui)||void 0===t?void 0:t.entityState)||!["crafting","ready"].includes(e.crafting.ui.entityState))}},39890:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7406),i=n(16562);let o=(0,r.hg)("game/fetchWorlds",(async()=>i.l.getInstance().worldService.fetchWorldData()))},34256:function(e,t,n){"use strict";n.d(t,{$J:function(){return T},E3:function(){return F},Fd:function(){return E},GP:function(){return O},Hi:function(){return y},Mr:function(){return N},Nb:function(){return w},Rp:function(){return L},Sm:function(){return k},XK:function(){return G},dM:function(){return S},dd:function(){return Z},eW:function(){return x},iJ:function(){return j},io:function(){return R},lW:function(){return D},ni:function(){return P},nl:function(){return _},ol:function(){return A},po:function(){return C},r$:function(){return B},tD:function(){return b},uy:function(){return I},zR:function(){return M}});var r,i,o=n(7406),a=n(39890),s=n(83928),u=n(79750),l=n(34377),c=n(60604),f=n(70247),d=n(34853);let p={loading:!0,warping:!1,connected:!1,needNfts:!1,worlds:{total:0,maxPlayersPerWorld:0,worlds:[]},room:{levels:{}},gameLibraryLoaded:!1,player:{core:{mid:"butch",isGuest:!0,position:{x:3e3,y:3e3},velocity:{x:0,y:0},username:"",playerAvatar:"",currentAvatar:{id:"",pieces:""},typingTimestamp:0},full:{createdAt:0,cryptoWallets:[],inventory:{size:0,slots:{},activeRow:0},energy:{level:90},levels:{farming:{level:0,exp:1,totalExp:1}},avatar:{display:{body:{species:"human",type:"body",color:"light",gender:"female"},eyes:{species:"human",eyes:"simple"},outfit:{type:"outfit",species:"human",style:"semicasual"},mouth:{species:"human",mouth:"smile"},hair:{style:"elf",color:"black",type:"hair",species:"human"}}},nft:"",animation:"walk",quests:{},bookmarks:{size:3,baseSize:3,bookmarkedMaps:[]},messages:0}},urlDisclaimer:{isActive:!1},lookAtText:{isActive:!1,x:0,y:0,text:""},farmPicker:{isActive:!1},currentModal:"",npc_dialog:{isActive:!1,character:"ent_npcMayor",currentMessageIndex:0,messages:[],queue:[]},playersOnline:{isVisible:!1,updated:0},playerOnlineInfo:{isVisible:!1,mid:"",username:""},soundState:{global:{mute:"1"===(0,s.Ul)("global_mute"),volume:parseFloat(null!==(r=(0,s.Ul)("global_volume"))&&void 0!==r?r:"1")},music:{mute:"1"===(0,s.Ul)("music_mute"),volume:parseFloat(null!==(i=(0,s.Ul)("music_volume"))&&void 0!==i?i:"1")}},enhancedState:{enabled:"1"===(0,s.Ul)("enhanced_enabled")},joystickState:{enabled:"1"!==(0,s.Ul)("joystick_disabled")},criticalMessage:{isActive:!1,text:"Reconnecting to Server..."},nftPicker:{isVisible:!1},petPicker:{isVisible:!1,mode:"hatched"},realmrefresh:!1,petDetails:{isVisible:!1},socialSettings:{isVisible:!1},questLog:{isVisible:!1},showSkills:!1,showSettings:!1,farmDetails:{isActive:!1,mapId:(0,u.lf)()},sidePanel:{isActive:!1},farmUpgradePanel:{isActive:!1}},h=(e,t)=>{var n;let{key:r,level:i}=t.payload;(null===(n=e.player)||void 0===n?void 0:n.full)&&(e.player.full.levels||(e.player.full.levels={}),r&&i&&(e.player.full.levels[r]=i))},g=(e,t)=>{let{key:n,level:r}=t.payload;e.room&&e.room.levels&&(e.room.levels[n]=r)},v=e=>{if(e.npc_dialog.queue.length>0){let t=e.npc_dialog.queue[0];e.npc_dialog.isActive=!0,e.npc_dialog.currentMessageIndex=0,e.npc_dialog.character=t.npcId,e.npc_dialog.pet=t.pet,e.npc_dialog.messages=t.messages,e.npc_dialog.event=t.event,e.npc_dialog.queue=e.npc_dialog.queue.slice(1)}else e.npc_dialog.isActive=!1,e.npc_dialog.currentMessageIndex=0,e.npc_dialog.character=void 0,e.npc_dialog.pet=void 0,e.npc_dialog.messages=[]},m=(0,o.oM)({name:"game",initialState:p,reducers:{mapSelected:(e,t)=>{e.room.mapId=t.payload.mapId,e.room.lastSavedAt=t.payload.lastSavedAt},dialogNext:e=>{let{messages:t}=e.npc_dialog,{currentMessageIndex:n}=e.npc_dialog;n+=1,t&&n<t.length?e.npc_dialog.currentMessageIndex=n:v(e)},dialogBack:e=>{e.npc_dialog.currentMessageIndex=Math.max(e.npc_dialog.currentMessageIndex-1,0)},togglePlayersOnline:e=>{e.playersOnline.isVisible=!e.playersOnline.isVisible},setPlayerOnlineInfo:(e,t)=>{e.playerOnlineInfo={isVisible:!0,...t.payload}},unsetPlayerOnlineInfo:e=>{e.playerOnlineInfo={isVisible:!1,mid:"",username:""}},toggleQuestLog:e=>{e.questLog.isVisible=!e.questLog.isVisible},toggleSkills:e=>{e.showSkills=!e.showSkills},setWorld:(e,t)=>{e.room.worldId=t.payload.worldId,e.room.mapId=t.payload.mapId,e.criticalMessage.text="Loading...",e.criticalMessage.isActive=!0},dismissURLDisclaimer:e=>{e.urlDisclaimer.isActive=!1},logOut:e=>{e.loading=!0,e.connected=!1,e.needNfts=!1,e.lookAtText.isActive=!1,e.room.worldId=void 0,e.room.mapId=void 0,e.room.lastSavedAt=void 0,e.npc_dialog.isActive=!1,e.sidePanel.isActive=!1,e.farmUpgradePanel.isActive=!1,e.questLog.isVisible=!1,e.criticalMessage.isActive=!1},updateLookAt:(e,t)=>{let{mouse:n,text:r,style:i}=t.payload;e.lookAtText={isActive:!0,text:r,x:Math.round(n.x),y:Math.round(n.y),style:i}},roomWarpBegan:(e,t)=>{var n;(null===(n=t.payload)||void 0===n?void 0:n.abort)?e.warping=!1:e.warping=!0},roomWarpLoading:(e,t)=>{e.room.mapId=t.payload.mapId,e.loading=!0},closeModal:e=>{e.currentModal=""},toggleModal:(e,t)=>{let n=t.payload.dialog;n===e.currentModal?e.currentModal="":(e.currentModal=n,"nftpicker"===n&&(e.needNfts=!0))},openPetPicker:(e,t)=>{var n,r,i,o;(null===(n=e.player)||void 0===n?void 0:n.core.isGuest)||(e.needNfts=!0,e.petPicker.mode=null!==(o=null===(r=t.payload)||void 0===r?void 0:r.mode)&&void 0!==o?o:"hatched",e.petPicker.isVisible=!0,e.petPicker.entity=null===(i=t.payload)||void 0===i?void 0:i.entity,e.currentModal="",e.questLog.isVisible=!1,e.petDetails.isVisible=!1,e.farmDetails.isActive=!1)},closePetPicker:e=>{e.petPicker.isVisible=!1},mintedPet:e=>{e.petPicker.refresh=Date.now()+6e5},togglePetDetails:(e,t)=>{var n;(null===(n=t.payload)||void 0===n?void 0:n.petId)?(e.petDetails.mid=t.payload.petId,e.petDetails.isVisible=!0,e.petDetails.firstReveal=!0,e.petPicker.refresh=Date.now()):(e.petDetails.mid=void 0,e.petDetails.isVisible=!e.petDetails.isVisible,e.petDetails.firstReveal=!1)},toggleSidePanel:e=>{e.sidePanel.isActive=!e.sidePanel.isActive},activateSidePanel:e=>{e.sidePanel.isActive=!0},activateFarmUpgradePanel:e=>{e.farmUpgradePanel.isActive=!0},deactivateFarmUpgradePanel:e=>{e.farmUpgradePanel.isActive=!1},updateTemplateName:(e,t)=>{e.room.templateName=t.payload.newTemplate},openSettings:e=>{e.showSettings=!0},closeSettings:e=>{e.showSettings=!1},clearRealmRefresh:e=>{e.realmrefresh=!1}},extraReducers:e=>{e.addCase("game/ROOM_LEAVE",(e=>{e.playerOnlineInfo.isVisible=!1,e.lookAtText.isActive=!1,e.npc_dialog.isActive=!1,e.sidePanel.isActive=!1,e.farmUpgradePanel.isActive=!1,e.showSkills=!1,e.questLog.isVisible=!1,e.farmDetails.isActive=!1,e.petPicker.isVisible=!1,e.petDetails.isVisible=!1,e.room.levels={}})),e.addCase("game/ROOM_LOADED",((e,t)=>{e.player=t.payload.player,e.playerOnlineInfo.isVisible=!1,e.lookAtText.isActive=!1,e.room.roomType=t.payload.roomType,e.room.templateName=t.payload.templateName,e.sessionId=t.payload.sessionId,e.criticalMessage.isActive=!1,e.npc_dialog.isActive=!1,e.sidePanel.isActive=!1,e.farmUpgradePanel.isActive=!1,e.showSkills=!1,e.showSettings=!1,e.questLog.isVisible=!1,e.farmDetails.mapId=t.payload.mapId,e.farmDetails.isActive=!1,e.currentModal="",e.petPicker.isVisible=!1,e.petDetails.isVisible=!1})),e.addCase("game/PLAYER_AVATAR",((e,t)=>{if(t.payload.success)switch(e.currentModal){case"avatar":case"nftpicker":case"social":case"username":e.currentModal=""}})),e.addCase("game/ROOM_WARP",(e=>{e.lookAtText.isActive=!1,e.npc_dialog.isActive=!1,e.sidePanel.isActive=!1,e.farmUpgradePanel.isActive=!1,e.showSkills=!1,e.showSettings=!1,e.questLog.isVisible=!1,e.farmDetails.isActive=!1,e.needNfts=!1,e.room.lastSavedAt=void 0})),e.addCase("game/SLOW_LOAD",((e,t)=>{var n;(null===(n=t.payload)||void 0===n?void 0:n.retry)?(t.payload.retry<=2?e.criticalMessage.text="Retrying Connection":e.criticalMessage.text="Retrying Connection x".concat(t.payload.retry-1),e.criticalMessage.isActive=!0):e.criticalMessage.isActive||(e.criticalMessage.text="Still Loading...",e.criticalMessage.isActive=!0)})),e.addCase("game/GAME_INITIATED",(e=>{e.loading=!1,e.warping=!1,e.connected=!0,e.criticalMessage.isActive=!1,e.room.lastSavedAt=void 0})),e.addCase("game/PLAYER_JOINED",(e=>{e.playersOnline.updated+=1})),e.addCase("game/PLAYER_REMOVED",(e=>{e.playersOnline.updated+=1})),l.rV.soundControl.addReduxCase(e,((e,t)=>{let{payload:{soundControlKey:n,mute:r,volume:i}}=t;void 0!==r&&(e.soundState[n].mute=r,(0,s.Ul)("".concat(n,"_mute"),r?"1":"0")),void 0!==i&&(i=Math.min(Math.max(i,0),1),e.soundState[n].volume=i,(0,s.Ul)("".concat(n,"_volume"),i.toString()))})),l.rV.enhancedControl.addReduxCase(e,((e,t)=>{let{payload:{enabled:n}}=t;void 0!==n&&(e.enhancedState.enabled=n,(0,s.Ul)("enhanced_enabled",n?"1":"0"),setTimeout((()=>{window.location.reload()}),2e3))})),l.rV.joystickControl.addReduxCase(e,((e,t)=>{let{payload:{enabled:n}}=t;void 0!==n&&(e.joystickState.enabled=n,(0,s.Ul)("joystick_disabled",n?"0":"1"))})),e.addCase("game/LINK_OPEN",((e,t)=>{let{link:n,msgKey:r}=t.payload;r||(0,s.fI)(n)?(e.urlDisclaimer.isActive=!0,e.urlDisclaimer.URL=n,e.urlDisclaimer.msgKey=r):(0,s.T1)(n)?window.location.href=n:window.open(n,"_blank")})),e.addCase("game/GAME_OBJECT_MOUSEOVER",((e,t)=>{let{mouse:n,text:r,style:i}=t.payload;e.lookAtText={isActive:!!r,text:r,x:Math.round(n.x),y:Math.round(n.y),style:i}})),e.addCase("game/GAME_OBJECT_MOUSEOUT",(e=>{e.lookAtText={...e.lookAtText,isActive:!1}})),e.addCase("game/LIBRARY",((e,t)=>{var n;e.gameLibraryLoaded=!!t.payload,(null===(n=f.Z.getTenants())||void 0===n?void 0:n[(0,u.F5)()])||(e.criticalMessage.text="Unknown Realm...You could be waiting a long time.",e.criticalMessage.isActive=!0,e.gameLibraryLoaded=!1)})),e.addCase("game/PLAYER_INVENTORY_CHANGE",((e,t)=>{var n;let{inventory:r}=t.payload;r&&(null===(n=e.player)||void 0===n?void 0:n.full.inventory)&&(e.player.full.inventory=r)})),e.addCase("game/PLAYER_COIN_INVENTORY_CHANGE",((e,t)=>{var n;let{coinInventory:r}=t.payload;r&&(null===(n=e.player)||void 0===n?void 0:n.full.coinInventory)&&(e.player.full.coinInventory=r)})),e.addCase("game/PLAYER_QUESTPROGRESS_ADDED",((e,t)=>{var n;let{quests:r}=t.payload;r&&(null===(n=e.player)||void 0===n?void 0:n.full.quests)&&(e.player.full.quests=r)})),e.addCase("game/PLAYER_LEVEL_ADD",h),e.addCase("game/PLAYER_LEVEL_CHANGE",h),e.addCase("game/SVR_CANNOTCONNECT",((e,t)=>{var n,r;e.loading=!0,e.connected=!1,e.lookAtText.isActive=!1,e.room.worldId=void 0,e.room.mapId=void 0,e.room.lastSavedAt=void 0,e.criticalMessage.text=null===(n=t.payload)||void 0===n?void 0:n.message,(null===(r=t.payload)||void 0===r?void 0:r.message)&&(e.criticalMessage.isActive=!0)})),e.addCase("game/NPC_SPEAKS",((e,t)=>{let n=t.payload;"function"!=typeof n.forEach&&(n=[n]);let r=n.reduce(((t,n)=>((e,t)=>{var n;if(t.pet&&(e.npc_dialog.isActive&&e.npc_dialog.pet||e.npc_dialog.queue.some((e=>{var n,r;return e.pet&&(null===(n=e.messages)||void 0===n?void 0:n.length)===(null===(r=t.messages)||void 0===r?void 0:r.length)&&e.messages.every(((e,n)=>e===t.messages[n]))}))))return;let r=null===(n=t.messages)||void 0===n?void 0:n.some((e=>!(e.includes(" ")||!e.includes("_"))&&""===(d.ZP.t(e,{ns:"quest",defaultValue:""})||d.ZP.t(e,{ns:"game",defaultValue:""}))));return e.npc_dialog.queue.push(t),r})(e,n)||t),!1);r?(console.log("reloading string resources for missing dialog"),d.ZP.reloadResources().then((()=>{e.npc_dialog.isActive||v(e)})).catch(console.error)):e.npc_dialog.isActive||v(e)})),e.addCase("game/PLAYER_ENERGY_CHANGE",((e,t)=>{var n;let{energy:r}=t.payload;r&&(null===(n=e.player)||void 0===n?void 0:n.full.energy)&&(e.player.full.energy=r)})),e.addCase(a.b.fulfilled,((e,t)=>{e.worlds=t.payload})),e.addCase("game/PRESENT_FARM_DETAILS",(e=>{e.farmDetails.isActive=!0})),e.addCase("game/DISMISS_FARM_DETAILS",(e=>{e.farmDetails.isActive=!1})),e.addCase("game/PLAYER_EXP_CHANGE",((e,t)=>{e.player&&(e.player.full.levels={...t.payload.levels})})),e.addCase("game/ROOM_LEVEL_ADD",g),e.addCase("game/ROOM_LEVEL_CHANGED",g),e.addCase("game/BOOKMARK_MAP",((e,t)=>{var n;let{mapId:r,bookmark:i,environ:o}=t.payload,a=null===(n=e.player)||void 0===n?void 0:n.full.bookmarks;a&&(a.bookmarkedMaps||(a.bookmarkedMaps=[]),i&&r?a.bookmarkedMaps.push({mapId:r,environ:o}):!i&&r&&(a.bookmarkedMaps=a.bookmarkedMaps.filter((e=>{var t;return(null!==(t=null==e?void 0:e.mapId)&&void 0!==t?t:e)!==r}))))})),e.addCase("game/".concat(l.fb.SET_TOS_ACCEPTED),(e=>{e.player&&(e.player.full.tosVersion=c.sV)})),e.addCase("game/".concat(l.fb.PLAYER_PET_CHANGE),((e,t)=>{var n,r,i,o;e.player&&(((null===(n=e.player.full.pet)||void 0===n?void 0:n.tokenId)!==(null===(r=t.payload.full.pet)||void 0===r?void 0:r.tokenId)||(null===(i=e.player.full.pet)||void 0===i?void 0:i.avatar.id)!==(null===(o=t.payload.full.pet)||void 0===o?void 0:o.avatar.id))&&(e.petDetails.isVisible=!1),e.player.core.petAvatar=t.payload.core.petAvatar,e.player.full.pet=t.payload.full.pet)})),e.addCase("game/".concat(l.fb.CLIENT_CMD),((e,t)=>{let n=t.payload;"petmint"===n.detail?e.petPicker.refresh=Date.now()+9e5:"realmmint"===n.detail&&(e.realmrefresh=!0)}))}}),{mapSelected:y,roomWarpBegan:b,roomWarpLoading:E,dialogNext:_,dialogBack:w,togglePlayersOnline:O,setPlayerOnlineInfo:A,unsetPlayerOnlineInfo:S,setWorld:I,logOut:P,updateLookAt:R,dismissURLDisclaimer:k,toggleModal:T,closeModal:N,toggleQuestLog:x,toggleSkills:C,toggleSidePanel:L,togglePetDetails:M,closePetPicker:j,openPetPicker:D,activateSidePanel:U,activateFarmUpgradePanel:$,deactivateFarmUpgradePanel:V,openSettings:B,closeSettings:F,clearRealmRefresh:Z,updateTemplateName:G}=m.actions;t.ZP=m.reducer},19445:function(e,t,n){"use strict";n.d(t,{$Z:function(){return g},B6:function(){return u},NS:function(){return l},aq:function(){return h},hO:function(){return v},me:function(){return d},oi:function(){return m},pc:function(){return c},xM:function(){return s}});var r=n(7406),i=n(34377),o=n(16562);let a=(0,r.oM)({name:"storage",initialState:{openStorage:{isOpen:!1,updated:0},selectedEquipment:-1,selectedQty:0,activeRow:0},reducers:{closeStorage:e=>{e.openStorage.isOpen=!1},setActiveRow:(e,t)=>{let{payload:n}=t;e.activeRow=n,i.rV.inventory.changeActiveRow.emit({activeRow:n})},selectEquipment:(e,t)=>{var n,r;e.selectedEquipment=t.payload.selectedEquipment,e.storageMid=t.payload.mid,e.selectedItem=t.payload.item,e.selectedQty=null!==(r=t.payload.quantity)&&void 0!==r?r:1,(null===(n=e.selectedItem)||void 0===n?void 0:n.id)===e.highlightedItem&&(e.highlightedItem=void 0)},resetEquipment:e=>{i.ZP.emitEventNow(i.qM.RELEASE_FROM_CURSOR),e.selectedEquipment=-1,e.storageMid=void 0,e.selectedItem=void 0},closeInventoryWindow:e=>{e.openStorage.isOpen=!1},toggleInventoryWindow:e=>{e.openStorage.isOpen&&!e.openStorage.mid?e.openStorage.isOpen=!1:e.openStorage={isOpen:!0,mid:void 0,updated:0}},moveEquipmentSlot:(e,t)=>{}},extraReducers:e=>{e.addCase("game/ROOM_LOADED",((e,t)=>{var n,r,i,o,a,s;e.selectedEquipment=-1,e.storageMid=void 0,e.selectedItem=void 0,(null===(i=t.payload.player)||void 0===i||null===(r=i.full)||void 0===r||null===(n=r.inventory)||void 0===n?void 0:n.activeRow)>=0&&(e.activeRow=null===(s=t.payload.player)||void 0===s||null===(a=s.full)||void 0===a||null===(o=a.inventory)||void 0===o?void 0:o.activeRow),e.openStorage={isOpen:!1,updated:0}})),e.addCase("game/".concat(i.fb.PLAYER_PET_CHANGE),(e=>{e.openStorage={isOpen:!1,updated:0}})),e.addCase("game/PLAYER_OPEN_STORAGE",((e,t)=>{let n=t.payload.storageId;e.openStorage=n?{isOpen:!0,mid:n,updated:0}:{isOpen:!1,updated:0}})),e.addCase("game/ENTITY_ADD",((e,t)=>{let n=t.payload,r=n.mapEntity_id;e.openStorage.mid&&r===e.openStorage.mid&&(e.openStorage={isOpen:!0,mid:n.mid,updated:0})})),e.addCase("game/ROOM_LEAVE",(e=>{e.openStorage={isOpen:!1,updated:0},e.selectedEquipment=-1,e.selectedItem=void 0,e.storageMid=void 0,e.highlightedItem=void 0})),e.addCase("game/ENTITY_UPDATE",((e,t)=>{t.payload.mid===e.openStorage.mid&&(e.openStorage.updated+=1)})),e.addCase("game/ENTITY_REMOVE",((e,t)=>{t.payload.mid===e.openStorage.mid&&(e.openStorage={isOpen:!1,updated:0})})),e.addCase("game/".concat(i.fb.CLIENT_CMD),((e,t)=>{let n=t.payload;var r;"itemhighlight"===n.detail&&(e.highlightedItem=(null===(r=n.params)||void 0===r?void 0:r[0])||void 0)})),e.addCase("game/PLAYER_INVENTORY_CHANGE",((e,t)=>{let{inventory:n}=t.payload;e.activeRow=n.activeRow,function(e){let t;if(-1===e.selectedEquipment)return;let n=o.l.getInstance();if(e.storageMid)if(e.storageMid===n.mapStorageId)t=n.getMapStorage();else{let r=n.getEntityByUniqueId(e.storageMid);if(!(null==r?void 0:r.storage))return e.selectedEquipment=-1,void(e.storageMid=void 0);t=r.storage}else t=n.currentPlayer.full.inventory;if(null==t?void 0:t.slots){t=JSON.parse(JSON.stringify(t));let n=Object.values(t.slots).find((t=>t.slot===e.selectedEquipment));(null==n?void 0:n.quantity)?e.selectedQty=n.quantity:(e.selectedEquipment=-1,e.storageMid=void 0,e.selectedItem=void 0,i.ZP.sendEventDelayed(i.qM.RELEASE_FROM_CURSOR))}}(e)})),e.addCase("game/PLAYER_INVENTORY_NEW",((e,t)=>{let{item:n}=t.payload;e.highlightedItem=n}))}}),s=e=>({slot:e.storage.selectedEquipment,storage:e.storage.storageMid,quantity:e.storage.selectedQty,attention:e.storage.highlightedItem}),u=e=>{if(e.game.player)return e.storage.selectedItem},l=e=>e.storage.openStorage||e.game.petDetails.isVisible,c=e=>e.storage.activeRow,{closeStorage:f,closeInventoryWindow:d,toggleInventoryWindow:p,resetEquipment:h,selectEquipment:g,setActiveRow:v,moveEquipmentSlot:m}=a.actions;t.ZP=a.reducer},83171:function(e,t,n){"use strict";n.d(t,{$b:function(){return T},$v:function(){return $},$x:function(){return h},Ai:function(){return q},CO:function(){return c},GO:function(){return E},K7:function(){return _},Kx:function(){return P},NY:function(){return G},Nz:function(){return g},O$:function(){return s},Od:function(){return U},PD:function(){return y},QV:function(){return x},Qk:function(){return H},RQ:function(){return I},SP:function(){return o},TR:function(){return N},U7:function(){return j},V4:function(){return L},VQ:function(){return W},Wj:function(){return B},Xt:function(){return V},_i:function(){return f},b_:function(){return k},cV:function(){return Z},ge:function(){return S},gx:function(){return D},h2:function(){return z},iF:function(){return O},iN:function(){return F},lA:function(){return m},o7:function(){return l},oJ:function(){return a},pB:function(){return d},pR:function(){return R},px:function(){return v},qB:function(){return M},qb:function(){return C},wk:function(){return w},x6:function(){return p},xK:function(){return A},y4:function(){return u},zY:function(){return b}});var r=n(68697),i=n(64939);let o=e=>e.game.gameLibraryLoaded,a=e=>e.game.npc_dialog.isActive,s=e=>e.game.playersOnline,u=e=>e.game.questLog,l=e=>"nftpicker"===e.game.currentModal,c=e=>e.game.petPicker,f=e=>e.game.petDetails,d=e=>{var t;let{npc_dialog:n}=e.game;return{dialogMessage:n.messages&&n.currentMessageIndex<n.messages.length?n.messages[n.currentMessageIndex]:null,isLastDialog:(null===(t=n.messages)||void 0===t?void 0:t.length)&&n.currentMessageIndex===n.messages.length-1,isFirstDialog:0===n.currentMessageIndex}},p=e=>e.game.npc_dialog.isActive||e.game.currentModal||e.game.questLog.isVisible||e.game.petPicker.isVisible||e.game.petDetails.isVisible&&e.game.petDetails.firstReveal||e.generalStore.isOpen||e.ui.imageDialog.isVisible&&!e.ui.imageDialog.modeless||"none"!==e.marketplace.mode,h=e=>e.game.lookAtText,g=e=>e.game.npc_dialog,v=e=>e.game.criticalMessage,m=e=>e.game.player,y=e=>{var t;let n=null===(t=e.game.player)||void 0===t?void 0:t.full.bookmarks;return(null==n?void 0:n.bookmarkedMaps)||[]},b=e=>{var t,n;return(null===(n=e.game.player)||void 0===n||null===(t=n.full.bookmarks)||void 0===t?void 0:t.size)||i.vn},E=e=>e.game.loading||!e.auth.authenticated,_=e=>e.game.warping,w=e=>e.game.needNfts,O=e=>!!e.game.connected&&e.game.sessionId,A=e=>{var t;return null===(t=e.game.player)||void 0===t?void 0:t.full.inventory},S=e=>{var t;let n=new Date,r=e.game.player,i=(null==r?void 0:r.core.memberships)&&(null===(t=r.core.memberships.vip)||void 0===t?void 0:t.expiration)?new Date(r.core.memberships.vip.expiration):null;return!!i&&n<i},I=(0,r.P1)([A],(e=>t=>{if(!e||!e||!e.slots||0===Object.keys(e.slots).length)return 0;let n=Object.values(e.slots).filter((e=>e.item===t));if(!n.length)return 0;let r=n.reduce(((e,t)=>e+t.quantity),0);return r})),P=e=>e.game.soundState,R=e=>e.game.enhancedState,k=e=>e.game.joystickState,T=e=>e.game.playersOnline.updated,N=e=>e.game.playerOnlineInfo,x=e=>e.game.currentModal,C=e=>t=>{var n;return(null===(n=e.game.player)||void 0===n?void 0:n.full.levels)[t]},L=e=>t=>e.game.room.levels[t],M=e=>e.auth.authenticated&&e.auth.username&&e.auth.playerAvatar&&!e.game.room.worldId,j=e=>!e.game.room.worldId,D=e=>e.game.worlds,U=e=>e.game.room.mapId,$=e=>e.game.room.roomType,V=e=>e.game.room.worldId,B=e=>e.game.room.templateName,F=e=>e.game.urlDisclaimer,Z=e=>e.game.showSkills,G=e=>e.game.showSettings,q=(0,r.P1)([e=>e.game.farmDetails,e=>e.mapEditor.roomSettings],((e,t)=>({...e,farmName:t.name,ownership:t.ownership,ethAddress:t.ownerAddress,guild:t.guild}))),H=e=>e.game.sidePanel.isActive,z=e=>e.game.farmUpgradePanel.isActive,W=e=>e.game.realmrefresh},54698:function(e,t,n){"use strict";n.d(t,{tz:function(){return c},w2:function(){return f},wt:function(){return d}});var r=n(7406),i=n(39135),o=n(34377);function a(e){let t=Date.now(),n=(e=e.filter((e=>"sys"!==e.creator_id||t-e.createdAt<3e4))).length-1500;return n>0&&(e=e.slice(n)),e}function s(e){return"pixels-bot"===e.creator_id&&e.message.startsWith("/COMMAND ")}function u(e){if("pixels-bot"===e.creator_id){if(Date.now()-e.createdAt>12e5)return;let t=e.message.substring(9);if(!t.startsWith("{"))return o.ZP.sendEventDelayed(o.fb.SERVICE_COMMAND,{command:"Notice",message:t,allowClose:!0,allowReload:!0}),{...e,message:t};try{let n=JSON.parse(t);if(n.duration&&Date.now()-e.createdAt>n.duration)return;if(o.ZP.sendEventDelayed(o.fb.SERVICE_COMMAND,n),"notice"===n.command&&n.message)return{...e,message:n.message}}catch(e){console.log("invalid command",t,e)}}}let l=(0,r.oM)({name:"chatSlice",initialState:{isVisible:!1,openedNow:!1,newMessage:!1,chatEnabled:!0,messages:[{createdAt:0,creator_id:"",message:"Welcome To Pixels.",creatorName:"Pixels Bot"}]},reducers:{closeChat:e=>{e.isVisible=!1},toggleChat:e=>{e.isVisible?(e.isVisible=!1,e.openedNow=!1):(e.isVisible=!0,e.openedNow=!0,e.newMessage=!1)}},extraReducers:e=>{e.addCase("game/roomWarpBegan",(e=>{e.openedNow=!1})),e.addCase("game/ROOM_LOADED",((e,t)=>{e.messages=[{createdAt:0,creator_id:"sys",message:i.Z.t("chat.welcome","Welcome To Pixels."),creatorName:""}],e.openedNow=!1,t.payload.messages&&t.payload.messages.filter((e=>!s(e)||(u(e),!1))).forEach((t=>e.messages.push(t))),e.chatEnabled="private"!==t.payload.roomType&&"tutorial"!==t.payload.roomType})),e.addCase("game/PLAYER_REMOVED",((e,t)=>{if(e.messages.slice(-20).some((e=>e.creator_id===t.payload.id))){let n={creator_id:"sys",createdAt:(new Date).getTime(),message:i.Z.t("chat.leavemsg","{PLAYER} left").replace("{PLAYER}",t.payload.username),creatorName:""};e.messages=a(e.messages),e.messages.push(n)}})),e.addCase("game/CHAT_MESSAGE_RCV",((e,t)=>{let n=t.payload;(!s(n)||(n=u(n)))&&(!e.isVisible&&n.creatorName&&(e.newMessage=!0),e.messages=a(e.messages),e.messages.push(n))}))}}),c=e=>e.chat,{toggleChat:f,closeChat:d}=l.actions;t.ZP=l.reducer},97761:function(e,t,n){"use strict";n.d(t,{D2:function(){return i},IT:function(){return u},NN:function(){return s},WU:function(){return o},fD:function(){return a}});let r=(0,n(7406).oM)({name:"generalStoreModal",initialState:{isOpen:!1,isLoading:!1},reducers:{openStoreModal:(e,t)=>{e.storeId=t.payload,e.isOpen=!0},closeStoreModal:e=>{e.isOpen=!1},buyStoreItem:(e,t)=>{e.isLoading=!0},sellStoreItem:(e,t)=>{e.isLoading=!0}},extraReducers:e=>{e.addCase("game/ROOM_LEAVE",(e=>{e.isOpen=!1}))}}),i=e=>e.generalStore,{openStoreModal:o,closeStoreModal:a,buyStoreItem:s,sellStoreItem:u}=r.actions;t.ZP=r.reducer},95767:function(e,t,n){"use strict";n.d(t,{AK:function(){return l},I_:function(){return u},Yy:function(){return c},e4:function(){return s}});var r=n(7406),i=n(70247);function o(e){return e.filter((e=>{let t=e.itemId?i.Z.getGameItem(e.itemId):void 0,n=e.currencyId?i.Z.getGameCurrency(e.currencyId):void 0;return!("item"===e.kind&&e.itemId&&!t||"coins"===e.kind&&e.currencyId&&!n)}))}let a=(0,r.oM)({name:"mailbox",initialState:{isVisible:!1,isLoading:!0,mail:[],mailCount:0},reducers:{openMailbox:e=>{e.isVisible=!0},closeMailbox:e=>{e.isVisible=!1}},extraReducers:e=>{e.addCase("game/ROOM_LOADED",((e,t)=>{var n,r;(null===(n=t.payload.player)||void 0===n?void 0:n.full)&&(e.mailCount=null!==(r=t.payload.player.full.messages)&&void 0!==r?r:0)})),e.addCase("game/MAIL_UPDATE",((e,t)=>{void 0!==t.payload.messages&&(e.mailCount=t.payload.messages)})),e.addCase("game/RECEIVE_MAIL",((e,t)=>{e.isLoading=!1;let n=o(t.payload.mail);e.mail=n})),e.addCase("game/COLLECT_MAIL_ITEM_RESPONSE",((e,t)=>{if(t.payload.success){let n=t.payload.mailId,r=o(e.mail.filter((e=>e._id!=n)));e.mail=r}}))}}),{openMailbox:s,closeMailbox:u}=a.actions,l=e=>e.mailbox,c=e=>e.mailbox.mailCount;t.ZP=a.reducer},76873:function(e,t,n){"use strict";n.d(t,{CL:function(){return m},Cn:function(){return y},DL:function(){return S},Ei:function(){return M},Er:function(){return I},LB:function(){return C},Mp:function(){return V},Mt:function(){return T},Mz:function(){return v},PM:function(){return d},PR:function(){return p},St:function(){return O},T:function(){return L},TI:function(){return D},Vb:function(){return x},Y7:function(){return A},_0:function(){return N},a0:function(){return P},aT:function(){return E},c6:function(){return h},j6:function(){return g},pT:function(){return w},pW:function(){return $},r5:function(){return _},sW:function(){return R},v4:function(){return b},xp:function(){return U},zl:function(){return B}});var r=n(7406),i=n(36968),o=n.n(i),a=n(41609),s=n.n(a),u=n(70247),l=n(34377);let c={isActive:!1,category:"objects",mode:"off",roomSettings:{name:"",ownerAddress:void 0,members:[],restrictions:{bannedAddresses:[]},ownership:{forSale:!1,forRent:!1}},updateVersion:1},f=(0,r.oM)({name:"mapEditor",initialState:{...c},reducers:{setMode:(e,t)=>{e.mode=t.payload,e.selectedItem=void 0},setCategory:(e,t)=>{e.category=t.payload,e.selectedItem=void 0},paintObject:(e,t)=>{t.payload?e.selectedItem={type:"object",object:{def:{...t.payload}}}:e.selectedItem=void 0,l.rV.attachToCursor.emit(t.payload?{type:"object",config:{object:t.payload}}:void 0)},paintEntity:(e,t)=>{t.payload?e.selectedItem={type:"entity",entity:{def:{...t.payload}}}:e.selectedItem=void 0,l.rV.attachToCursor.emit(t.payload?{type:"entity",config:{entity:t.payload}}:void 0)},selectObject:(e,t)=>{if(null==t?void 0:t.payload){let n=t.payload.object;e.category=(null==n?void 0:n.wall)?"walls":"objects",e.selectedItem={type:"object",object:{def:{...n},config:{...t.payload.config},configDirty:t.payload.configDirty}}}else e.selectedItem=void 0},patchObjectConfig:(e,t)=>{var n,r;"object"===(null===(n=e.selectedItem)||void 0===n?void 0:n.type)?(e.selectedItem.object.config={...e.selectedItem.object.config,...t.payload},e.selectedItem.object.configDirty=!0):"entity"===(null===(r=e.selectedItem)||void 0===r?void 0:r.type)&&(e.selectedItem.entity.config={...e.selectedItem.entity.config,...t.payload})},updateObject:(e,t)=>{var n;"object"===(null===(n=e.selectedItem)||void 0===n?void 0:n.type)&&t.payload&&(e.selectedItem.object.configDirty=!1)},selectEntity:(e,t)=>{t.payload?e.selectedItem={type:"entity",entity:{def:{...t.payload.entity},config:t.payload.config}}:e.selectedItem=void 0},selectTile:(e,t)=>{t.payload?(e.mode="paint",e.selectedItem={type:"tile",tile:{...t.payload}},l.rV.attachToCursor.emit(t.payload?{type:"tile",config:{tile:t.payload}}:void 0)):e.selectedItem=void 0},updateRoomSettings:(e,t)=>{let n={...e.roomSettings};o()(n,t.payload.path,t.payload.value),e.roomSettings=n}},extraReducers:e=>{l.rV.editor.on.addReduxCase(e,(e=>{e.isActive=!0,e.category="objects"})),l.rV.editor.off.addReduxCase(e,(e=>{e.isActive=!1,e.mode="off",e.selectedItem=void 0})),e.addCase("game/SERVER_BUILD_NODE",((e,t)=>{var n,r,i,o,a,s;let l=t.payload;if("object"===l.type&&"object"===(null===(n=e.selectedItem)||void 0===n?void 0:n.type)&&(null===(i=e.selectedItem.object)||void 0===i||null===(r=i.config)||void 0===r?void 0:r._id)===l._id)if("update"===l.action){let t=u.Z.getMapObject(l._id);t&&(e.selectedItem.object.config.x=t.x,e.selectedItem.object.config.y=t.y,e.selectedItem.object.config.flip=t.flip)}else"remove"===l.action&&(e.selectedItem=void 0);else"entity"===l.type&&"entity"===(null===(o=e.selectedItem)||void 0===o?void 0:o.type)&&(null===(s=e.selectedItem.entity)||void 0===s||null===(a=s.config)||void 0===a?void 0:a.mid)===l._id&&"remove"===l.action&&(e.selectedItem=void 0);e.updateVersion+=1})),e.addCase("game/ENTITY_UPDATE",((e,t)=>{var n,r,i;if("entity"===(null===(n=e.selectedItem)||void 0===n?void 0:n.type)){let n=t.payload;n.mid===(null===(i=e.selectedItem.entity)||void 0===i||null===(r=i.config)||void 0===r?void 0:r.mid)&&(e.selectedItem.entity.config=n)}})),e.addCase("game/ROOM_NAME_CHANGED",((e,t)=>{e.roomSettings.name=t.payload,e.updateVersion+=1})),e.addCase("game/ROOM_OWNER_CHANGED",((e,t)=>{var n;e.roomSettings.ownerAddress=null===(n=t.payload)||void 0===n?void 0:n.toLowerCase()})),e.addCase("game/ROOM_PERMISSIONS_CHANGED",((e,t)=>{e.roomSettings.permissions=t.payload})),e.addCase("game/ROOM_GUILD_CHANGED",((e,t)=>{e.roomSettings.guild=t.payload})),e.addCase("game/ROOM_RESTRICTIONS_CHANGED",((e,t)=>{e.roomSettings.restrictions=t.payload})),e.addCase("game/ROOM_OWNERSHIP_CHANGED",((e,t)=>{e.roomSettings.ownership=t.payload})),e.addCase("game/ROOM_MEMBERS_CHANGED",((e,t)=>{e.roomSettings.members=t.payload})),e.addCase("game/ROOM_LEAVE",(e=>{e.roomSettings={...c.roomSettings},e.isActive=!1,e.mode="off",e.selectedItem=void 0,e.updateVersion+=1}))}}),{setMode:d,setCategory:p,paintObject:h,selectObject:g,paintEntity:v,selectEntity:m,patchObjectConfig:y,updateObject:b,selectTile:E,updateRoomSettings:_}=f.actions;t.ZP=f.reducer;let w=e=>e.mapEditor.isActive,O=e=>t=>t===e.mapEditor.mode,A=e=>e.mapEditor.category,S=e=>t=>t===e.mapEditor.category,I=e=>{let{selectedItem:t}=e.mapEditor;return{selectedItem:t}},P=e=>e.mapEditor.updateVersion,R=e=>{var t;return!!(null===(t=e.game.player)||void 0===t?void 0:t.full.godmode)};function k(e,t){return!!e&&!!t&&0!==t.length&&e.some((e=>t.includes(e.toUpperCase())))}let T=e=>{var t;let n=j(e);return k(null===(t=e.mapEditor.roomSettings.permissions)||void 0===t?void 0:t.editFarmConfig,n)},N=e=>{var t;let n=j(e);return k(null===(t=e.mapEditor.roomSettings.permissions)||void 0===t?void 0:t.editMapMembers,n)},x=e=>{var t;let n=j(e);return k(null===(t=e.mapEditor.roomSettings.permissions)||void 0===t?void 0:t.build,n)},C=e=>{var t;let n=j(e);return!!n&&0!==n.length&&(!!n.includes("OWNER")||k(null===(t=e.mapEditor.roomSettings.permissions)||void 0===t?void 0:t.surplusAccess,n))},L=e=>{var t;let n=j(e);return!!n&&0!==n.length&&(!!n.includes("OWNER")||k(null===(t=e.mapEditor.roomSettings.permissions)||void 0===t?void 0:t.storageAccess,n))},M=e=>{var t,n,r;if(!s()(e.mapEditor.roomSettings.ownerAddress)){let t=!!(null===(r=e.game.player)||void 0===r?void 0:r.full.cryptoWallets.find((t=>{var n;return t.address.toLowerCase()===(null===(n=e.mapEditor.roomSettings.ownerAddress)||void 0===n?void 0:n.toLowerCase())})));if(t)return t}return!!((null===(t=e.game.room)||void 0===t?void 0:t.mapId)&&(null===(n=e.game.player)||void 0===n?void 0:n.full.farms)&&e.game.player.full.farms.includes(e.game.room.mapId))},j=e=>{var t,n,r;if(null===(t=e.game.player)||void 0===t?void 0:t.full.godmode)return["GOD","OWNER","MANAGER","ANY"];if(M(e))return["OWNER","MANAGER","ANY"];if(e.mapEditor.roomSettings.members&&e.mapEditor.roomSettings.members.length>0){let t=null===(r=e.game.player)||void 0===r||null===(n=r.core.mid)||void 0===n?void 0:n.toLowerCase(),i=e.mapEditor.roomSettings.members.find((n=>{var r,i;return(null===(r=e.game.player)||void 0===r?void 0:r.core.mid)&&(null===(i=n.member)||void 0===i?void 0:i.toLowerCase())===t}));if(null==i?void 0:i.roles)return[...i.roles.map((e=>e.toUpperCase())),"ANY"]}return["ANY"]},D=e=>{var t,n;return"object"===(null===(t=e.mapEditor.selectedItem)||void 0===t?void 0:t.type)?null===(n=e.mapEditor.selectedItem)||void 0===n?void 0:n.object:void 0},U=e=>{var t,n;return"tile"===(null===(t=e.mapEditor.selectedItem)||void 0===t?void 0:t.type)?null===(n=e.mapEditor.selectedItem)||void 0===n?void 0:n.tile:void 0},$=e=>{var t,n;return"entity"===(null===(t=e.mapEditor.selectedItem)||void 0===t?void 0:t.type)?null===(n=e.mapEditor.selectedItem)||void 0===n?void 0:n.entity:void 0},V=e=>e.mapEditor.roomSettings,B=e=>e.mapEditor.roomSettings.restrictions},71156:function(e,t,n){"use strict";n.d(t,{SY:function(){return s},Uj:function(){return p},eo:function(){return d},ft:function(){return f},j4:function(){return c},oG:function(){return u},ww:function(){return a},yW:function(){return l}});var r=n(7406),i=n(34377);let o=(0,r.oM)({name:"marketplace",initialState:{mode:"none"},reducers:{openMarketplace:(e,t)=>{e.mode="marketplace",e.initialCategory=t.payload.initialCategory},openListings:e=>{e.mode="listings"},close:e=>{e.mode="none"},handlePurchaseSuccess:e=>{delete e.purchase}},extraReducers:e=>{e.addCase("game/".concat(i.fb.MARKETPLACE_SEND),((e,t)=>{let{payload:n}=t;"purchase"===n.subcommand&&(e.purchase="pending")})),e.addCase("game/".concat(i.fb.MARKETPLACE_RECEIVE),((e,t)=>{let{payload:n}=t;switch(n.type){case"purchase-success":{let{...t}=n;e.purchase=t;break}case"purchase-failure":delete e.purchase;break;default:throw Error("Unexpected value ".concat(n))}}))}}),a=e=>"marketplace"===e.marketplace.mode,s=e=>e.marketplace.initialCategory,u=e=>"listings"===e.marketplace.mode,l=e=>e.marketplace.purchase,{openMarketplace:c,openListings:f,close:d,handlePurchaseSuccess:p}=o.actions;t.ZP=o.reducer},77497:function(e,t,n){"use strict";n.d(t,{HS:function(){return p},W_:function(){return f},wm:function(){return d}});var r=n(34377),i=n(16562),o=n(46787),a=n(15103),s=n(80535),u=n(86731);let l=(0,a.cn)([]),c=1,f=(0,a.cn)(null,((e,t,n)=>{let r=e(l).slice();n.forEach((e=>{var t,n,i;if(e.deduplicationKey){let t=r.findIndex((t=>{let{deduplicationKey:n}=t;return e.deduplicationKey===n})),i=r[t];if(i)return void r.splice(t,1,{...i,duplicates:(null!==(n=i.duplicates)&&void 0!==n?n:1)+1})}if(e.stacking&&void 0!==(null===(t=e.text)||void 0===t?void 0:t[e.stacking.textPropertyName])){let{key:t,textPropertyName:n}=e.stacking,o=null===(i=e.text)||void 0===i?void 0:i[n];if(void 0!==o){let e=r.findIndex((e=>{let{stacking:n}=e;return(null==n?void 0:n.key)===t})),i=r[e];if(null==i?void 0:i.text){let t={...i,text:{...i.text}};return void 0===t.text[n]?t.text[n]=o:t.text[n]+=o,void r.splice(e,1,t)}}}r.push({...e,reactKey:++c})})),t(l,r)})),d=(0,a.cn)((e=>e(l).find((t=>"trade"!==t.source||e(o.eH))))),p=(0,a.cn)(null,((e,t,n)=>{let r=e(l),i=n?r.findIndex((e=>e.reactKey===n.reactKey)):-1;t(l,r.slice(Math.max(i+1,1)))}));(0,u.H)("game/".concat(r.fb.ROOM_LEAVE),(()=>{s.e.set(l,[])})),(0,u.H)("game/".concat(r.fb.TRADE_RECEIVE),(e=>{if("request"===e.subcommand){let t=i.l.getInstance().getSessionId(),n=Object.keys(e.trade.players).find((e=>e!==t)),r=n?i.l.getInstance().getPlayerCoreBySessionId(n):void 0;s.e.set(f,[{source:"trade",text:{id:"notifications.trade.request",name:null==r?void 0:r.username},deduplicationKey:"notifications.trade.request"}])}}))},69959:function(e,t,n){"use strict";n.d(t,{Vu:function(){return o},_V:function(){return a},pM:function(){return i}});let r=(0,n(7406).oM)({name:"plotSlice",initialState:{isVisible:!1},reducers:{openPlot:e=>{e.isVisible=!0},closePlot:e=>{e.isVisible=!1}},extraReducers:e=>{e.addCase("game/ROOM_LEAVE",(e=>{e.isVisible=!1}))}}),i=e=>e.plot.isVisible,{openPlot:o,closePlot:a}=r.actions;t.ZP=r.reducer},87434:function(e,t,n){"use strict";n.d(t,{Hg:function(){return s},fp:function(){return o},ht:function(){return a},op:function(){return i}});let r=(0,n(7406).oM)({name:"reportSlice",initialState:{open:!1,mid:""},reducers:{openReportPlayerWindow:(e,t)=>{let{payload:n}=t;e.open=!0,e.mid=n.mid},closeReportPlayerWindow:e=>{e.open=!1,e.mid=""}}}),i=e=>e.report.open,o=e=>e.report.mid,{openReportPlayerWindow:a,closeReportPlayerWindow:s}=r.actions;t.ZP=r.reducer},6354:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r=n(15103),i=n(34377),o=n(80535);let a=(0,r.cn)({},((e,t,n)=>{t(a,"clear"!==n?{...e(a),...n}:{})}));i.rV.sellOrders.fill.subscribe((e=>{var t;let{storeId:n,sellOrderIndex:r}=e,{nextReset:i,orders:s}=null!==(t=o.e.get(a)[n])&&void 0!==t?t:{nextReset:0,orders:[]},u=s.slice();u[r]={...u[r],completedAt:-1},o.e.set(a,{[n]:{nextReset:i,orders:u}})}));let s=[];i.rV.sellOrders.fetch.subscribe((e=>{let{storeId:t}=e;o.e.set(a,{[t]:{nextReset:0,orders:s,...o.e.get(a)[t],fetching:!0}})}))},46787:function(e,t,n){"use strict";n.d(t,{$6:function(){return l},KU:function(){return c},V:function(){return f},eH:function(){return a},gJ:function(){return p},sG:function(){return u},sU:function(){return d}});var r=n(7406),i=n(34377),o=n(80535);let a=(0,n(15103).cn)(!1),s=(0,r.oM)({name:"tradeSlice",initialState:{trade:null,tradeId:"",tradeValue:null,otherTradeValue:null},reducers:{acceptTrade:e=>{o.e.set(a,!1)},adjustTrade:(e,t)=>{},dropTradeItem:(e,t)=>{}},extraReducers:e=>{e.addCase("game/".concat(i.fb.TRADE_RECEIVE),((e,t)=>{let{payload:n}=t;switch(n.subcommand){case"request":case"update":var r,i;e.tradeId&&e.tradeId!==n.tradeId&&console.warn("Server sending new trade while another trade is ongoing",n.tradeId),"request"===n.subcommand&&o.e.set(a,!0),e.tradeValue=null!==(r=n.tradeValue)&&void 0!==r?r:0,e.otherTradeValue=null!==(i=n.otherTradeValue)&&void 0!==i?i:0,e.trade=n.trade,e.tradeId=n.tradeId;break;case"close":e.tradeId===n.tradeId&&(e.trade=null,e.tradeId="",o.e.set(a,!1));break;default:throw Error("Unexpected value ".concat(n))}}))}}),u=e=>e.trade.trade,l=e=>({tradeValue:e.trade.tradeValue,otherTradeValue:e.trade.otherTradeValue}),c=e=>e.trade.tradeId,{acceptTrade:f,adjustTrade:d,dropTradeItem:p}=s.actions;t.ZP=s.reducer},69140:function(e,t,n){"use strict";n.d(t,{Bd:function(){return d},Dw:function(){return s},Ep:function(){return E},JR:function(){return b},OH:function(){return y},VG:function(){return h},_u:function(){return w},aA:function(){return u},aP:function(){return p},e4:function(){return l},ex:function(){return g},gs:function(){return _},j2:function(){return m},je:function(){return v},rg:function(){return O},tD:function(){return a},vV:function(){return c},wR:function(){return f}});var r=n(7406),i=n(34377);let o=(0,r.oM)({name:"ui",initialState:{portalDialog:{isVisible:!1,mid_portal:"",tenant:"pixels"},entityInput:{isVisible:!1},imageDialog:{isVisible:!1,isIframe:!1},confirmDialog:{isVisible:!1},hideHUD:!1},reducers:{gameDimension:(e,t)=>{e.dimension=t.payload},portalConfig:(e,t)=>{e.portalDialog={isVisible:!0,mid_portal:t.payload.source,tenant:t.payload.tenant,mode:t.payload.mode||"infiniportal"}},showHUD:(e,t)=>{e.hideHUD=!t.payload},clearHighlight:(e,t)=>{e.highlightButton===t.payload&&(e.highlightButton=void 0)},portalClose:e=>{e.portalDialog={isVisible:!1,mid_portal:"",tenant:"pixels"}},entityInput:(e,t)=>{e.entityInput={isVisible:!0,mid_portal:t.payload.source,prompt:t.payload.prompt,config:t.payload.config}},entityInputClose:e=>{e.entityInput={isVisible:!1}},confirmDialog:(e,t)=>{e.confirmDialog={isVisible:!0,...t.payload}},confirmDialogClose:e=>{e.confirmDialog={isVisible:!1}},imagePopup:(e,t)=>{e.imageDialog={isVisible:!0,url:t.payload.url,isIframe:t.payload.isIframe||!1,modeless:!0===t.payload.modeless,vertical:!0===t.payload.vertical}},imagePopupClose:e=>{e.imageDialog={isVisible:!1,isIframe:!1}}},extraReducers:e=>{e.addCase("game/ROOM_LOADED",(e=>{e.portalDialog={isVisible:!1,mid_portal:"",tenant:"pixels"},e.entityInput.isVisible=!1,e.imageDialog.isVisible=!1,e.imageDialog.isIframe=!1,e.hideHUD=!1})),e.addCase("game/".concat(i.fb.CLIENT_CMD),((e,t)=>{let n=t.payload;var r;"buttonhighlight"===n.detail&&(e.highlightButton=(null===(r=n.params)||void 0===r?void 0:r[0])||void 0)}))}}),{gameDimension:a,showHUD:s,portalConfig:u,portalClose:l,imagePopup:c,imagePopupClose:f,entityInput:d,entityInputClose:p,confirmDialog:h,confirmDialogClose:g,clearHighlight:v}=o.actions,m=e=>e.ui.portalDialog,y=e=>e.ui.imageDialog,b=e=>e.ui.entityInput,E=e=>e.ui.confirmDialog,_=e=>e.ui.hideHUD,w=e=>e.ui.highlightButton,O=e=>e.ui.dimension;t.ZP=o.reducer},80535:function(e,t,n){"use strict";let r,i,o;n.d(t,{e:function(){return ne},h:function(){return te}});var a=n(7406),s=n(86731),u=n(34377),l=n(69140),c=n(97761),f=n(76873);let d={[l.tD.type]:{event:u.Vh.RESIZE},[c.NN.type]:{event:u.Yi.BUY_STORE_ITEM},[c.IT.type]:{event:u.Yi.SELL_STORE_ITEM},[f.PM.type]:{event:u.qM.SET_MODE},[f.PR.type]:{event:u.qM.SET_CATEGORY},[f.v4.type]:{event:u.qM.BUILD_OBJECT}};Object.entries(d).forEach((e=>{let[t,n]=e;(0,s.H)(t,(e=>{u.ZP.emitEventNow(n.event,n.adapter?n.adapter(e):e)}))}));var p=n(34256),h=n(92217),g=n(89733),v=n(16562);(0,s.H)(p.uy.type,((e,t)=>{(async()=>{await u.ZP.init(),await g.Z.initGame(),await g.Z.initRoom({...e,transition:e.snap?"snap":"intro"})})()})),(0,s.H)(p.Hi.type,((e,t)=>{(async()=>{try{let n=await g.Z.loadLibraries(e.mapId);t.dispatch({type:"game/LIBRARY",payload:!!n})}catch(e){t.dispatch({type:"game/SVR_CANNOTCONNECT",payload:{message:["mapLoadFailed","Error Loading Map"]}})}})()})),(0,s.H)(h.iM.type,((e,t)=>{e.mapId&&t.dispatch((0,p.Hi)({mapId:e.mapId,lastSavedAt:e.lastSavedAt}))})),(0,s.H)(h.z1.type,((e,t)=>{e.mapId&&t.dispatch((0,p.Hi)({mapId:e.mapId,lastSavedAt:e.lastSavedAt}))})),(0,s.H)(p.ni.type,(()=>{(async()=>{await g.Z.killScene();let e=v.l.getInstance();await e.disconnect()})()}));var m=n(83171),y=n(83928),b=n(79750),E=n(70247),_=n(39135);let w=(e,t)=>{let n=null==e?void 0:e.match(/\d+$/);return-1!==(null==t?void 0:t.indexOf("*"))?t=t.replace("*",n?n[0]:""):["left","right"].includes(t)&&(t=(e=>"left"===e?v.l.getInstance().peekLeftMap():"right"===e?v.l.getInstance().peekRightMap():e)(t)),(0,y.En)(t)},O=async(e,t)=>{var n,r,i;let o=(0,b.GU)(),a=null!==(r=null==e||null===(n=e.tenants)||void 0===n?void 0:n[0])&&void 0!==r?r:"pixels";if(a!==o.name&&(await(async e=>{(0,b.q4)(e)&&(await(0,_.W)(!0),E.Z.clearGameLibrary(),await E.Z.loadLibraries())})(a),(o=(0,b.GU)()).tutorialQuest&&o.tutorialMap)){let e=null===(i=t.full.quests)||void 0===i?void 0:i[o.tutorialQuest];if(!(null==e?void 0:e.isComplete))return o.tutorialMap}return e.id},A=(e,t)=>{clearTimeout(r),e.dispatch((0,p.tD)({abort:!0})),g.Z.unfreezeRoom(t)};(0,s.H)("game/ROOM_WARP",((e,t)=>{let n=t.getState(),o=(0,m.Xt)(n),a=(0,m.Od)(n),s=(0,m.K7)(n),l=w(a,e.mapId),c=((e,t,n)=>{let r=null==e?void 0:e.match(/\d+$/),i=null==t?void 0:t.match(/\d+$/);if(!r&&!i)return"quick";let o="quick";if(n){let e=n.split(",");"right"===e[0]?o="roadleft":"left"===e[0]&&(o="roadright")}return r&&i&&r[0]===i[0]?"quick":o})(a,l,e.spawn),f=(0,m.lA)(n);if(f)if(!s&&!e.abort&&e.mapId&&o){t.dispatch((0,p.tD)({})),u.rV.editor.off.emit(),console.log("warp to ".concat(l)),g.Z.freezeRoom(c),i=e.source;let n=E.Z.loadMap(l);r=setTimeout((async()=>{let a;r=void 0,i=void 0;try{a=await n}catch(e){return void A(t,c)}if(a){g.Z.pauseRoom(),t.dispatch((0,p.Fd)({...e,mapId:l}));try{let t=v.l.getInstance();if(-1!==await t.disconnect()){let t=await O(a,f);await g.Z.initRoom({mapId:t,spawn:e.spawn,worldId:o,transition:c})}else await g.Z.initRoom({mapId:(0,b.lf)(),worldId:o,transition:"quick"})}catch(e){console.log("this is what happened, dude",e),t.dispatch({type:"game/SVR_CANNOTCONNECT",payload:{message:["mapNotFound","The there there is not there. Try again. Message ID: mapNotFound"]}})}}else A(t,c)}),"quick"!==c?1500:1e3)}else s&&e.abort&&("quick"===c||"portal"===c)&&r&&i&&e.source===i&&A(t,c)}));var S=n(19445),I=n(82485),P=n(71343),R=n(61036);let k=0;(0,s.H)("game/GAME_OBJECT_CLICKED",((e,t)=>{var n,r,i,o,a,s;let l=Date.now();if(l-k<150)return;k=l;let c=t.getState(),d=(0,f.pT)(c),h=(0,S.NS)(c);if(d||(null==h?void 0:h.isOpen))return;let{selfPlayer:g,world:m}=e;if(!g)return;let b=(0,y.iy)(e),_=v.l.getInstance(),w=null===(n=_.currentPlayer)||void 0===n?void 0:n.full.pet,O=90;if(w&&w.happiness>50&&(null!==(i=null===(r=w.traits)||void 0===r?void 0:r.Speed)&&void 0!==i?i:0)>1&&(O+=w.traits.Speed-1+32),b>O*O)return void t.dispatch((0,p.io)({mouse:e.mouse,text:"hover.toofar"}));e.animation&&(null===(o=_.scene)||void 0===o||o.playOneTimeAnimation(e.animation));let A=(0,S.xM)(c),T=(0,S.B6)(c);if(!T||(null==h?void 0:h.isOpen))if("npc"!==e.entityType)if("storage"!==e.entityType)if("generic"===e.entityType&&e.clickable)u.ZP.emitEventNow(P.m.clickEntity,{mid:e.targetId,entity:e.entityId,impact:"click",inputs:[null==m?void 0:m.x,null==m?void 0:m.y]});else if(e.action){let n=e.action;if(n.room){let e=n.room;u.ZP.emitEventNow(u.fb.ROOM_WARP,{mapId:e,spawn:n.spawn})}n.link&&("https://play.pixels.online/terravilla101"===n.link.toLowerCase()?u.ZP.emitEventNow(u.fb.ROOM_WARP,{mapId:"terravilla"}):/^[^./:]*$/.test(e.action.link)?u.ZP.emitEventNow(u.fb.ROOM_WARP,{mapId:n.link.trim()}):u.ZP.emitEventNow(u.fb.LINK_OPEN,{link:n.link.trim(),msgKey:n.confirm})),n.dialog&&t.dispatch({type:"game/PRESENT_UI",payload:{ui:n.dialog,params:[n.spawn],source:e.targetId}}),n.sound&&u.rV.playSound.emit(n.sound),n.sharelink&&(0,R.Bf)(n.sharelink,"Play Pixels.xyz")}else"self"===e.useType||("pet"===e.useType?t.dispatch((0,p.zR)({})):"otherPlayer"===e.useType?t.dispatch((0,p.ol)({mid:e.mid,username:e.username})):console.log("nothing to do",e));else{let n=e.targetId,r=_.getEntityByUniqueId(n);if(r){let e=E.Z.getGameEntity(r.entity);((null==e||null===(s=e.storage)||void 0===s?void 0:s.transient)||(0,f.T)(t.getState()))&&u.ZP.emitEventNow(u.fb.PLAYER_OPEN_STORAGE,{storageId:n})}}else u.ZP.emitEventNow(u.qM.PLAYER_CLICKED_NPC,{npcId:e.npcId,mid:e.targetId});else{if((null===(a=T.onUse)||void 0===a?void 0:a.types.includes("move"))&&(0,I.ZP)(T,e.key,e.type||e.entityType,e.cropState)){let t=e.useType||"unknown",n="object"===t?E.Z.getGameObject(e.key):E.Z.getGameEntity(e.key);u.rV.attachToCursor.emit({type:t,mid:e.targetId,moving:!0,startCoords:e.world,config:{[t]:n}})}else"npc"!==e.entityType||(0,I.ZP)(T,e.npcId,"npc")?u.ZP.emitEventNow(u.qM.PLAYER_USED_ITEM,{item:{id:T.id,inventorySlot:A.slot},target:{id:e.targetId,mid:e.targetId,type:e.useType||"unknown"},client:{key:e.key,entityType:e.entityType,cropState:e.cropState}}):u.ZP.emitEventNow(u.qM.PLAYER_CLICKED_NPC,{npcId:e.npcId,mid:e.targetId})}}));var T=n(27361),N=n.n(T);let x=0;(0,s.H)("game/PLAYER_CLICKED",((e,t)=>{let n=Date.now();if(n-x<150)return;x=n;let r=t.getState(),i=(0,f.pT)(r),o=(0,S.NS)(r);if(!i&&!(null==o?void 0:o.isOpen)){let t=(0,S.B6)(r),n=(0,S.xM)(r);if(t){var a,s,l,c,d;let r=(null===(a=t.onUse)||void 0===a?void 0:a.placeEntity)||(null===(s=t.onUse)||void 0===s?void 0:s.placeObject),i=N()(e,"context.tempNode.isBuildAreaFree",!1);if(r&&!i)return;let o={type:"ground",x:N()(e,"context.tempNode.position.x")||N()(e,"world.x"),y:N()(e,"context.tempNode.position.y")||N()(e,"world.y")};if(null==t||null===(l=t.onUse)||void 0===l?void 0:l.types.includes("move")){if(o.type=N()(e,"context.tempNode.type"),o.mid=N()(e,"context.tempNode.mid"),!o.type||!o.mid||!i)return;u.rV.attachToCursor.emit({type:"item",config:{item:t}})}else if((null===(c=t.onUse)||void 0===c?void 0:c.types.includes("placeTile"))||(null===(d=t.onUse)||void 0===d?void 0:d.types.includes("removeTile"))){if(!i)return;o.tiles=N()(e,"context.tiles")}u.ZP.emitEventNow(u.qM.PLAYER_USED_ITEM,{item:{id:t.id,inventorySlot:n.slot},target:o,client:{key:"ground",entityType:"ground"}})}}}));var C=n(36968),L=n.n(C);(0,s.H)(f.r5.type,((e,t)=>{switch(e.path){case"restrictions.bannedAddresses":let n={restrictions:{...(0,f.zl)(t.getState())}};L()(n,e.path,e.value),u.ZP.emitEventNow(u.qM.ROOM_RESTRICTIONS,{...n.restrictions});break;case"permissions.use":u.ZP.emitEventNow(u.qM.ROOM_PERMISSIONS,{permissions:{use:e.value}});break;case"guild":u.ZP.emitEventNow(u.qM.ROOM_PERMISSIONS,{guild:e.value});break;case"name":u.ZP.emitEventNow(u.qM.ROOM_NAME,e.value);break;case"ownership.forSale":u.ZP.emitEventNow(u.qM.ROOM_OWNERSHIP,{forSale:e.value})}})),(0,s.H)("mapEditor/addMember",(e=>{u.ZP.emitEventNow(u.qM.ROOM_MEMBERS,e)})),(0,s.H)("game/PLAYER_COLLIDED_WITH_OBJECT",(e=>{if(null==e?void 0:e.onCollide){let t=e.onCollide;t.teleport&&u.ZP.emitEventNow(u.fb.ROOM_WARP,{mapId:t.teleport,spawn:t.spawn,source:e.key}),t.sound&&u.rV.playSound.emit(t.sound),t.trigger&&u.ZP.emitEventNow(u.Yi.TRIGGER_EVENT,{trigger:e.onCollide.trigger,targetId:e.targetId}),t.link&&u.ZP.emitEventNow(u.fb.LINK_OPEN,{link:t.link.trim(),msgKey:t.confirm})}})),(0,s.H)("game/PLAYER_UNCOLLIDED_WITH_OBJECT",(e=>{if(null==e?void 0:e.onCollide){let t=e.onCollide;t.teleport&&u.ZP.emitEventNow(u.fb.ROOM_WARP,{mapId:t.teleport,spawn:t.spawn,source:e.key,abort:!0})}}));var M=n(77341),j=n(79274),D=n(69959),U=n(71156),$=n(95767);function V(){if(navigator.serviceWorker&&"PushManager"in window)return navigator.serviceWorker.register("/workers/push-worker.js?v=1").then((function(e){return o=e})).catch((()=>{o=void 0}))}async function B(){if(await V(),!o)return;await new Promise((function(e,t){if("granted"===Notification.permission)e(Notification.permission);else{let n=Notification.requestPermission((function(t){e(t)}));n&&n.then(e,t)}})).then((function(e){if("granted"!==e)throw Error("We weren't granted permission.")}));let e={userVisibleOnly:!0,applicationServerKey:function(e){let t=(e+"=".repeat(1)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r[e]=n.charCodeAt(e);return r}("BFOtTI6ukP9_JEyYf0Kxuk9JZnL4okcSVnztjI8Scflrq0Wx38XctJ1UtKbpNoK-LnGDYPYB-fkXP8U1Y4epKcw")};return o.pushManager.subscribe(e).then((function(e){return console.log("Received PushSubscription: ",JSON.stringify(e)),e}))}async function F(){return!await async function(){if(await V(),!o)return!1;let e=await o.pushManager.getSubscription();return!(!e||e.expirationTime&&Date.now()>e.expirationTime)}()&&!!await async function(){return await V(),o&&"denied"!==Notification.permission}()}let Z="craft:",G=!1;(0,s.H)("game/PRESENT_UI",((e,t)=>{var n,r,i,o,a,s,d,h,g,m,y;let{ui:b,source:_}=e,w=e.params;if(w||(w=[e.param]),console.log("got presentui ".concat(b)),b.includes("marketplace-")&&"marketplace-listings"!==b)t.dispatch((0,U.j4)({initialCategory:b.split("marketplace-")[1]}));else switch(b){case"farmDetails":t.dispatch({type:"game/PRESENT_FARM_DETAILS"});break;case"farmPicker":case"plotDialog":t.dispatch((0,D.Vu)());break;case"portalConfig":t.dispatch((0,S.aq)()),t.dispatch((0,l.aA)({source:_,tenant:"pixels",mode:null==w?void 0:w[0]}));break;case"entityInput":t.dispatch((0,S.aq)()),t.dispatch((0,l.Bd)({source:_,prompt:null==w?void 0:w[0],config:w.slice(1)}));break;case"marketplace":t.dispatch((0,S.aq)()),t.dispatch((0,U.j4)({}));break;case"marketplace-listings":t.dispatch((0,S.aq)()),t.dispatch((0,U.ft)());break;case"portalConfigTenant":t.dispatch((0,S.aq)()),t.dispatch((0,l.aA)({source:_,mode:null==w?void 0:w[0]}));break;case"hideHUD":t.dispatch((0,l.Dw)(!1));break;case"showHUD":t.dispatch((0,l.Dw)(!0));break;case"link":"string"==typeof(null==w?void 0:w[0])&&u.ZP.emitEventNow(u.fb.LINK_OPEN,{link:null==w?void 0:w[0],msgKey:null==w?void 0:w[1]});break;case"petStorage":{let e=null===(n=v.l.getInstance().selfPlayer)||void 0===n?void 0:n.pet;e&&u.ZP.emitEventNow(u.fb.PLAYER_OPEN_STORAGE,{storageId:e.mid})}break;case"wardrobe":u.ZP.emitEventNow(u.fb.PLAYER_OPEN_STORAGE,{storageId:"wardrobe"});break;case"petPicker":t.dispatch((0,p.lW)({mode:"hatched",entity:_}));break;case"petCapsule":t.dispatch((0,p.lW)({mode:"capsule",entity:_}));break;case"petDetails":t.dispatch((0,p.zR)({petId:null==w?void 0:w[0]}));break;case"mapStorage":(0,f.LB)(t.getState())&&u.ZP.emitEventNow(u.fb.PLAYER_OPEN_STORAGE,{storageId:v.l.getInstance().mapStorageId});break;case"entityStorage":{let e=v.l.getInstance().getEntityByUniqueId(_);if(e){let n=E.Z.getGameEntity(e.entity);((null==n||null===(r=n.storage)||void 0===r?void 0:r.transient)||(0,f.T)(t.getState()))&&u.ZP.emitEventNow(u.fb.PLAYER_OPEN_STORAGE,{storageId:_})}}break;case"popupMap":let e=null!==(o=null==w?void 0:w[0])&&void 0!==o?o:"obj_mapTerravilla",O=E.Z.getGameObject(e);(null==O||null===(i=O.sprite)||void 0===i?void 0:i.image)&&(O.sprite.size&&O.sprite.size.height>O.sprite.size.width?t.dispatch((0,l.vV)({url:null==O||null===(a=O.sprite)||void 0===a?void 0:a.image,vertical:!0})):t.dispatch((0,l.vV)({url:null==O||null===(s=O.sprite)||void 0===s?void 0:s.image})));break;case"popupFrame":t.dispatch((0,l.vV)({url:(null==w?void 0:w[0])||"https://www.pixels.xyz",isIframe:!0}));break;case"theatreFrame":"close"===(null==w?void 0:w[0])?t.dispatch((0,l.wR)()):t.dispatch((0,l.vV)({url:(null==w?void 0:w[0])||"https://www.pixels.xyz",isIframe:!0,modeless:!0}));break;case"closeCrafting":t.dispatch((0,M.F0)());break;case"openMailbox":t.dispatch((0,S.aq)()),t.dispatch((0,$.e4)());break;case"closeMailbox":t.dispatch((0,$.I_)());break;case"webpush":if(G)break;F().then((e=>{e&&t.dispatch((0,l.VG)({prompt:null==w?void 0:w[0],yesno:!0,callback:e=>{"yes"===e?B().then((e=>{if(e){let t=JSON.parse(JSON.stringify(e));u.ZP.emitEventNow(u.Yi.PUSH_SUBSCRIBE,{endpoint:t.endpoint,expiration:t.expirationTime,extra:{...t,endpoint:void 0,expirationTime:void 0}})}})).catch((e=>{console.log(e)})):"no"===e&&(G=!0)}}))}));break;default:if(b.startsWith(Z)||j.h3.includes(b)){let e=b.replace(Z,""),n=null!==(d=null==w?void 0:w[1])&&void 0!==d?d:"";(null==n?void 0:n.startsWith("update:"))||t.dispatch((0,S.aq)()),t.dispatch((0,M.Uf)({source:null!=_?_:"",craftType:e,tableTier:null!==(h=null==w?void 0:w[0])&&void 0!==h?h:1,state:n,achievement:null!==(g=null==w?void 0:w[2])&&void 0!==g?g:"",finish:null!==(m=null==w?void 0:w[3])&&void 0!==m?m:1,quantity:null!==(y=null==w?void 0:w[4])&&void 0!==y?y:1}))}else E.Z.getStore(b)?(t.dispatch((0,S.aq)()),t.dispatch((0,c.WU)(b))):console.log("unknown dialog ".concat(b))}})),(0,s.H)(S.oi.type,(e=>{let{sourceIndex:t,targetIndex:n,sourceContainer:r,targetContainer:i}=e;(t!==n||r!==i)&&u.rV.inventory.swapItems.emit(e)}));var q=n(60604),H=n(77497);(0,s.H)("game/".concat(u.fb.PLAYER_EXP_CHANGE),((e,t)=>{var n,r,i;let o=null===(n=t.getState().game.player)||void 0===n?void 0:n.full;if(!o)return;let a=o.levels,s=e.levels,u=[],l=o.quests,c=j.nA.every((e=>{var t,n;return((null===(t=a[e])||void 0===t?void 0:t.level)||0)===((null===(n=s[e])||void 0===n?void 0:n.level)||0)}));!c&&(null===(r=Object.values(E.Z.getGameItems()||{}).filter((e=>{var t,n;return null==e||null===(n=e.requirements)||void 0===n||null===(t=n.levels)||void 0===t?void 0:t.some((e=>{let{levelType:t,level:n}=e;return!!j.nA.includes(t)&&n>=0}))})))||void 0===r||r.filter((e=>{var t,n;return(null===(t=e.requirements.levels)||void 0===t?void 0:t.some((e=>{var t;return e.level>((null===(t=a[e.levelType])||void 0===t?void 0:t.level)||0)})))&&e.requirements.levels.every((e=>{var t;return((null===(t=s[e.levelType])||void 0===t?void 0:t.level)||0)>=e.level}))&&(!(null===(n=e.requirements)||void 0===n?void 0:n.quests)||e.requirements.quests.every((e=>{var t;return null===(t=l[e])||void 0===t?void 0:t.isComplete})))})).forEach((e=>u.push({source:"item",icon:e.image,text:{id:"notifications.itemUnlocked",name:(0,R.sA)(e.id)},deduplicationKey:"notifications.itemUnlocked-".concat(e.id)}))),null===(i=Object.values(E.Z.getGameAchievements()||{}).filter((e=>{var t;return(null===(t=e.craftable)||void 0===t?void 0:t.autoGrant)&&e.craftable.requiredLevel>0})))||void 0===i||i.filter((e=>{var t,n;if(!e.craftable)return!1;let r=e.craftable.requiredLevel||0,i=e.craftable.requiredSkill||j.oi[e.craftable.type],o=(null===(t=a[i])||void 0===t?void 0:t.level)||0;return((null===(n=s[i])||void 0===n?void 0:n.level)||0)>=r&&o<r})).forEach((e=>{let t=e.craftable.requiredSkill||j.oi[e.craftable.type];u.push({source:"achievement",icon:"".concat(q.fd).concat(t,".png"),text:{id:"notifications.globalAchievementUnlocked",name:(0,R.sA)(e.id)},deduplicationKey:"notifications.globalAchievementUnlocked-".concat(e.id)})})),u.length&&ne.set(H.W_,u))})),n(86193);let z=["placeEntity","placeObject","move","removeEntity","removeObject"];(0,s.H)(S.$Z.type,((e,t)=>{let{mid:n,item:r}=e;if(!n&&r){!function(e,t){if(e){var n,r,i,o,a,s,l,c,f,d,p,h,g;let m;m=(null==e||null===(n=e.onUse)||void 0===n?void 0:n.placeObject)?{type:"object",config:{object:E.Z.getGameObject(null==e||null===(l=e.onUse)||void 0===l?void 0:l.placeObject)},placing:!0}:(null==e||null===(i=e.onUse)||void 0===i||null===(r=i.placeEntity)||void 0===r?void 0:r.entity)?{type:"entity",config:{entity:E.Z.getGameEntity(e.onUse.placeEntity.entity)},placing:!0}:(null===(a=e.onUse)||void 0===a||null===(o=a.placeTile)||void 0===o?void 0:o.tileset)?{type:"tile",config:{tile:{tilesetId:null===(f=e.onUse)||void 0===f||null===(c=f.placeTile)||void 0===c?void 0:c.tileset}}}:(null===(s=e.onUse)||void 0===s?void 0:s.types.includes("removeTile"))?{type:"tile",config:{tile:{}}}:{type:"item",config:{item:e}},u.rV.attachToCursor.emit({...m,editingWithoutPermissions:(null==e||null===(p=e.onUse)||void 0===p||null===(d=p.types)||void 0===d?void 0:d.some((e=>z.includes(e))))&&!t||!function(e){var t;if(!(null==e||null===(t=e.useTargets)||void 0===t?void 0:t.types.includes("mapLabels"))||!e.useTargets.mapLabels)return!0;let n=v.l.getInstance().mapLabels;return e.useTargets.mapLabels.every((e=>n.includes(e)))}(e),removing:null==e||null===(g=e.onUse)||void 0===g||null===(h=g.types)||void 0===h?void 0:h.some((e=>["removeEntity","removeObject"].includes(e)))})}}(r,(0,f.Vb)(t.getState()))}}));var W=n(95047);(0,s.H)("game/CLIENT_CMD",(e=>{console.log("got client command",e);let{detail:t,source:n,params:r}=e;switch(t){case"petHatch":n&&W.Z.hatchPet(n).then((e=>{var t,i;"success"===e?u.ZP.sendEventDelayed(P.m.clickEntity,{mid:n,impact:"hatched",entity:null!==(t=null==r?void 0:r[0])&&void 0!==t?t:"ent_growthlab"}):u.ZP.sendEventDelayed(P.m.clickEntity,{mid:n,impact:"failed",entity:null!==(i=null==r?void 0:r[0])&&void 0!==i?i:"ent_growthlab"})}));break;case"roninInjectedFunction":try{var i,o,a,s,l,c,f,d,p;let e=te.getState(),t=null!==(p=null==r?void 0:r[0])&&void 0!==p?p:"cbRoninCall",n=null===(a=e.game.player)||void 0===a||null===(o=a.full)||void 0===o||null===(i=o.cryptoWallets)||void 0===i?void 0:i.map((e=>e.address));null===(d=window.ronin)||void 0===d||null===(f=d.provider)||void 0===f||null===(c=f[t])||void 0===c||c.call(f,{userId:null===(l=e.game.player)||void 0===l||null===(s=l.core)||void 0===s?void 0:s.mid,addresses:n}).then((e=>{console.log("Ronin injected function result: ",e)})).catch((e=>{console.log("Ronin injected function ERROR: ",e)}))}catch(e){console.log(e)}}}));var Y=n(18496),J=n(22181),K=n(54698),X=n(87434),Q=n(46787),ee=n(15103);let te=(0,a.xC)({reducer:{auth:h.Co,game:p.ZP,ui:l.ZP,mailbox:$.ZP,generalStore:c.ZP,marketplace:U.ZP,chat:K.ZP,plot:D.ZP,report:X.ZP,storage:S.ZP,trade:Q.ZP,mapEditor:f.ZP,crafting:M.ZP},middleware:e=>e().concat((e=>t=>n=>{if(n.type===h.Kx.type)(async()=>{try{var t,r,i,o;let a=null!==(i=(0,y.Ul)("wallet-provider"))&&void 0!==i?i:"unknown",s=await Y.Z.initialize(null!==(o=(0,y.En)(null===(t=n.payload)||void 0===t?void 0:t.mapId))&&void 0!==o?o:"",a),u=null==s?void 0:s.player,l=(0,b.F5)(),c=null==u||null===(r=u.location)||void 0===r?void 0:r.mapId,f=null==s?void 0:s.targetTenant;if(f&&f!==l)return void window.open("/".concat(f,"/").concat(c),"_self");s&&Y.Z.sessionToken&&(e.dispatch((0,J.R)({mapId:c})),e.dispatch((0,h.iM)({sessionToken:Y.Z.sessionToken,provider:Y.Z.walletProvider,username:u.username,playerId:u._id.toString(),playerAvatar:u.playerAvatar,lastSavedAt:u.lastSavedAt,cryptoWallets:u.cryptoWallets,currentAvatar:u.currentAvatar,mapId:c})))}catch(t){console.warn(t),(null==t?void 0:t.error)&&e.dispatch((0,h.gz)({message:t.message||t.error,allowReload:!0,allowClose:!1}))}e.dispatch((0,h.RT)())})();else if(n.type===h.YR.type);else if(n.type===h.MD.type){let{username:t,avatarPieces:r}=n.payload;(async()=>{var n,i,o,a;if(Y.Z.sessionToken)try{let o=await Y.Z.createPlayer(t,r);(null==o||null===(n=o.player)||void 0===n?void 0:n.username)?e.dispatch((0,h.z1)({username:o.player.username,playerId:o.player._id,cryptoWallets:o.player.cryptoWallets,playerAvatar:r,mapId:null===(i=o.player.location)||void 0===i?void 0:i.mapId})):(null==o?void 0:o.message)&&"username-already-exists"===o.message&&e.dispatch((0,h.cm)({message:["nameInUse","Name in use"]}))}catch(t){"username-already-exists"===(null==t||null===(a=t.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)?e.dispatch((0,h.cm)({message:["nameInUse","Name in use"]})):e.dispatch((0,h.cm)({message:["internalServerError","Unknown Error Occurred Creating Player"]}))}})()}else n.type===p.ni.type&&(async()=>{Y.Z.sessionToken&&Y.Z.signOut().catch((e=>{console.log("error signing out",e)})),e.dispatch((0,h.k4)())})();return t(n)})).concat((e=>t=>n=>{let r=s.q[n.type];return r&&r(n.payload,e),t(n)}))}),ne=(0,ee.MT)()},21876:function(e){!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],u=o[1],l=new i(3*(a+u)/4-u),c=0,f=u>0?a-4:a;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(function(e,t,r){for(var i,o=[],a=t;a<r;a+=3)o.push(n[(i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,a,a+16383>s?s:a+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},72:function(e,t,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=n(675),i=n(783),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=a(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(k(e,ArrayBuffer)||e&&k(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(k(e,SharedArrayBuffer)||e&&k(e.buffer,SharedArrayBuffer)))return function(e,t,n){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),s.prototype),r}(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var i=function(e){if(s.isBuffer(e)){var t,n=0|d(e.length),r=a(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),a(e<0?0:0|d(e))}function f(e){for(var t=e.length<0?0:0|d(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(i)return r?-1:S(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,n){var i,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=T[e[o]];return i}(this,t,n);case"utf8":case"utf-8":return y(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return o=n,0===(i=t)&&o===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){var o;if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(o=n=+n)!=o&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){f=!1;break}if(f)return o}return-1}function y(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function b(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,i,o){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function _(e,t,n,r,i,o){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function w(e,t,n,r,o){return t=+t,n>>>=0,o||_(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function O(e,t,n,r,o){return t=+t,n>>>=0,o||_(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return l(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(k(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(k(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?y(this,0,e):h.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(k(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(o,a),l=this.slice(r,i),c=e.slice(t,n),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],a=c[f];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,o,a,s,u,l,c,f,d,p,h=this.length-t;if((void 0===n||n>h)&&(n=h),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var g=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(s!=s)break;e[n+a]=s}return a}(this,e,t,n);case"utf8":case"utf-8":return a=t,s=n,R(S(e,this.length-a),this,a,s);case"ascii":return u=t,l=n,R(I(e),this,u,l);case"latin1":case"binary":return this,i=t,o=n,R(I(e),this,i,o);case"base64":return c=t,f=n,R(P(e),this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,p=n,R(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,this.length-d),this,d,p);default:if(g)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),g=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||b(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return w(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return w(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var i,o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=s.isBuffer(e)?e:s.from(e,r),u=a.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%u]}return this};var A=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319||a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function P(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var T=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},783:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=l}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?5.960464477539062e-8:0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+p]=255&a,p+=h,a/=256,l-=8);e[n+p-h]|=128*g}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(72);e.exports=i}()},993:function(){},46305:function(){},17591:function(){},77663:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u=[],l=!1,c=-1;function f(){l&&r&&(l=!1,r.length?u=r.concat(u):c=-1,u.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(r=u,u=[];++c<t;)r&&r[c].run();c=-1,t=u.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},11163:function(e,t,n){e.exports=n(24751)},57715:function(e,t,n){"use strict";n.d(t,{OO:function(){return h},zv:function(){return v},JP:function(){return g},nI:function(){return m},Db:function(){return y}});var r,i=n(15671),o=n(43144),a=n(4942),s=n(67294),u=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,l={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},c=function(e){return l[e]};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(u,c)}},h=(0,s.createContext)();function g(){return p}var v=function(){function e(){(0,i.Z)(this,e),this.usedNamespaces={}}return(0,o.Z)(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach((function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)}))}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function m(){return r}var y={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p=d(d({},p),e)}(e.options.react),r=e}}},25617:function(e,t,n){"use strict";n.d(t,{zt:function(){return p},I0:function(){return m},v9:function(){return b}});var r,i,o,a,s=n(67294),u=s.createContext(null),l=function(e){e()},c={notify:function(){},get:function(){return[]}};function f(e,t){var n,r=c;function i(){a.onStateChange&&a.onStateChange()}function o(){var o,a,s;n||(n=t?t.addNestedSub(i):e.subscribe(i),o=l,a=null,s=null,r={clear:function(){a=null,s=null},notify:function(){o((function(){for(var e=a;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=a;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,n=s={callback:e,next:null,prev:s};return n.prev?n.prev.next=n:a=n,function(){t&&null!==a&&(t=!1,n.next?n.next.prev=n.prev:s=n.prev,n.prev?n.prev.next=n.next:a=n.next)}}})}var a={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return!!n},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=c)},getListeners:function(){return r}};return a}var d="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect,p=function(e){var t=e.store,n=e.context,r=e.children,i=(0,s.useMemo)((function(){var e=f(t);return{store:t,subscription:e}}),[t]),o=(0,s.useMemo)((function(){return t.getState()}),[t]);d((function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,o]);var a=n||u;return s.createElement(a.Provider,{value:i},r)};function h(){return(0,s.useContext)(u)}function g(e){void 0===e&&(e=u);var t=e===u?h:function(){return(0,s.useContext)(e)};return function(){return t().store}}n(8679),n(72973),n(87462);var v=g(),m=(void 0===r&&(r=u),i=r===u?v:g(r),function(){return i().dispatch}),y=function(e,t){return e===t},b=(void 0===o&&(o=u),a=o===u?h:function(){return(0,s.useContext)(o)},function(e,t){void 0===t&&(t=y);var n=a(),r=function(e,t,n,r){var i,o=(0,s.useReducer)((function(e){return e+1}),0)[1],a=(0,s.useMemo)((function(){return f(n,r)}),[n,r]),u=(0,s.useRef)(),l=(0,s.useRef)(),c=(0,s.useRef)(),p=(0,s.useRef)(),h=n.getState();try{if(e!==l.current||h!==c.current||u.current){var g=e(h);i=void 0!==p.current&&t(g,p.current)?p.current:g}else i=p.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return d((function(){l.current=e,c.current=h,p.current=i,u.current=void 0})),d((function(){function e(){try{var e=n.getState();if(e===c.current)return;var r=l.current(e);if(t(r,p.current))return;p.current=r,c.current=e}catch(e){u.current=e}o()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[n,a]),i}(e,t,n.store,n.subscription);return(0,s.useDebugValue)(r),r});l=n(73935).unstable_batchedUpdates},88359:function(e,t){"use strict";
/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */if("function"==typeof Symbol&&Symbol.for){var n=Symbol.for;n("react.element"),n("react.portal"),n("react.fragment"),n("react.strict_mode"),n("react.profiler"),n("react.provider"),n("react.context"),n("react.forward_ref"),n("react.suspense"),n("react.suspense_list"),n("react.memo"),n("react.lazy"),n("react.block"),n("react.server.block"),n("react.fundamental"),n("react.debug_trace_mode"),n("react.legacy_hidden")}},72973:function(e,t,n){"use strict";n(88359)},68697:function(e,t,n){"use strict";n.d(t,{P1:function(){return o}});var r="NOT_FOUND",i=function(e,t){return e===t},o=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=0,s={memoizeOptions:void 0},u=i.pop();if("object"==typeof u&&(s=u,u=i.pop()),"function"!=typeof u)throw Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var l=s.memoizeOptions,c=void 0===l?n:l,f=Array.isArray(c)?c:[c],d=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e})))throw Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ")+"]");return t}(i),p=e.apply(void 0,[function(){return a++,u.apply(null,arguments)}].concat(f)),h=e((function(){for(var e=[],n=d.length,r=0;r<n;r++)e.push(d[r].apply(null,arguments));return t=p.apply(null,e)}));return Object.assign(h,{resultFunc:u,memoizedResultFunc:p,dependencies:d,lastResult:function(){return t},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),h}}((function(e,t){var n,o,a="object"==typeof t?t:{equalityCheck:t},s=a.equalityCheck,u=a.maxSize,l=void 0===u?1:u,c=a.resultEqualityCheck,f=(n=void 0===s?i:s,function(e,t){if(null===e||null===t||e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}),d=1===l?{get:function(e){return o&&f(o.key,e)?o.value:r},put:function(e,t){o={key:e,value:t}},getEntries:function(){return o?[o]:[]},clear:function(){o=void 0}}:function(e,t){var n=[];function i(e){var i=n.findIndex((function(n){return t(e,n.key)}));if(i>-1){var o=n[i];return i>0&&(n.splice(i,1),n.unshift(o)),o.value}return r}return{get:i,put:function(t,o){i(t)===r&&(n.unshift({key:t,value:o}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(l,f);function p(){var t=d.get(arguments);if(t===r){if(t=e.apply(null,arguments),c){var n=d.getEntries().find((function(e){return c(e.value,t)}));n&&(t=n.value)}d.put(arguments,t)}return t}return p.clearCache=function(){return d.clear()},p}))},83154:function(e,t,n){var r;if("function"==typeof fetch&&(r=void 0!==n.g&&n.g.fetch?n.g.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"undefined"==typeof window||void 0===window.document){var i=r||n(68203);i.default&&(i=i.default),t.default=i,e.exports=t.default}},83878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},97326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},15671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},43144:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(83997);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(83997);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},87462:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return r}})},25267:function(e,t,n){"use strict";function r(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},89611:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{Z:function(){return r}})},83997:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(71002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==(0,r.Z)(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,r.Z)(t)?t:String(t)}},71002:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return r}})},81563:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}n.d(t,{Z:function(){return i}})},76629:function(e,t,n){"use strict";function r(e,t){t.headers=e.headers||{},t.statusMessage=e.statusText,t.statusCode=e.status,t.data=e.response}function i(e,t,n){return new Promise((function(i,o){n=n||{};var a,s,u,l=new XMLHttpRequest,c=n.body,f=n.headers||{};for(a in n.timeout&&(l.timeout=n.timeout),l.ontimeout=l.onerror=function(e){e.timeout="timeout"==e.type,o(e)},l.open(e,t.href||t),l.onload=function(){for(u=l.getAllResponseHeaders().trim().split(/[\r\n]+/),r(l,l);s=u.shift();)s=s.split(": "),l.headers[s.shift().toLowerCase()]=s.join(": ");if((s=l.headers["content-type"])&&~s.indexOf("application/json"))try{l.data=JSON.parse(l.data,n.reviver)}catch(e){return r(l,e),o(e)}(l.status>=400?o:i)(l)},"u">typeof FormData&&c instanceof FormData||c&&"object"==typeof c&&(f["content-type"]="application/json",c=JSON.stringify(c)),l.withCredentials=!!n.withCredentials,f)l.setRequestHeader(a,f[a]);l.send(c)}))}n.r(t),n.d(t,{del:function(){return u},get:function(){return o},patch:function(){return s},post:function(){return a},put:function(){return l},send:function(){return i}});var o=i.bind(i,"GET"),a=i.bind(i,"POST"),s=i.bind(i,"PATCH"),u=i.bind(i,"DELETE"),l=i.bind(i,"PUT")},34853:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ue}});var r=n(71002),i=n(15671),o=n(43144),a=n(97326),s=n(89611);function u(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,s.Z)(e,t)}function l(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=n(4942),d=n(83878),p=n(81563),h=n(25267);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},y=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Z)(this,e),this.init(t,n)}return(0,o.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||m,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,v(v({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}()),b=function(){function e(){(0,i.Z)(this,e),this.observers={}}return(0,o.Z)(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){if(this.observers[e]){if(!t)return void delete this.observers[e];this.observers[e]=this.observers[e].filter((function(e){return e!==t}))}}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function E(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function _(e){return null==e?"":""+e}function w(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function O(e,t,n){var r=w(e,t,Object);r.obj[r.k]=n}function A(e,t){var n=w(e,t),r=n.obj,i=n.k;if(r)return r[i]}function S(e,t,n){var r=A(e,n);return void 0!==r?r:A(t,n)}function I(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function R(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return P[e]})):e}var k="undefined"!=typeof window&&window.navigator&&void 0===window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,T=[" ",",","?","!",";"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){u(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=c(r);if(t){var i=c(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return l(this,e)});function r(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,i.Z)(this,r),t=n.call(this),k&&b.call((0,a.Z)(t)),t.data=e||{},t.options=o,void 0===t.options.keySeparator&&(t.options.keySeparator="."),void 0===t.options.ignoreJSONStructure&&(t.options.ignoreJSONStructure=!0),t}return(0,o.Z)(r,[{key:"addNamespaces",value:function(e){0>this.options.ns.indexOf(e)&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[e,t];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."));var s=A(this.data,a);return s||!o||"string"!=typeof n?s:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(t){if(t[n])return t[n];for(var i=n.split(r),o=t,a=0;a<i.length;++a){if(!o||"string"==typeof o[i[a]]&&a+1<i.length)return;if(void 0===o[i[a]]){for(var s=2,u=i.slice(a,a+s).join(r),l=o[u];void 0===l&&i.length>a+s;)s++,l=o[u=i.slice(a,a+s).join(r)];if(void 0===l)return;if(null===l)return null;if(n.endsWith(u)){if("string"==typeof l)return l;if(u&&"string"==typeof l[u])return l[u]}var c=i.slice(a+s).join(r);return c?e(l,c,r):void 0}o=o[i[a]]}return o}}(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),O(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)("string"==typeof n[i]||"[object Array]"===Object.prototype.toString.apply(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=A(this.data,a)||{};r?function e(t,n,r){for(var i in n)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof n[i]||n[i]instanceof String?r&&(t[i]=n[i]):e(t[i],n[i],r):t[i]=n[i]);return t}(s,n,i):s=x(x({},s),n),O(this.data,a,s),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?x(x({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((function(e){return t[e]&&Object.keys(t[e]).length>0}))}},{key:"toJSON",value:function(){return this.data}}]),r}(b),L={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={},U=function(e){u(s,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=c(s);if(t){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function s(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)(this,s),t=n.call(this),k&&b.call((0,a.Z)(t)),function(e,t,n){["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((function(e){t[e]&&(n[e]=t[e])}))}(0,e,(0,a.Z)(t)),t.options=r,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=y.create("translator"),t}return(0,o.Z)(s,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||function(e,t,n){t=t||"",n=n||"";var r=T.filter((function(e){return 0>t.indexOf(e)&&0>n.indexOf(e)}));if(0===r.length)return!0;var i=new RegExp("(".concat(r.map((function(e){return"?"===e?"\\?":e})).join("|"),")")),o=!i.test(e);if(!o){var a=e.indexOf(n);a>0&&!i.test(e.substring(0,a))&&(o=!0)}return o}(e,n,r));if(o&&!a){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:i};var u=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,t,n){var i=this;if("object"!==(0,r.Z)(t)&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var o=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,a=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,u=this.extractFromKey(e[e.length-1],t),l=u.key,c=u.namespaces,f=c[c.length-1],d=t.lng||this.language,p=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(p){var h=t.nsSeparator||this.options.nsSeparator;return o?(g.res="".concat(f).concat(h).concat(l),g):"".concat(f).concat(h).concat(l)}return o?(g.res=l,g):l}var g=this.resolve(e,t),v=g&&g.res,m=g&&g.usedKey||l,y=g&&g.exactUsedKey||l,b=Object.prototype.toString.apply(v),E=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject;if(_&&v&&("string"!=typeof v&&"boolean"!=typeof v&&"number"!=typeof v)&&0>["[object Number]","[object Function]","[object RegExp]"].indexOf(b)&&("string"!=typeof E||"[object Array]"!==b)){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,v,j(j({},t),{},{ns:c})):"key '".concat(l," (").concat(this.language,")' returned an object instead of string.");return o?(g.res=w,g):w}if(a){var O="[object Array]"===b,A=O?[]:{},S=O?y:m;for(var I in v)if(Object.prototype.hasOwnProperty.call(v,I)){var P="".concat(S).concat(a).concat(I);A[I]=this.translate(P,j(j({},t),{joinArrays:!1,ns:c})),A[I]===P&&(A[I]=v[I])}v=A}}else if(_&&"string"==typeof E&&"[object Array]"===b)(v=v.join(E))&&(v=this.extendTranslation(v,e,t,n));else{var R=!1,k=!1,T=void 0!==t.count&&"string"!=typeof t.count,N=s.hasDefaultValue(t),x=T?this.pluralResolver.getSuffix(d,t.count,t):"",C=t["defaultValue".concat(x)]||t.defaultValue;!this.isValidLookup(v)&&N&&(R=!0,v=C),this.isValidLookup(v)||(k=!0,v=l);var L=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:v,M=N&&C!==v&&this.options.updateMissing;if(k||R||M){if(this.logger.log(M?"updateKey":"missingKey",d,f,l,M?C:v),a){var D=this.resolve(l,j(j({},t),{},{keySeparator:!1}));D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],$=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&$&&$[0])for(var V=0;V<$.length;V++)U.push($[V]);else"all"===this.options.saveMissingTo?U=this.languageUtils.toResolveHierarchy(t.lng||this.language):U.push(t.lng||this.language);var B=function(e,n,r){var o=N&&r!==v?r:L;i.options.missingKeyHandler?i.options.missingKeyHandler(e,f,n,o,M,t):i.backendConnector&&i.backendConnector.saveMissing&&i.backendConnector.saveMissing(e,f,n,o,M,t),i.emit("missingKey",e,f,n,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?U.forEach((function(e){i.pluralResolver.getSuffixes(e,t).forEach((function(n){B([e],l+n,t["defaultValue".concat(n)]||C)}))})):B(U,l,C))}v=this.extendTranslation(v,e,t,g,n),k&&v===l&&this.options.appendNamespaceToMissingKey&&(v="".concat(f,":").concat(l)),(k||R)&&this.options.parseMissingKeyHandler&&(v="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(f,":").concat(l):l,R?v:void 0):this.options.parseMissingKeyHandler(v))}return o?(g.res=v,g):v}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,j(j({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(j(j({},n),{interpolation:j(j({},this.options.interpolation),n.interpolation)}));var a,s="string"==typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var u=e.match(this.interpolator.nestingRegexp);a=u&&u.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=j(j({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),s){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=L.handle(d,e,t,this.options&&this.options.postProcessPassResolved?j({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var u=a.extractFromKey(e,s),l=u.key;n=l;var c=u.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,d=f&&!s.ordinal&&0===s.count&&a.pluralResolver.shouldUseIntlApi(),p=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(e){a.isValidLookup(t)||(o=e,!D["".concat(h[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(D["".concat(h[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!a.isValidLookup(t)){i=n;var o,u=[l];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(u,l,n,e,s);else{f&&(c=a.pluralResolver.getSuffix(n,s.count,s));var c,h="".concat(a.options.pluralSeparator,"zero");if(f&&(u.push(l+c),d&&u.push(l+h)),p){var g="".concat(l).concat(a.options.contextSeparator).concat(s.context);u.push(g),f&&(u.push(g+c),d&&u.push(g+h))}}for(;o=u.pop();)a.isValidLookup(t)||(r=o,t=a.getResource(n,e,o,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),s}(b);function $(e){return e.charAt(0).toUpperCase()+e.slice(1)}var V=function(){function e(t){(0,i.Z)(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=y.create("languageUtils")}return(0,o.Z)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||0>e.indexOf("-"))return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||0>e.indexOf("-"))return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=$(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=$(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=$(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);(!n.options.supportedLngs||n.isSupportedCode(r))&&(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){0>i.indexOf(e)&&o(n.formatLanguageCode(e))})),i}}]),e}(),B=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],F={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},Z=["v1","v2","v3"],G={zero:0,one:1,two:2,few:3,many:4,other:5},q=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.Z)(this,e),this.languageUtils=t,this.options=r,this.logger=y.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(n={},B.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:F[e.fc]}}))})),n)}return(0,o.Z)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(e){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((function(e){return"".concat(t).concat(e)}))}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((function(e,t){return G[e]-G[t]})).map((function(e){return"".concat(t.options.prepend).concat(e)})):r.numbers.map((function(r){return t.getSuffix(e,r,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!Z.includes(this.options.compatibilityJSON)}}]),e}();function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,e),this.logger=y.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,o.Z)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:R,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?I(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?I(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?I(t.nestingPrefix):t.nestingPrefixEscaped||I("$t("),this.nestingSuffix=t.nestingSuffix?I(t.nestingSuffix):t.nestingSuffixEscaped||I(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function l(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(0>e.indexOf(s.formatSeparator)){var i=S(t,u,e);return s.alwaysFormat?s.format(i,void 0,n,z(z(z({},r),t),{},{interpolationkey:e})):i}var o=e.split(s.formatSeparator),a=o.shift().trim(),l=o.join(s.formatSeparator).trim();return s.format(S(t,u,a),l,n,z(z(z({},r),t),{},{interpolationkey:a}))};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return l(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?l(s.escape(e)):l(e)}}].forEach((function(t){for(a=0;i=t.regex.exec(e);){var n=i[1].trim();if(void 0===(o=c(n)))if("function"==typeof f){var u=f(e,i,r);o="string"==typeof u?u:""}else if(r&&r.hasOwnProperty(n))o="";else{if(d){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"==typeof o||s.useRawValueToEscape||(o=_(o));var l=t.safeValue(o);if(e=e.replace(i[0],l),d?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=z({},o);function s(e,t){var n=this.nestingOptionsSeparator;if(0>e.indexOf(n))return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),i="{".concat(r[1]);e=r[0];var o=(i=this.interpolate(i,a)).match(/'/g),s=i.match(/"/g);(o&&o.length%2==0&&!s||s.length%2!=0)&&(i=i.replace(/'/g,'"'));try{a=JSON.parse(i),t&&(a=z(z({},t),a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(i)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var u=[],l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),u=c,l=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=_(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=u.reduce((function(e,t){return i.format(e,t,o.lng,z(z({},o),{},{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t={};return function(n,r,i){var o=r+JSON.stringify(i),a=t[o];return a||(a=e(r,i),t[o]=a),a(n)}}var X=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,e),this.logger=y.create("formatter"),this.options=t,this.formats={number:K((function(e,t){var n=new Intl.NumberFormat(e,t);return function(e){return n.format(e)}})),currency:K((function(e,t){var n=new Intl.NumberFormat(e,J(J({},t),{},{style:"currency"}));return function(e){return n.format(e)}})),datetime:K((function(e,t){var n=new Intl.DateTimeFormat(e,J({},t));return function(e){return n.format(e)}})),relativetime:K((function(e,t){var n=new Intl.RelativeTimeFormat(e,J({},t));return function(e){return n.format(e,t.range||"day")}})),list:K((function(e,t){var n=new Intl.ListFormat(e,J({},t));return function(e){return n.format(e)}}))},this.init(t)}return(0,o.Z)(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=K(t)}},{key:"format",value:function(e,t,n,r){var i=this;return t.split(this.formatSeparator).reduce((function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===t&&0>i.indexOf(":")?n.currency||(n.currency=i.trim()):"relativetime"===t&&0>i.indexOf(":")?n.range||(n.range=i.trim()):i.split(";").forEach((function(e){if(e){var t,r=(t=e.split(":"),(0,d.Z)(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||(0,p.Z)(t)||(0,h.Z)()),i=r[0],o=r.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[i.trim()]||(n[i.trim()]=o),"false"===o&&(n[i.trim()]=!1),"true"===o&&(n[i.trim()]=!0),isNaN(o)||(n[i.trim()]=parseInt(o,10))}}))}return{formatName:t,formatOptions:n}}(t),a=o.formatName,s=o.formatOptions;if(i.formats[a]){var u=e;try{var l=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},c=l.locale||l.lng||r.locale||r.lng||n;u=i.formats[a](e,c,J(J(J({},s),r),l))}catch(e){i.logger.warn(e)}return u}return i.logger.warn("there was no format function for ".concat(a)),e}),e)}}]),e}();function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e){u(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=c(r);if(t){var i=c(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return l(this,e)});function r(e,t,o){var s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,i.Z)(this,r),s=n.call(this),k&&b.call((0,a.Z)(s)),s.backend=e,s.store=t,s.services=o,s.languageUtils=o.languageUtils,s.options=u,s.logger=y.create("backendConnector"),s.waitingReads=[],s.maxParallelReads=u.maxParallelReads||10,s.readingCalls=0,s.maxRetries=u.maxRetries>=0?u.maxRetries:5,s.retryTimeout=u.retryTimeout>=1?u.retryTimeout:350,s.state={},s.queue=[],s.backend&&s.backend.init&&s.backend.init(o,u.backend,u),s}return(0,o.Z)(r,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o={},a={},s={},u={};return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?void 0===a[s]&&(a[s]=!0):(i.state[s]=1,r=!1,void 0===a[s]&&(a[s]=!0),void 0===o[s]&&(o[s]=!0),void 0===u[t]&&(u[t]=!0)))})),r||(s[e]=!0)})),(Object.keys(o).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(u)}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){var r,s,u;(s=(r=w(n.loaded,[i],Object)).obj)[u=r.k]=s[u]||[],s[u].push(o),void 0!==n.pending[e]&&(delete n.pending[e],n.pendingCount--),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]={});var t=n.loaded[e];t.length&&t.forEach((function(t){void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;return e.length?this.readingCalls>=this.maxParallelReads?void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:o,callback:a}):(this.readingCalls++,this.backend[n](e,t,(function(s,u){if(r.readingCalls--,r.waitingReads.length>0){var l=r.waitingReads.shift();r.read(l.lng,l.ns,l.fcName,l.tried,l.wait,l.callback)}s&&u&&i<r.maxRetries?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,a)}),o):a(s,u)}))):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,ee(ee({},o),{},{isUpdate:i})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),r}(b);function ne(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&0>e.supportedLngs.indexOf("cimode")&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(){}var ae=function(e){u(s,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=c(s);if(t){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return l(this,e)});function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if((0,i.Z)(this,s),e=n.call(this),k&&b.call((0,a.Z)(e)),e.options=ne(t),e.services={},e.logger=y,e.modules={external:[]},function(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))}((0,a.Z)(e)),r&&!e.isInitialized&&!t.isClone){if(!e.options.initImmediate)return e.init(t,r),l(e,(0,a.Z)(e));setTimeout((function(){e.init(t,r)}),0)}return e}return(0,o.Z)(s,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"==typeof t.ns?t.defaultNS=t.ns:0>t.ns.indexOf("translation")&&(t.defaultNS=t.ns[0]));var i={debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===(0,r.Z)(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===(0,r.Z)(e[2])||"object"===(0,r.Z)(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}};function o(e){return e?"function"==typeof e?new e:e:null}if(this.options=ie(ie(ie({},i),this.options),ne(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=ie(ie({},i.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){this.modules.logger?y.init(o(this.modules.logger),this.options):y.init(null,this.options),this.modules.formatter?a=this.modules.formatter:"undefined"!=typeof Intl&&(a=X);var a,s=new V(this.options);this.store=new C(this.options.resources,this.options);var u=this.services;u.logger=y,u.resourceStore=this.store,u.languageUtils=s,u.pluralResolver=new q(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(u.formatter=o(a),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new W(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new te(o(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(u.languageDetector=o(this.modules.languageDetector),u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=o(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new U(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.format=this.options.interpolation.format,n||(n=oe),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=E(),f=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var i=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){0>i.indexOf(e)&&i.push(e)}))};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)})),this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(i,this.options.ns,(function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),n(e)}))}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=E();return e||(e=this.languages),t||(t=this.options.ns),n||(n=oe),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&L.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=E();this.emit("languageChanging",e);var i=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(e,o){o?(i(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))},a=function(t){e||t||!n.services.languageDetector||(t=[]);var r="string"==typeof t?t:n.services.languageUtils.getBestMatchFromCodes(t);r&&(n.language||i(r),n.translator.language||n.translator.changeLanguage(r),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(r)),n.loadResources(r,(function(e){o(e,r)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var i=this,o=function e(t,o){if("object"!==(0,r.Z)(o)){for(var a,s=arguments.length,u=Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];a=i.options.overloadTranslationOptionHandler([t,o].concat(u))}else a=ie({},o);a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,a.keyPrefix=a.keyPrefix||n||e.keyPrefix;var c=i.options.keySeparator||".",f=a.keyPrefix?"".concat(a.keyPrefix).concat(c).concat(t):t;return i.t(f,a)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!i||a(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=E();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){0>n.options.ns.indexOf(e)&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=E();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return 0>r.indexOf(e)}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr":"rtl"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe,r=ie(ie(ie({},this.options),t),{isClone:!0}),i=new s(r);return(void 0!==t.debug||void 0!==t.prefix)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach((function(t){i[t]=e[t]})),i.services=ie({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new U(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(r,n),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),s}(b);(0,f.Z)(ae,"createInstance",(function(){return new ae(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}));var se=ae.createInstance();se.createInstance=ae.createInstance,se.createInstance,se.init,se.loadResources,se.reloadResources,se.use,se.changeLanguage,se.getFixedT,se.t,se.exists,se.setDefaultNamespace,se.hasLoadedNamespace,se.loadNamespaces,se.loadLanguages;var ue=se},48583:function(e,t,n){"use strict";n.d(t,{KO:function(){return c},zt:function(){return s}});var r=n(67294),i=n(15103);let o=(0,r.createContext)(void 0),a=e=>{let t=(0,r.useContext)(o);return(null==e?void 0:e.store)||t||(0,i.K7)()},s=({children:e,store:t})=>{let n=(0,r.useRef)();return t||n.current||(n.current=(0,i.MT)()),(0,r.createElement)(o.Provider,{value:t||n.current},e)},u=e=>"function"==typeof(null==e?void 0:e.then),l=r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e});function c(e,t){return[function(e,t){let n=a(t),[[i,o,s],c]=(0,r.useReducer)((t=>{let r=n.get(e);return Object.is(t[0],r)&&t[1]===n&&t[2]===e?t:[r,n,e]}),void 0,(()=>[n.get(e),n,e])),f=i;(o!==n||s!==e)&&(c(),f=n.get(e));let d=null==t?void 0:t.delay;return(0,r.useEffect)((()=>{let t=n.sub(e,(()=>{"number"!=typeof d?c():setTimeout(c,d)}));return c(),t}),[n,e,d]),(0,r.useDebugValue)(f),u(f)?l(f):f}(e,t),function(e,t){let n=a(t),i=(0,r.useCallback)(((...t)=>{if(!("write"in e))throw Error("not writable atom");return n.set(e,...t)}),[n,e]);return i}(e,t)]}},15103:function(e,t,n){"use strict";let r;n.d(t,{K7:function(){return y},MT:function(){return m},cn:function(){return o}});let i=0;function o(e,t){let n="atom"+ ++i,r={toString:()=>n};return"function"==typeof e?r.read=e:(r.init=e,r.read=e=>e(r),r.write=(e,t,n)=>t(r,"function"==typeof n?n(e(r)):n)),t&&(r.write=t),r}let a=e=>"init"in e,s=e=>!!e.write,u=new WeakMap,l=(e,t)=>{u.set(e,t),e.catch((()=>{})).finally((()=>u.delete(e)))},c=(e,t)=>{let n=u.get(e);n&&(u.delete(e),n(t))},f=(e,t)=>{e.status="fulfilled",e.value=t},d=(e,t)=>{e.status="rejected",e.reason=t},p=(e,t)=>"v"in e&&"v"in t&&Object.is(e.v,t.v),h=(e,t)=>"e"in e&&"e"in t&&Object.is(e.e,t.e),g=e=>"v"in e&&e.v instanceof Promise,v=e=>{if("e"in e)throw e.e;return e.v},m=()=>{let e,t,n=new WeakMap,r=new WeakMap,i=new Map;e=new Set,t=new Set;let o=e=>n.get(e),u=(e,t)=>{Object.freeze(t);let r=n.get(e);if(n.set(e,t),i.has(e)||i.set(e,r),r&&g(r)){let e="v"in t?t.v instanceof Promise?t.v:Promise.resolve(t.v):Promise.reject(t.e);c(r.v,e)}},m=(e,t,n)=>{let r=new Map,i=!1;n.forEach(((n,o)=>{n||o!==e||(n=t),n?(r.set(o,n),t.d.get(o)!==n&&(i=!0)):console.warn("[Bug] atom state not found")})),(i||t.d.size!==r.size)&&(t.d=r)},y=(e,t,n)=>{let r=o(e),i={d:(null==r?void 0:r.d)||new Map,v:t};if(n&&m(e,i,n),r&&p(r,i)&&r.d===i.d)return r;if(r&&g(r)&&g(i)&&((e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig)(r,i)){if(r.d===i.d)return r;i.v=r.v}return u(e,i),i},b=(e,t,n,i)=>{if((e=>"function"==typeof(null==e?void 0:e.then))(t)){let a,s=new Promise(((i,u)=>{let l=!1;t.then((t=>{if(!l){l=!0;let a=o(e),u=y(e,s,n);f(s,t),i(t),r.has(e)&&(null==a?void 0:a.d)!==u.d&&k(e,u,null==a?void 0:a.d)}}),(t=>{if(!l){l=!0;let i=o(e),a=y(e,s,n);d(s,t),u(t),r.has(e)&&(null==i?void 0:i.d)!==a.d&&k(e,a,null==i?void 0:i.d)}})),a=e=>{l||(l=!0,e.then((e=>f(s,e)),(e=>d(s,e))),i(e))}}));return s.orig=t,s.status="pending",l(s,(e=>{e&&a(e),null==i||i()})),y(e,s,n)}return y(e,t,n)},E=(e,t)=>{let n,i,l=o(e);if(!t&&l&&(r.has(e)||Array.from(l.d).every((([t,n])=>t===e||E(t)===n))))return l;let c=new Map,f=!0;try{let t=e.read((t=>{if(t===e){let e=o(t);if(e)return c.set(t,e),v(e);if(a(t))return c.set(t,void 0),t.init;throw Error("no atom init")}let n=E(t);return c.set(t,n),v(n)}),{get signal(){return n||(n=new AbortController),n.signal},get setSelf(){return s(e)||console.warn("setSelf function cannot be used with read-only atom"),!i&&s(e)&&(i=(...t)=>{if(f&&console.warn("setSelf function cannot be called in sync"),!f)return I(e,...t)}),i}});return b(e,t,c,(()=>null==n?void 0:n.abort()))}catch(t){return((e,t,n)=>{let r=o(e),i={d:(null==r?void 0:r.d)||new Map,e:t};return n&&m(e,i,n),r&&h(r,i)&&r.d===i.d?r:(u(e,i),i)})(e,t,c)}finally{f=!1}},_=e=>{let t=r.get(e);return t||(t=P(e)),t},w=(e,t)=>!t.l.size&&(!t.t.size||1===t.t.size&&t.t.has(e)),O=e=>{let t=r.get(e);t&&w(e,t)&&R(e)},A=e=>{let t=new Map,n=new WeakMap,a=e=>{var t;let n=new Set(null==(t=r.get(e))?void 0:t.t);return i.forEach(((t,r)=>{var i;(null==(i=o(r))?void 0:i.d.has(e))&&n.add(r)})),n},s=e=>{a(e).forEach((r=>{r!==e&&(t.set(r,(t.get(r)||new Set).add(e)),n.set(r,(n.get(r)||0)+1),s(r))}))};s(e);let u=e=>{a(e).forEach((r=>{var i;if(r!==e){let e=n.get(r);if(e&&n.set(r,--e),!e){let e=!!(null==(i=t.get(r))?void 0:i.size);if(e){let t=o(r),n=E(r,!0);e=!t||!p(t,n)}e||t.forEach((e=>e.delete(r)))}u(r)}}))};u(e)},S=(t,...n)=>{let r=!0,i=t.write((e=>v(E(e))),((n,...i)=>{let s;if(n===t){if(!a(n))throw Error("atom not writable");let e=o(n),t=b(n,i[0]);e&&p(e,t)||A(n)}else s=S(n,...i);if(!r){let t=T();e.forEach((e=>e({type:"async-write",flushed:t})))}return s}),...n);return r=!1,i},I=(t,...n)=>{let r=S(t,...n),i=T();return e.forEach((e=>e({type:"write",flushed:i}))),r},P=(e,n,i)=>{var a;let u=i||[];null==(a=o(e))||a.d.forEach(((t,n)=>{let i=r.get(n);i?i.t.add(e):n!==e&&P(n,e,u)})),E(e);let l={t:new Set(n&&[n]),l:new Set};if(r.set(e,l),t.add(e),s(e)&&e.onMount){let{onMount:t}=e;u.push((()=>{let n=t(((...t)=>I(e,...t)));n&&(l.u=n)}))}return i||u.forEach((e=>e())),l},R=e=>{var n;let i=null==(n=r.get(e))?void 0:n.u;i&&i(),r.delete(e),t.delete(e);let a=o(e);a?(g(a)&&c(a.v),a.d.forEach(((t,n)=>{if(n!==e){let t=r.get(n);t&&(t.t.delete(e),w(n,t)&&R(n))}}))):console.warn("[Bug] could not find atom state to unmount",e)},k=(e,t,n)=>{let i=new Set(t.d.keys());null==n||n.forEach(((t,n)=>{if(i.has(n))return void i.delete(n);let o=r.get(n);o&&(o.t.delete(e),w(n,o)&&R(n))})),i.forEach((t=>{let n=r.get(t);n?n.t.add(e):r.has(e)&&P(t,e)}))},T=()=>{let e;for(e=new Set;i.size;){let t=Array.from(i);i.clear(),t.forEach((([t,n])=>{let i=o(t);if(i){let o=r.get(t);o&&i.d!==(null==n?void 0:n.d)&&k(t,i,null==n?void 0:n.d),o&&(!n||g(n)||!p(n,i)&&!h(n,i))&&(o.l.forEach((e=>e())),e.add(t))}else console.warn("[Bug] no atom state to flush")}))}return e};return{get:e=>v(E(e)),set:I,sub:(t,n)=>{let r=_(t),i=T(),o=r.l;return o.add(n),e.forEach((e=>e({type:"sub",flushed:i}))),()=>{o.delete(n),O(t),e.forEach((e=>e({type:"unsub"})))}},dev_subscribe_store:(t,n)=>{if(2!==n)throw Error("The current StoreListener revision is 2.");return e.add(t),()=>{e.delete(t)}},dev_get_mounted_atoms:()=>t.values(),dev_get_atom_state:e=>n.get(e),dev_get_mounted:e=>r.get(e),dev_restore_atoms:t=>{for(let[e,n]of t)a(e)&&(b(e,n),A(e));let n=T();e.forEach((e=>e({type:"restore",flushed:n})))}}};"number"==typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1;let y=()=>(r||(1!==globalThis.__NUMBER_OF_JOTAI_INSTANCES__&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),r=m()),r)}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],(function(){return t(6840),t(24751)})),_N_E=e.O()}]);
